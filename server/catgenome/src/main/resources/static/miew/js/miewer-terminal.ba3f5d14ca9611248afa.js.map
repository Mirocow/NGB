{"version":3,"file":"js/miewer-terminal.ba3f5d14ca9611248afa.js","mappings":"yKAWA,MAAMA,EACF,WAAAC,CAAYC,GACRC,KAAKC,cAAiBC,IACdA,EAAMC,SAAWH,KAAKI,YAEb,UADDF,EAAMG,MAENL,KAAKI,UAAUE,MAAMJ,EAAMC,SAG3BH,KAAKI,UAAUG,KAAKL,EAAMC,SAEtC,EAEJH,KAAKQ,eAAkBL,IACfH,KAAKI,WACLJ,KAAKI,UAAUG,KAAKJ,EACxB,EAEJH,KAAKS,oBAAuBH,IACpBN,KAAKI,WACLJ,KAAKI,UAAUE,MAAMA,EACzB,EAEJN,KAAKU,gBAAkB,KACnBV,KAAKW,UAAW,EAChBX,KAAKY,mBAAmB,EAE5BZ,KAAKa,eAAiB,KAClBb,KAAKW,UAAW,EAChBX,KAAKY,mBAAmB,EAE5BZ,KAAKc,WAAaf,EAClBC,KAAKe,WAAQC,EACbhB,KAAKW,UAAW,CACpB,CACA,UAAAM,GACI,OA/C8CC,EA+C7BlB,KA/CsCmB,OA+ChC,EA/C+CC,EA+C/B,YACnC,MAAQC,QAASC,SAAY,4CAC7BtB,KAAKI,UAAYkB,EAAEtB,KAAKc,YAAYS,SAASvB,KAAKwB,YAAYC,KAAKzB,MAAO,CACtE0B,UAAW,yEACXC,OAAQ,SACRC,cAAc,EACdC,QAAS7B,KAAKU,gBACdoB,OAAQ9B,KAAKa,iBAEjBb,KAAKU,iBACT,EAvDG,KAFgEqB,OA+CpC,KA7CjBA,EAAIC,WAAU,SAAUC,EAASC,GAC/C,SAASC,EAAUC,GAAS,IAAMC,EAAKjB,EAAUkB,KAAKF,GAAS,CAAE,MAAOG,GAAKL,EAAOK,EAAI,CAAE,CAC1F,SAASC,EAASJ,GAAS,IAAMC,EAAKjB,EAAiB,MAAEgB,GAAS,CAAE,MAAOG,GAAKL,EAAOK,EAAI,CAAE,CAC7F,SAASF,EAAKI,GAJlB,IAAeL,EAIaK,EAAOC,KAAOT,EAAQQ,EAAOL,QAJ1CA,EAIyDK,EAAOL,MAJhDA,aAAiBL,EAAIK,EAAQ,IAAIL,GAAE,SAAUE,GAAWA,EAAQG,EAAQ,KAIjBO,KAAKR,EAAWK,EAAW,CAC7GH,GAAMjB,EAAYA,EAAUwB,MAAM1B,EAASC,GAAc,KAAKmB,OAClE,IAPwC,IAAUpB,EAASC,EAAYY,EAAGX,CA0D1E,CACA,MAAAyB,CAAOC,GACC9C,KAAKe,QAAU+B,IACf9C,KAAK+C,aACL/C,KAAKe,MAAQ+B,EACb9C,KAAKgD,aAEb,CACA,OAAAC,GACQjD,KAAKI,YACLJ,KAAKI,UAAU8C,UACflD,KAAKI,eAAYY,EAEzB,CACA,WAAAQ,CAAY2B,GACJnD,KAAKe,OACQf,KAAKe,MAAMqC,OACnBC,KAAKrD,KAAKe,MAAOoC,EAASnD,KAAKQ,eAAgBR,KAAKS,oBAEjE,CACA,UAAAuC,GACIhD,KAAK+C,aACD/C,KAAKe,QACUf,KAAKe,MAAMuC,OACnBC,iBAAiB,UAAWvD,KAAKC,eACxCD,KAAKY,oBAEb,CACA,UAAAmC,GACQ/C,KAAKe,OACUf,KAAKe,MAAMuC,OACnBE,oBAAoB,UAAWxD,KAAKC,cAEnD,CACA,iBAAAW,GACQZ,KAAKe,OACLf,KAAKe,MAAM0C,eAAezD,KAAKW,SAEvC,E","sources":["webpack://miewer/./src/terminal/miewer-terminal.ts"],"sourcesContent":["var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport 'jquery.terminal';\nimport 'jquery.terminal/css/jquery.terminal.min.css';\nclass MiewerTerminal {\n    constructor(container) {\n        this.onMiewMessage = (event) => {\n            if (event.message && this._terminal) {\n                switch (event.level) {\n                    case 'error':\n                        this._terminal.error(event.message);\n                        break;\n                    default:\n                        this._terminal.echo(event.message);\n                }\n            }\n        };\n        this.onMiewResponse = (message) => {\n            if (this._terminal) {\n                this._terminal.echo(message);\n            }\n        };\n        this.onMiewResponseError = (error) => {\n            if (this._terminal) {\n                this._terminal.error(error);\n            }\n        };\n        this.onTerminalFocus = () => {\n            this._focused = true;\n            this.manageMiewHotKeys();\n        };\n        this.onTerminalBlur = () => {\n            this._focused = false;\n            this.manageMiewHotKeys();\n        };\n        this._container = container;\n        this._miew = undefined;\n        this._focused = false;\n    }\n    initialize() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { default: $ } = yield import('jquery');\n            this._terminal = $(this._container).terminal(this.interpreter.bind(this), {\n                greetings: 'Miew - 3D Molecular Viewer\\nCopyright Â© 2015-2023 EPAM Systems, Inc.\\n',\n                prompt: 'miew> ',\n                scrollOnEcho: true,\n                onFocus: this.onTerminalFocus,\n                onBlur: this.onTerminalBlur,\n            });\n            this.onTerminalFocus();\n        });\n    }\n    attach(miew) {\n        if (this._miew !== miew) {\n            this.detachMiew();\n            this._miew = miew;\n            this.attachMiew();\n        }\n    }\n    dispose() {\n        if (this._terminal) {\n            this._terminal.destroy();\n            this._terminal = undefined;\n        }\n    }\n    interpreter(command) {\n        if (this._miew) {\n            const exec = this._miew.script;\n            exec.call(this._miew, command, this.onMiewResponse, this.onMiewResponseError);\n        }\n    }\n    attachMiew() {\n        this.detachMiew();\n        if (this._miew) {\n            const logger = this._miew.logger;\n            logger.addEventListener('message', this.onMiewMessage);\n            this.manageMiewHotKeys();\n        }\n    }\n    detachMiew() {\n        if (this._miew) {\n            const logger = this._miew.logger;\n            logger.removeEventListener('message', this.onMiewMessage);\n        }\n    }\n    manageMiewHotKeys() {\n        if (this._miew) {\n            this._miew.enableHotKeys(!this._focused);\n        }\n    }\n}\nexport { MiewerTerminal };\n"],"names":["MiewerTerminal","constructor","container","this","onMiewMessage","event","message","_terminal","level","error","echo","onMiewResponse","onMiewResponseError","onTerminalFocus","_focused","manageMiewHotKeys","onTerminalBlur","_container","_miew","undefined","initialize","thisArg","_arguments","generator","default","$","terminal","interpreter","bind","greetings","prompt","scrollOnEcho","onFocus","onBlur","P","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","attach","miew","detachMiew","attachMiew","dispose","destroy","command","script","call","logger","addEventListener","removeEventListener","enableHotKeys"],"sourceRoot":""}