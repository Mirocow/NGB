"use strict";(self.webpackChunkmiewer=self.webpackChunkmiewer||[]).push([[892],{4289:function(e,t,n){var s=n(5893),i=n(745),r=(n(6470),n(6772)),o=n(7294),a=n(4184),l=n.n(a),c=n(270),u=n(3513),d=n(9372);function h(e){var t;if("number"==typeof e)return e;const n=/^(\d+)px$/.exec(e);return Number(null!==(t=null==n?void 0:n[1])&&void 0!==t?t:"11")}function m(e){return e&&"system"in e&&!0===e.system}function f(e){return m(e)?window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?e.dark:e.light:e}function p(e){const t=Math.abs(e);return t<16?"0".concat(Number(t).toString(16)):Number(t).toString(16)}function g(e){return Number(`0x${e}`)}function v(e,t){const n=Math.abs(e),s=n>>8>>8&255,i=n>>8&255,r=255&n;return void 0===t?`#${p(s)}${p(i)}${p(r)}`:`#${p(s)}${p(i)}${p(r)}${p(Math.floor(255*t))}`}function y(e){if(/^#[0-9a-f]{3}$/i.test(e)){const t=t=>e[t+1].concat(e[t+1]),n=g(t(0)),s=g(t(1));return g(t(2))|s<<8|n<<8<<8}if(/^#[0-9a-f]{6,8}$/i.test(e)){const t=t=>e[2*t+1].concat(e[2*t+2]),n=g(t(0)),s=g(t(1));return g(t(2))|s<<8|n<<8<<8}const t=/^rgba?\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*([,\s/]\s*[\d.]+%?)?\s*\)$/i.exec(e);if(t){const e=Math.min(255,Number(t[1])),n=Math.min(255,Number(t[2])),s=Math.min(255,Number(t[3]));if(!Number.isNaN(e)&&!Number.isNaN(n)&&!Number.isNaN(s))return s|n<<8|e<<8<<8}return 0}const{fontFamily:b="verdana, sans-serif",fontSize:x=11,darkBackgroundBase:w="#111",darkBackground:j="#222",darkForeground:C="#cacaca",darkForegroundFaded:S="#777",darkError:k="#d13460",darkSelectionBackground:_="#e78d04",darkSelectionForeground:N="#222",lightBackgroundBase:O="#e0e0e0",lightBackground:E="#ededed",lightForeground:P="#333",lightForegroundFaded:z="#777",lightError:R="#d90f45",lightSelectionBackground:M="#e78d04",lightSelectionForeground:q="#222"}={fontFamily:"verdana,sans-serif",fontSize:"11px",darkBackgroundBase:"#000",darkBackground:"#222",darkForeground:"#cacaca",darkForegroundFaded:"#777",darkError:"#d13460",darkSelectionBackground:"#e78d04",darkSelectionForeground:"#222",lightBackgroundBase:"#f0f0f0",lightBackground:"#ededed",lightForeground:"#333",lightForegroundFaded:"#777",lightError:"#d90f45",lightSelectionBackground:"#e78d04",lightSelectionForeground:"#222"}||{},A={id:"dark-theme",title:"Dark theme",baseBackground:y(w),background:y(j),foreground:y(C),foregroundFaded:y(S),selectionBackground:y(_),selectionForeground:y(N),error:y(k),fontFamily:b,fontSize:h(x),dark:!0},B={id:"light-theme",title:"Light theme",baseBackground:y(O),background:y(E),foreground:y(P),foregroundFaded:y(z),selectionBackground:y(M),selectionForeground:y(q),error:y(R),fontFamily:b,fontSize:h(x),dark:!1},T={id:"system-theme",title:"System theme",dark:A,light:B,system:!0};function L(){}function I(...e){if(0===e.length)return 1;if(1===e.length)return e[0];const[t,n,...s]=e;return I(function(e,t){const n=Math.floor(e),s=Math.floor(t);if(n<=0||s<=0)return 1;let i=Math.min(n,s),r=Math.max(n,s);for(;0!==i;){const e=i;i=r%i,r=e}return r}(t,n),...s)}function $(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n+=1)if(!F(e[n],t[n]))return!1;return!0}function F(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;if(typeof e!=typeof t)return!1;if("string"==typeof e||"number"==typeof e||"boolean"==typeof e)return e===t;if(Array.isArray(e)&&Array.isArray(t))return $(e,t);if("object"==typeof e&&"object"==typeof t){const n=Object.keys(e),s=Object.keys(t),i=[].concat(n).concat(s);for(const n of i){if(!(n in e)&&n in t)return!1;if(n in e&&!(n in t))return!1;if(!F(e[n],t[n]))return!1}return!0}return e!==t}function Z(e){const{search:t=""}=document.location,n=null!=e?e:t;return(n.startsWith("?")?n.slice(1):n).split("&").map((e=>e.split("="))).map((([e,...t])=>({key:decodeURIComponent(e),value:decodeURIComponent(t.join("="))})))}function H(e,...t){const n=e.map((e=>function(e,t,n){return`${e.key}=${n?encodeURIComponent(e.value):e.value}`}(e,0,t.some((t=>function(e,t){return"string"==typeof t?e.key===t:t.test(e.key)}(e,t)))))).join("&");return n.length>0?`?${n}`:""}const D=[".","-","+","*","?","^","$","(",")","[","]","{","}"];function U(...e){return new RegExp(`^(\\d+(\\.\\d+)?)(${e.map((e=>function(e,t=D){let n=e;return t.forEach((e=>{n=n.replace(new RegExp("\\"+e,"g"),`\\${e}`)})),n}(e))).join("|")})?$`,"i")}function V(e,...t){return U(...t).test(e)}function W(e,...t){var n;const s=U(...t),[,i]=null!==(n=s.exec(e))&&void 0!==n?n:[];if(i&&!Number.isNaN(Number(i)))return Number(i)}function K(e,t){return{read:()=>function(e,t){try{const n=localStorage.getItem(e);return n&&""!==n.trim()?JSON.parse(n):t}catch(e){}return t}(e,t),save:t=>{!function(e,t){localStorage.setItem(e,void 0===t?"":JSON.stringify(t))}(e,t)}}}var G;const X=A,{read:J,save:Y}=K("miewer-theme",X.id),Q=[A,B,T],ee=J(),te=null!==(G=Q.find((e=>e.id===ee)))&&void 0!==G?G:X,ne=(0,c.Ue)((e=>({themes:Q,theme:te,themeConfig:f(te),setTheme(t){e((e=>{if("string"==typeof t){const n=e.themes.find((e=>e.id===t));return n?(Y(n.id),{theme:n,themeConfig:f(n)}):{}}return{theme:t,themeConfig:f(t)}}))},updateThemeConfig(){e((e=>({themeConfig:f(e.theme)})))}})));function se(){return ne((e=>e.themeConfig))}function ie(e){const t=d.Z.darkAlgorithm(e);return t.colorPrimary=t.colorText,t.colorPrimaryBg=t.colorFillTertiary,t.colorPrimaryBgHover=t.colorFillSecondary,t}var re,oe;!function(e){e.string="string",e.boolean="boolean",e.number="number",e.color="color"}(re||(re={})),function(e){e.element="EL",e.residueType="RT",e.sequence="SQ",e.chain="CH",e.secondaryStructure="SS",e.uniform="UN",e.conditional="CO",e.conformation="CF",e.temperature="TM",e.occupancy="OC",e.hydrophobicity="HY",e.molecule="MO",e.carbon="CB"}(oe||(oe={}));const ae={carbon:{default:-1,kind:re.color}},le={color:{required:!0,default:16777215,main:!0,kind:re.color}},ce={subset:{default:"charged",kind:re.string},color:{default:16711680,kind:re.color},baseColor:{default:0,kind:re.color,title:"base color"}},ue={color:{default:9474192,kind:re.color}},de={[oe.element]:"Element",[oe.residueType]:"Residue type",[oe.sequence]:"Sequence",[oe.chain]:"Chain",[oe.secondaryStructure]:"Secondary structure",[oe.uniform]:"Uniform",[oe.conditional]:"Conditional",[oe.conformation]:"Conformation",[oe.temperature]:"Temperature",[oe.occupancy]:"Occupancy",[oe.hydrophobicity]:"Hydrophobicity",[oe.molecule]:"Molecule",[oe.carbon]:"Carbon"},he={[oe.element]:ae,[oe.residueType]:{},[oe.sequence]:{},[oe.chain]:{},[oe.secondaryStructure]:{},[oe.uniform]:le,[oe.conditional]:ce,[oe.conformation]:{},[oe.temperature]:{},[oe.occupancy]:{},[oe.hydrophobicity]:{},[oe.molecule]:{},[oe.carbon]:ue},me=Object.values(oe);var fe;!function(e){e.lines="LN",e.licorice="LC",e.ballsAndSticks="BS",e.vanDerWaals="VW",e.solventAccessibleSurface="SA",e.solventExcludedSurface="SE",e.quickSurface="QS",e.contactSurface="CS",e.trace="TR",e.tube="TU",e.cartoon="CA",e.text="TX",e.volumeDensity="VD"}(fe||(fe={}));const pe={[fe.lines]:"Lines",[fe.licorice]:"Licorice",[fe.ballsAndSticks]:"Balls and sticks",[fe.vanDerWaals]:"Van der Waals",[fe.solventAccessibleSurface]:"Solvent accessible surface",[fe.solventExcludedSurface]:"Solvent excluded surface",[fe.quickSurface]:"Quick surface",[fe.contactSurface]:"Contact surface",[fe.trace]:"Trace",[fe.tube]:"Tube",[fe.cartoon]:"Cartoon",[fe.text]:"Text",[fe.volumeDensity]:"Volume density"},ge={[fe.lines]:{},[fe.licorice]:{},[fe.ballsAndSticks]:{},[fe.vanDerWaals]:{},[fe.solventAccessibleSurface]:{},[fe.solventExcludedSurface]:{},[fe.quickSurface]:{},[fe.contactSurface]:{},[fe.trace]:{},[fe.tube]:{},[fe.cartoon]:{},[fe.text]:{},[fe.volumeDensity]:{}},ve=Object.values(fe);var ye;!function(e){e.diffuse="DF",e.softPlastic="SF",e.glossyPlastic="PL",e.metal="ME",e.transparent="TR",e.glass="GL",e.backdrop="BA",e.toon="TN",e.flat="FL"}(ye||(ye={}));const be={[ye.diffuse]:"Diffuse",[ye.softPlastic]:"Soft plastic",[ye.glossyPlastic]:"Glossy plastic",[ye.metal]:"Metal",[ye.transparent]:"Transparent",[ye.glass]:"Glass",[ye.backdrop]:"Backdrop",[ye.toon]:"Toon",[ye.flat]:"Flat"},xe={[ye.diffuse]:{},[ye.softPlastic]:{},[ye.glossyPlastic]:{},[ye.metal]:{},[ye.transparent]:{},[ye.glass]:{},[ye.backdrop]:{},[ye.toon]:{},[ye.flat]:{}},we=Object.values(ye);var je,Ce,Se;function ke(e){return e&&Array.isArray(e)}function _e(e){if(ke(e))return e[1]}function Ne(e){var t;if(ke(e)){const n=Object.assign({},null!==(t=e[1])&&void 0!==t?t:{});return[e[0],n]}return e}function Oe(e){return ke(e)?e[0]:e}function Ee(e,t=!1){const n=Object.entries(null!=e?e:{}).map((e=>{const[t,n]=e,s=function(e){if(e.required)return e.default}(n);return!!s&&{[t]:s}})).filter(Boolean).reduce(((e,t)=>Object.assign(Object.assign({},e),t)),{});if(0!==Object.keys(n).length||t)return n}function Pe(e,t){return t[Oe(e)]}function ze(e,t){const n=t[Oe(e)];return Object.entries(null!=n?n:{}).map((([e,t])=>Object.assign(Object.assign({},t),{name:e})))}function Re(e,t){const n=_e(e);if(n)return n[t.name]}function Me(e,t,n,s){let i=_e(e);return i||void 0===s||(i=Ee(t,!0)),i?[Oe(e),Object.assign(Object.assign({},i),{[n.name]:s})]:e}function qe(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;if(Oe(e)!==Oe(t))return!1;const n=_e(e);return i=_e(t),!(s=n)&&!i||!(!s||!i)&&F(s,i);var s,i}function Ae(e){const{name:t,selector:n,mode:s,colorer:i,material:r}=e;return{name:t,selector:n,mode:s?Ne(s):void 0,colorer:i?Ne(i):void 0,material:r?Ne(r):void 0}}function Be(e,t){const{name:n,selector:s,colorer:i,material:r,mode:o}=e,{name:a,selector:l,colorer:c,material:u,mode:d}=t;return(null!=n?n:"")===(null!=a?a:"")&&(null!=s?s:"")===(null!=l?l:"")&&qe(i,c)&&qe(r,u)&&qe(o,d)}!function(e){e.random="random",e.basic="basic",e.pcf="pcf"}(je||(je={})),function(e){e.jm="JM",e.jmol="JMOL"}(Ce||(Ce={})),function(e){e.atom="atom",e.residue="residue",e.molecule="molecule",e.chain="chain"}(Se||(Se={}));var Te=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(s=Object.getOwnPropertySymbols(e);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(e,s[i])&&(n[s[i]]=e[s[i]])}return n};function Le(e){const{reps:t}=e,n=Te(e,["reps"]);return Object.assign(Object.assign({},n),{reps:t?t.map(Ae):void 0})}var Ie=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(s=Object.getOwnPropertySymbols(e);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(e,s[i])&&(n[s[i]]=e[s[i]])}return n};function $e(e){const{name:t}=e;return Ie(e,["name"])}function Fe(e){if(e)return e.map($e)}function Ze(e){const{reps:t,source:n,searchRequest:s}=e,i=Ie(e,["reps","source","searchRequest"]);return Object.assign(Object.assign({},i),{reps:Fe(t)})}class He{}class De extends He{constructor(e){super(),this._source=e}perform(e,t){e.unload(void 0),e.load(this._source,{}).then((()=>{t()})).catch((e=>{console.warn(e.message)}))}}class Ue extends He{constructor(e){super(),this._options=e}merge(e){this._options=Object.assign(Object.assign({},this._options),e._options)}perform(e,t){const n=Ze(this._options),{preset:s,reps:i}=n,r=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(s=Object.getOwnPropertySymbols(e);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(e,s[i])&&(n[s[i]]=e[s[i]])}return n}(n,["preset","reps"]);if(Object.keys(r).length>0&&e.setOptions(r),s&&e.applyPreset(s),i){const t=e.repCount(void 0);i.forEach(((t,n)=>{e.rep(n,t)}));for(let n=i.length;n<t;n+=1)e.repRemove(n,void 0)}t()}}class Ve{constructor(e){this._miew=e,this._queue=[]}get busy(){return Boolean(this._requestInProgress)}registerRequest(e){const t=this._queue[this._queue.length-1];e instanceof De?this._queue=[e]:t instanceof Ue&&e instanceof Ue?t.merge(e):this._queue.push(e),this.performNextRequest()}dispose(){this._queue=[],this._miew=void 0}pickRequest(){if(0!==this._queue.length)return this._queue.shift()}onRequestDone(){this._requestInProgress=void 0,this.performNextRequest()}performNextRequest(){!this._requestInProgress&&this._miew&&(this._requestInProgress=this.pickRequest(),this._requestInProgress&&this._requestInProgress.perform(this._miew,this.onRequestDone.bind(this)))}}var We=class{constructor(e,t){this._processor=new Ve(e),this._source=void 0,this._options={},this.requestOptions(null!=t?t:{})}get busy(){return this._processor.busy}requestOptions(e){const{load:t}=e,n=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(s=Object.getOwnPropertySymbols(e);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(e,s[i])&&(n[s[i]]=e[s[i]])}return n}(e,["load"]);if(t&&this._source!==t)this._source=t,this._options=n,this._processor.registerRequest(new De(t)),this._processor.registerRequest(new Ue(n));else{const e=function(e,t){const n=Ze(e),{reps:s}=n,i=Ie(n,["reps"]),r=Ze(t),{reps:o}=r,a=function(e,t){const n={},s=Object.keys(Object.assign(Object.assign({},e),t));for(const i of s)e[i]!==t[i]&&void 0!==t[i]&&(n[i]=t[i]);return n}(i,Ie(r,["reps"]));return $(null!=s?s:[],null!=o?o:[])||(a.reps=o),a}(this._options,n);this._options=n,this._processor.registerRequest(new Ue(Object.assign(Object.assign({},e),{reps:n.reps})))}}dispose(){this._processor.dispose()}},Ke=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(s=Object.getOwnPropertySymbols(e);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(e,s[i])&&(n[s[i]]=e[s[i]])}return n};const Ge=/^r\.n\.(\d+)$/i,Xe=/^(bg\.color)$/i;function Je(e){return e.filter((e=>!Xe.test(e.key)))}function Ye(e){const t=Z(),{names:n,filteredEntries:s}=function(e){const t=e.filter((e=>Ge.test(e.key))),n=e.filter((e=>!Ge.test(e.key))),s=[];return t.forEach((e=>{const t=Ge.exec(e.key);(null==t?void 0:t[1])&&(s[Number(null==t?void 0:t[1])]=e.value)})),{names:s,filteredEntries:n}}(t),{search:i,filteredEntries:r}=function(e){const t=e.find((e=>/^search$/i.test(e.key))),n=e.filter((e=>!/^search$/i.test(e.key)));return{search:t?t.value:void 0,filteredEntries:n}}(s),o=Le(e(H(Je(r),"v",Ge)));o.searchRequest=i;const{reps:a}=o,l=Ke(o,["reps"]);if(a)for(let e=0;e<Math.min(a.length,n.length);e+=1)a[e].name=n[e];return Object.assign(Object.assign({},l),{reps:a})}function Qe(e,t){try{const n=new URL(e);return n.search=H(Je(function(e,t){const n=[];return t.forEach(((e,t)=>{e&&n.push({key:`r.n.${t}`,value:e})})),n.concat(e.slice())}(Z(n.search),null!=t?t:[])),"v",Ge),n.href}catch(e){e instanceof Error?console.warn(e.message):console.warn(e)}return""}function et(e){let t=0;return e._forEachComplexVisual((e=>{t+=e.getSelectionCount()})),t}function tt(e){const t=e.getType(),n=e.getSequence(),s=e.getICode().trim(),i=e.getChain();return`${t._fullName}: ${i.getName()}.${t.getName()}${n}${s}`}function nt(e){const t=[];return e._forEachComplexVisual((e=>{e.forSelectedResidues((e=>{t.push(e)}))})),t}function st(e){const t=function(e){const t=[],n=[...new Set(e)].sort(((e,t)=>e-t));for(const e of n)0===t.length||t[t.length-1][1]<e-1?t.push([e,e]):t[t.length-1][1]=e;return t}(e.map((e=>e._index)));return t.length?`residx ${t.map((([e,t])=>e===t?e.toString():[e.toString(),t.toString()].join(":"))).join(",")}`:"none"}const it=(0,c.Ue)(((e,t)=>({loaded:!1,chains:[],chainNames:[],setChains(t){e((()=>({chains:t,chainNames:t.map((e=>e.chain.getName())),loaded:!0})))},getChain(e){return t().chains.find((t=>t.chain.getName()===e))}}))),rt=(0,c.Ue)((e=>({search:void 0,urlSearchRequest:void 0,setSearch(t){e((()=>({search:t})))},setUrlSearchRequest(t){e((()=>({urlSearchRequest:t})))}}))),ot=(0,c.Ue)(((e,t)=>({lastPick:void 0,selectedAtomsCount:0,selectedResidues:[],selector:"",setLastPick(t){e((()=>({lastPick:t})))},setSelectedAtomsCount(t){e((()=>({selectedAtomsCount:t})))},getSelectedResidues(){return t().selectedResidues},setSelectedResidues(t){e((()=>({selectedResidues:t.slice(),selector:st(t)})))},getSelector(){return t().selector},setData(t){e((e=>{const{lastPick:n=e.lastPick,selectedAtomsCount:s=e.selectedAtomsCount,selectedResidues:i=e.selectedResidues,selector:r=st(i)}=t;return n!==e.lastPick||s!==e.selectedAtomsCount||i!==e.selectedResidues&&!function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n+=1)if(e[n]!==t[n])return!1;return!0}(i,e.selectedResidues)||r!==e.selector?t:e}))}})));function at(){const{chains:e}=it(),{setSelectedResidues:t}=ot();return(0,o.useCallback)((n=>{let s=[];if(n&&n.length>0){for(const t of e)s=s.concat(t.sequence);const i=s.reduce(((e,t)=>e.concat(t.letterCode)),""),r=(()=>{let e=[];try{const t=new RegExp(`(${n})`,"ig");let r=t.exec(i);for(;r;)e=e.concat(s.slice(r.index,r.index+r[1].length).map((e=>e.residue))),r=t.exec(i);return e}catch(e){}let t=i.toUpperCase().indexOf(n.toUpperCase());for(;t>=0;)e=e.concat(s.slice(t,t+n.length).map((e=>e.residue))),t=i.toUpperCase().indexOf(n.toUpperCase(),t+n.length);return e})();return t(r),r}return[]}),[e,t])}function lt(e){var t,n,s,i;return(null===(t=e.obj)||void 0===t?void 0:t.atom)?{type:Se.atom,entity:e.obj.atom}:(null===(n=e.obj)||void 0===n?void 0:n.residue)?{type:Se.residue,entity:e.obj.residue}:(null===(s=e.obj)||void 0===s?void 0:s.chain)?{type:Se.chain,entity:e.obj.chain}:(null===(i=e.obj)||void 0===i?void 0:i.molecule)?{type:Se.molecule,entity:e.obj.molecule}:void 0}function ct(e){let t=[];return e._forEachComplexVisual((e=>{const n=[];for(let t=0;t<e.repCount();t+=1){const s=e.repGet(t);s&&n.push(s)}t=t.concat(function(e,t){return e.getChainNames().map((n=>function(e,t,n){const s=e.getChain(t),i=[];return s.forEachResidue((t=>{if(!function(e){const t=e.getType(),{Flags:n}=t.constructor;return!!(null==n?void 0:n.WATER)&&t.flags===n.WATER}(t)){const s=function(e,t){const n=new Set;return e.forEachAtom((e=>{t.forEach(((t,s)=>{t.selector&&"function"==typeof t.selector.includesAtom&&t.selector.includesAtom(e)&&n.add(s)}))})),[...n].map((e=>t[e].colorer)).filter((e=>Boolean(e)))}(t,n).pop();let{letterCode:r}=t.getType();0===r.length&&(r="?"),i.push({residue:t,index:t._index,code:t.getType().getName(),letterCode:r,name:t.getType()._fullName,colorer:s,complex:e})}})),{chain:s,complex:e,sequence:i}}(e,n,t)))}(e.getComplex(),n))})),t}const ut=(0,c.Ue)((e=>({miew:void 0,miewProxy:void 0,error:void 0,options:{},optionsInitializer:void 0,setMiew(t){e((()=>({miew:t,optionsInitializer:t.constructor.options})))},setMiewProxy(t){e((()=>({miewProxy:t})))},setError(t){e((()=>({error:t})))},setSource(t){e((0,u.Uy)((e=>{e.options.source=t})))},setOptions(t){e((0,u.Uy)((e=>{const n=e.options.settings;e.options=Le(t),e.options.settings?(null==n?void 0:n.bg)&&(e.options.settings.bg=n.bg):e.options.settings=n})))},setBackground(t){e((0,u.Uy)((e=>{var n;e.options.settings=null!==(n=e.options.settings)&&void 0!==n?n:{},e.options.settings.bg={color:t}})))},addRepresentation(t){e((0,u.Uy)((e=>{e.options.reps||(e.options.reps=[]),e.options.reps.push(t)})))},changeRepresentation(t,n){e((0,u.Uy)((e=>{e.options.reps||(e.options.reps=[]),e.options.reps.length<=t?e.options.reps.push(n):e.options.reps[t]=n})))},changeRepresentations(t){e((0,u.Uy)((e=>{var n;const s=t.map(Ae),i=(null!==(n=e.options.reps)&&void 0!==n?n:[]).map(Ae);let r=i.length!==s.length;for(let e=0;e<Math.max(i.length,s.length);e+=1)i[e]&&s[e]&&i[e].selector===s[e].selector?s[e].name=i[e].name:r=!0;r&&(e.options.reps=s)})))},removeRepresentation(t){e((0,u.Uy)((e=>{e.options.reps&&e.options.reps.splice(t,1)})))}})));function dt(){return ut((e=>e.miew))}function ht(){return ut().options}function mt(){const e=ut((e=>e.addRepresentation));return(0,o.useCallback)((t=>{const n=null!=t?t:{selector:"not hetatm",mode:fe.cartoon,colorer:oe.secondaryStructure,material:ye.softPlastic};return e(n),n}),[e])}function ft(){return function(){const e=se(),{setBackground:t}=ut();(0,o.useEffect)((()=>{t(e.background)}),[e,t])}(),function(){const e=ut((e=>{var t;return null===(t=e.optionsInitializer)||void 0===t?void 0:t.fromURL})),{setOptions:t}=ut(),{setUrlSearchRequest:n}=rt();(0,o.useEffect)((()=>{if(e){const s=Ye(e);s.searchRequest&&(n(s.searchRequest),delete s.searchRequest),s.load?(s.source=s.load,t(s)):t({load:"1CRN",preset:"macro"})}}),[e,Ye,t,n])}(),function(){const{miew:e}=ut(),{setData:t}=ot(),{changeRepresentations:n,setSource:s}=ut(),{setChains:i}=it();!function(){const{urlSearchRequest:e,setUrlSearchRequest:t}=rt(),{loaded:n}=it(),s=at();(0,o.useEffect)((()=>{n&&e&&e.length>0&&(s(e),t(void 0))}),[n,e,s])}(),(0,o.useEffect)((()=>{if(e){const r=e=>{s(e.source)},o=()=>{i(ct(e)),n(function(e){const t=e.repCount(void 0),n=[];for(let s=0;s<t;s+=1){const{selector:t,mode:i,material:r,colorer:o}=e.rep(s,void 0);n.push({selector:t,mode:i,material:r,colorer:o})}return n}(e))},a=n=>{t({selectedAtomsCount:et(e),lastPick:lt(n),selectedResidues:nt(e)})},l=()=>{i(ct(e))};return e.addEventListener("loading",r),e.addEventListener("buildingDone",o),e.addEventListener("newpick",a),e.addEventListener("repChanged",l),e.addEventListener("repAdded",l),e.addEventListener("repRemoved",l),()=>{e.removeEventListener("loading",r),e.removeEventListener("buildingDone",o),e.removeEventListener("newpick",a),e.removeEventListener("repChanged",l),e.removeEventListener("repAdded",l),e.removeEventListener("repRemoved",l)}}return L}),[e,s,n,t])}(),function(){const{miew:e,miewProxy:t,setMiewProxy:n}=ut();(0,o.useEffect)((()=>{if(e){const t=new We(e);return n(t),()=>{n(void 0),t.dispose()}}return L}),[e,n]);const s=ht();(0,o.useEffect)((()=>(t&&t.requestOptions(s),L)),[t,s])}(),function(){const{selector:e,setSelectedAtomsCount:t}=ot(),n=dt();(0,o.useEffect)((()=>{n&&(n.select(e,!1),t(et(n)))}),[e,n,t])}(),ht()}var pt,gt,vt=function(e){var t;ft();const{className:i,style:r}=e,a=(0,o.useRef)(null),{miew:c,error:u,setMiew:d,setError:h}=ut(),m=function(e){const[t,n]=(0,o.useState)(),s=se();return(0,o.useEffect)((()=>{!e||!s||t&&t.container===e||n({container:e,settings:{bg:{color:s.background},axes:!1,fps:!1}})}),[e,s,t]),t}(null!==(t=a.current)&&void 0!==t?t:void 0);return(0,o.useLayoutEffect)((()=>{m&&function(e){return t=this,s=void 0,r=function*(){if(!e.container)throw new Error("Error initializing miew: container is missing");const t=new((yield Promise.all([n.e(119),n.e(841),n.e(202)]).then(n.bind(n,7451))).Miew)(e);if(!t.init())throw new Error("Error initializing Miew");return t.run(),t},new((i=void 0)||(i=Promise))((function(e,n){function o(e){try{l(r.next(e))}catch(e){n(e)}}function a(e){try{l(r.throw(e))}catch(e){n(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(o,a)}l((r=r.apply(t,s||[])).next())}));var t,s,i,r}(m).then(d).catch((e=>{h(e.message)}))}),[h,d,m]),(0,s.jsxs)("div",{className:i,style:r,children:[(0,s.jsx)("div",{ref:a,className:"mw-full-size overflow-hidden"}),!u&&!c&&(0,s.jsx)("div",{className:l()("mw-full-size","mw-centered"),children:(0,s.jsx)("span",{className:l()("mw-miew-message","mw-text-faded"),children:"Initialization..."})}),u&&(0,s.jsx)("div",{className:l()("mw-error","mw-full-size","mw-centered"),children:(0,s.jsx)("span",{className:"mw-miew-message",children:u})})]})};(gt=pt||(pt={})).terminal="terminal",gt.representations="representations",gt.sequences="sequences";const yt={[pt.terminal]:"Terminal",[pt.representations]:"Layers",[pt.sequences]:"Chain sequences"},bt={[pt.terminal]:"Terminal",[pt.representations]:"Layers",[pt.sequences]:"Sequences"};function xt(e){return void 0!==e&&("number"==typeof e||V(e,"px"))}function wt(e){return"string"==typeof e&&V(e,"%")}function jt(e){return"string"==typeof e&&(V(e,"*","%")||/^(\*|fr)$/i.test(e))}function Ct(e){return"string"==typeof e&&/^auto$/i.test(e)}function St(e){return{value:kt(e),fixed:xt(e),percent:wt(e),flex:jt(e),auto:Ct(e),size:e}}function kt(e){if(void 0===e)return 0;if("number"==typeof e)return e;if(!Number.isNaN(Number(e)))return Number(e);const t=W(e,"px","%","*","fr");return void 0!==t?t:/^(\*|fr)$/i.test(e)||jt(e)?1:0}function _t(e,t,n){var s,i,r;if(void 0===e)return;if("number"==typeof e)return e;const o=(t,n)=>{const s=W(e,...t);if(void 0!==s)return"function"==typeof n?n(s):s};return null!==(r=null!==(i=null!==(s=o(["px"]))&&void 0!==s?s:o(["%"],(e=>t*(e/100))))&&void 0!==i?i:o(["*","fr"],(e=>e*n)))&&void 0!==r?r:"*"===e?n:0}function Nt(e){return e.map((e=>({key:e.key,index:e.index,size:e.size,minSize:e.minSize})))}function Ot(){return null}function Et(e,t="auto"){if(e&&"boolean"!=typeof e){if(e.type===Ot)return{size:"*",minSize:0};const{size:t,stretch:n,minSize:s}=e.props;if(void 0!==t)return{size:t,minSize:null!=s?s:0};if(n)return{size:"*",minSize:null!=s?s:0}}return{size:t,minSize:5}}function Pt(e,t){const n=[];return o.Children.forEach(e,((e,s)=>{n.push(function(e,t,n="auto"){var s;let i;return"boolean"!=typeof e&&e&&(i=null!==(s=e.key)&&void 0!==s?s:void 0),Object.assign({key:null!=i?i:`child-${t}`,index:t},Et(e,n))}(e,s,t))})),n}function zt(e){var t;return"string"==typeof e.key?e.key:`child-${null!==(t=e.key)&&void 0!==t?t:e.index}`}function Rt(e,t){const n=e.map((e=>`[${zt(e)}] ${function(e,t){const n=(()=>{if(void 0===e)return"auto";if("number"==typeof e)return`${e}px`;if("auto"===e)return e;if("*"===e)return"1fr";const t=/^(\d+(\.\d+)?)(fr|\*)$/i.exec(e);return(null==t?void 0:t[1])?`${t[1]}fr`:/\d+(\.\d+)?%$/.test(e)?e:"1fr"})(),s=(()=>{if("number"==typeof t)return`${t}px`})();return s&&s!==n?`minmax(${t}px, ${n})`:n}(e.size,e.minSize)}`));switch(t){case"vertical":return{gridTemplateRows:n.join(" ")};case"horizontal":return{gridTemplateColumns:n.join(" ")};default:return}}function Mt(e){return"horizontal"===e?"gridColumn":"gridRow"}function qt(e){const{direction:t="horizontal"}=e;return t}function At(e){const{grid:t,flex:n}=e;return!0===t?{grid:!0,flex:!1}:{grid:!1,flex:null!=n?n:"start"}}function Bt(...e){const t=e.filter((e=>void 0!==e));if(0===t.length)return;if(1===t.length)return t[0];const[n,s,...i]=t;return Bt(Object.assign(Object.assign({},n),s),...i)}function Tt(e,t){const[n,s]=(0,o.useState)({sizes:Pt(e,t),children:e}),i=(0,o.useCallback)((e=>{s((t=>({sizes:e,children:t.children})))}),[s]),{sizes:r,children:a}=n;return(0,o.useEffect)((()=>{const n=Pt(e,t);s((t=>{var s,i;const r=(s=n,i=t.sizes,s.some((e=>Boolean(e.key)&&!i.find((t=>Boolean(t.key)&&e.key===t.key))))?n:function(e,t){const n=Nt(e);for(const e of n){const n=t.find((t=>Boolean(t.key)&&Boolean(e.key)&&t.key===e.key));n&&(e.size=n.size,e.minSize=n.minSize)}return n}(n,t.sizes));return function(e,t){if(e.length===t.length){for(let n=0;n<e.length;n+=1)if(e[n].size!==t[n].size||e[n].minSize!==t[n].minSize)return!1;return!0}return!1}(r,t.sizes)?{sizes:t.sizes,children:e}:{sizes:r,children:e}}))}),[e,t,s]),[r,a,i]}var Lt=function(e){const{children:t}=e,n=function(e){const{className:t}=e,{grid:n,flex:s}=At(e);return l()(t,"mw-container",qt(e),{"mw-grid":n,"mw-flex":s},!(!s||"boolean"==typeof s)&&`mw-flex-${s}`)}(e),[i,r]=function(e){const{grid:t}=At(e),{style:n,children:s,gridSizes:i,defaultChildSize:r="auto"}=e,[a]=Tt(null!=s?s:[],r),l=null!=i?i:a,c=qt(e);return(0,o.useMemo)((()=>[Bt(t?Rt(l,c):void 0,n),l]),[n,c,t,l])}(e),a=function(e){return(t,n)=>{var s,i;return null!==(i=t&&"boolean"!=typeof t?function(e,t){return e.find((e=>Boolean(e.key)&&Boolean(t)&&e.key===t))}(e,null!==(s=t.key)&&void 0!==s?s:void 0):void 0)&&void 0!==i?i:e[n]}}(r);return(0,s.jsx)("div",{className:n,style:i,children:o.Children.map(t,((t,n)=>function(e,t,n){const{grid:s}=At(t),i=qt(t);if(!e)return null;if("boolean"==typeof e)return e;const r=e.props,{style:a}=r,l=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(s=Object.getOwnPropertySymbols(e);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(e,s[i])&&(n[s[i]]=e[s[i]])}return n}(r,["style"]),c=(()=>{var e;return n?s?Object.assign(Object.assign({},null!=a?a:{}),{[Mt(i)]:zt(n)}):Object.assign(Object.assign({},null!=a?a:{}),null!==(e=function(e,t){var n;if(!e)return;const{size:s,minSize:i}=e;if("string"==typeof s){const e=/^(\d+(\.\d+)?)?(fr|\*)$/i.exec(s);if(e)return{flex:`${null!==(n=e[1])&&void 0!==n?n:1} 1 ${i?`${i}px`:"auto"}`}}return"horizontal"===t?{width:s,minWidth:i}:{height:s,minHeight:i}}(n,i))&&void 0!==e?e:{}):a})();return o.cloneElement(e,Object.assign(Object.assign({},l),{style:c}))}(t,e,a(t,n))))})},It=n(1577),$t=n(4549),Ft=n(553);function Zt(e){return"type"in e&&"divider"===e.type}function Ht(e){return!Zt(e)&&Boolean(e.title)&&"actions"in e&&Array.isArray(e.actions)}function Dt(e){return!Zt(e)&&!Ht(e)}function Ut(e,t){for(const n of t){if(Dt(n)&&n.key===e)return n;if(Ht(n)){if(n.key===e)return;const t=Ut(e,n.actions);if(t)return t}}}var Vt=n(9508);function Wt(e){return e.reduce(((e,t)=>[...null!=e?e:[],...null!=t?t:[]]),[])}function Kt(e){if(Zt(e))return[{type:"divider"}];if(Dt(e)){const{icon:t,key:n,title:i,checked:r,disabled:o}=e;return[{key:n,label:(0,s.jsxs)("span",{className:"mw-panel-action-menu-item",children:[(0,s.jsxs)("span",{className:"mw-panel-action-menu-item-title",children:[t&&(0,s.jsx)(t,{style:{marginRight:5,fontSize:"larger"}}),i]}),(0,s.jsx)("span",{children:r&&(0,s.jsx)(Vt.Z,{style:{marginLeft:5}})})]}),disabled:o}]}const{actions:t,icon:n,title:i,key:r}=e;return t.length>0?[{key:r,label:i,icon:n&&(0,s.jsx)(n,{}),children:Wt(t.map(Kt))}]:void 0}var Gt=function(e){var t,n;const{className:i,style:r,action:a}=e;if(Dt(a)){const{key:e,title:n,disabled:o,icon:l,onAction:c}=a;return(0,s.jsxs)(It.ZP,{disabled:o,type:"text",className:i,style:r,onClick:c,children:[l&&(0,s.jsx)(l,{}),n,null!==(t=!l&&!n)&&void 0!==t?t:e]})}const l=(c=a,(0,o.useMemo)((()=>Wt(c.actions.map(Kt))),[c]));var c;const u=(0,o.useCallback)((e=>{const t=Ut(e.key,[a]);t&&t.onAction()}),[a]),d=(0,o.useMemo)((()=>({items:l,onClick:u})),[l,u]),{key:h,disabled:m,icon:f,title:p}=a;return(0,s.jsx)(Ft.Z,{disabled:a.disabled,menu:d,trigger:["click"],overlayClassName:"mw-panel-action-menu-container",children:(0,s.jsxs)(It.ZP,{disabled:m,type:"text",className:i,style:r,children:[f&&(0,s.jsx)(f,{}),p,null!==(n=!f&&!p)&&void 0!==n?n:h]})})},Xt=function(e){var t;const{className:n,title:i,titleClassName:r,titleStyle:o,onClose:a,actions:c,children:u,style:d,bordered:h,noPadding:m,transparent:f}=e,p="function"==typeof a;return(0,s.jsxs)("div",{className:l()("mw-panel",n,{"mw-panel-bordered":h,"mw-panel-no-padding":m,"mw-panel-transparent":f}),style:d,children:[(null!==(t=null!=i?i:p)&&void 0!==t?t:c)&&(0,s.jsxs)("div",{className:"mw-panel-header",children:[(0,s.jsx)("div",{className:l()("mw-panel-title",r),style:o,children:i}),(0,s.jsxs)("div",{className:"mw-panel-actions",children:[(null!=c?c:[]).map((e=>(0,s.jsx)(Gt,{className:"mw-panel-action",action:e},e.key))),c&&c.length>0&&p&&(0,s.jsx)("div",{className:"mw-panel-action-divider"}),p&&(0,s.jsx)(It.ZP,{className:"mw-panel-action mw-panel-close",type:"text",onClick:a,children:(0,s.jsx)($t.Z,{})})]})]}),(0,s.jsx)("div",{className:"mw-panel-content",children:u})]})};const{read:Jt,save:Yt}=K("miewer-panels",[pt.representations,pt.sequences]),Qt=(0,c.Ue)(((e,t)=>({panels:new Set(Jt()),setPanelVisible(n,s){const i=new Set([...t().panels].filter((e=>e!==n)).concat(void 0===s||s?[n]:[]));Yt([...i]),e({panels:i})},togglePanel(e){const n=t().panels.has(e);t().setPanelVisible(e,!n)}})));function en(e){return Qt((e=>e.panels)).has(e)}var tn=function(e){const{panel:t,children:n,title:i}=e,r=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(s=Object.getOwnPropertySymbols(e);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(e,s[i])&&(n[s[i]]=e[s[i]])}return n}(e,["panel","children","title"]),a=function(e){const t=Qt((e=>e.setPanelVisible));return(0,o.useCallback)((()=>{t(e,!1)}),[t,e])}(t),l=(0,o.useMemo)((()=>i||yt[t]),[t,i]);return(0,s.jsx)(Xt,Object.assign({},r,{title:l,onClose:a,children:n}))};const nn=(0,o.createContext)({setSizes:L,sizes:[]});function sn(e){return void 0!==e&&!Number.isNaN(Number(e))}function rn(e,t,n,s){if(0===n)return t;const i=Math.sign(n);let r=t;const{calculatedSizes:o,calculatedMinSizes:a,sizesInfo:l}=e;for(;e.dividers.has(r)||l[r].auto||(c=r,s&&o[c]<=a[c]);){if(r>=o.length-1||0===r)return;r+=i}var c;return r}function on(e,t){const{sizes:n,initialSizes:s,grid:i}=e,r=t(i),o=function(e,t){const n=e.reduce(((e,t)=>e+(jt(t.size)?kt(t.size):0)),0),s=t-e.reduce(((e,n)=>{var s;return e+(null!==(s=_t(n.size,t,0))&&void 0!==s?s:0)}),0),i=0===n?0:s/n;return e.map((e=>{var n;return null!==(n=_t(e.size,t,i))&&void 0!==n?n:0}))}(n,r),a=s.map(((e,t)=>St(e.size).flex?o[t]:0)).filter((e=>e>0)),l=I(...a),c=s.map(((e,t)=>{const n=St(e.size);return n.percent?Object.assign(Object.assign({},e),{size:`${Math.floor(o[t]/r*100)}%`}):n.flex?Object.assign(Object.assign({},e),{size:`${Math.floor(o[t]/l)}*`}):n.fixed?Object.assign(Object.assign({},e),{size:o[t]}):e}));return Nt(c)}var an=function(e){const{className:t,style:n,disabled:i,previous:r,next:a}=e,{sizes:c,setSizes:u}=(0,o.useContext)(nn),d=(0,o.useRef)(void 0),h=qt(e),m=(0,o.useMemo)((()=>function(e){return t=>"vertical"===e?t.offsetHeight:t.offsetWidth}(h)),[h]),f=(0,o.useCallback)(((e,t)=>function(e,t,n){const s=Rt(t,n),{gridTemplateRows:i="",gridTemplateColumns:r=""}=null!=s?s:{};return e.style.gridTemplateRows=i,e.style.gridTemplateColumns=r,s}(e,t,h)),[h]),p=(0,o.useCallback)((e=>(d.current=function(e,t,n){const{parentElement:s}=e,i=e.dataset.previous,r=e.dataset.next,o=[],a=new Set;if(!s||!sn(i)||!sn(r))return;const{children:l}=s;for(let e=0;e<l.length;e+=1){const t=l[e];if(!(t instanceof HTMLElement))return;o.push(t),t.dataset.divider&&a.add(e)}return o.length>Number(i)&&o.length>Number(r)?{calculatedSizes:o.map(n),calculatedMinSizes:t.map((e=>{var t;return null!==(t=e?e.minSize:void 0)&&void 0!==t?t:0})),previousId:Number(i),nextId:Number(r),grid:s,dividers:a,sizes:Nt(t),sizesInfo:t.map((e=>St(e.size))),initialSizes:Nt(t)}:void 0}(e,c,m),Boolean(d.current))),[d,c,m,h]),g=(0,o.useCallback)(((e,t)=>{const{current:n}=d;n&&(n.sizes=function(e,t){const{calculatedSizes:n,calculatedMinSizes:s}=e,i=rn(e,e.previousId,-1,t<0),r=rn(e,e.nextId,1,t>0);if(void 0===i||void 0===r)return e.sizes;let o=n[i],a=n[r];const l=s[i],c=s[r],u=o+a;o=Math.max(l,o+t),a=Math.max(c,u-o),o=Math.max(l,u-a);const d=Nt(e.sizes);return d[i].size=o,d[r].size=a,d}(n,t),f(n.grid,n.sizes))}),[d,f]),v=(0,o.useCallback)((()=>{const{current:e}=d;if(e){const t=on(e,m);u(t)}d.current=void 0}),[d,m,u]),y=function(e,t){const n=(0,o.useRef)(null),{onDrag:s,onDragFinish:i,onDragStart:r}=t;return(0,o.useLayoutEffect)((()=>{const{current:t}=n;if(t){let n;const o=e=>{0===e.button&&r(t)&&(n={x:e.clientX,y:e.clientY},t.classList.add("mw-divider-moving"))},a=i=>{if(n){i.preventDefault();const r={x:i.clientX-n.x,y:i.clientY-n.y};s(t,"horizontal"===e?r.x:r.y)}},l=e=>{n&&(a(e),t.classList.remove("mw-divider-moving"),n=void 0,i(t))};return t.addEventListener("mousedown",o),window.addEventListener("mouseup",l,{capture:!0}),window.addEventListener("mousemove",a,{capture:!0}),()=>{t.addEventListener("mousedown",o),window.removeEventListener("mouseup",l,{capture:!0}),window.removeEventListener("mousemove",a,{capture:!0})}}return L}),[n,e,s,i,r]),n}(h,{onDrag:g,onDragStart:p,onDragFinish:v});return(0,s.jsx)("div",{ref:y,className:l()("mw-split-container-divider",{horizontal:"horizontal"===h,vertical:"vertical"===h,disabled:i},t),style:n,"data-divider":!0,"data-previous":r,"data-next":a,children:(0,s.jsx)("div",{className:"mw-split-container-divider-content",children:" "})})};const ln="*";function cn(e){return e&&"boolean"!=typeof e?o.cloneElement(e,{size:void 0,minSize:void 0,stretch:!0}):e}var un=function(e){const{children:t,className:n,dividerSize:i=4}=e,r=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(s=Object.getOwnPropertySymbols(e);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(e,s[i])&&(n[s[i]]=e[s[i]])}return n}(e,["children","className","dividerSize"]),a=l()(n,"mw-split-container"),c=qt(e),u=(0,o.useMemo)((()=>{const e=[];let n,r,a=-1;return o.Children.forEach(t,((t,o)=>{var l;if(t){const u=null!==(l=function(e){var t;if(e&&"boolean"!=typeof e)return null!==(t=e.key)&&void 0!==t?t:void 0}(t))&&void 0!==l?l:`child-${o}`,d=function(e){var t;return e&&"boolean"!=typeof e?Object.assign(Object.assign({},null!==(t=e.props)&&void 0!==t?t:{}),Et(e,ln)):Et(e,ln)}(t),h=St(d.size),m=!h.auto;r&&m&&(a+=1,e.push((0,s.jsx)(an,{size:i,minSize:i,direction:c,previous:r.index,next:a+1},`divider-${u}`))),a+=1,m&&(r=Object.assign(Object.assign({},h),{index:a})),n=h,e.push((0,s.jsx)(Lt,Object.assign({},d,{children:cn(t)}),u))}})),e}),[t,c]),[d,h,m]=Tt(u,ln),f=(0,o.useMemo)((()=>({sizes:d,setSizes:m})),[d,m]);return(0,s.jsx)(nn.Provider,{value:f,children:(0,s.jsx)(Lt,Object.assign({className:a,grid:!0},r,{defaultChildSize:ln,gridSizes:d,children:h}))})},dn=function(e){const{className:t,style:i}=e,r=dt(),[a,c]=(0,o.useState)(),[u,d]=(0,o.useState)(!0),[h,m]=(0,o.useState)(void 0),f=(0,o.useRef)(null);(0,o.useLayoutEffect)((()=>{const{current:e}=f;e&&(d(!0),function(e){return t=this,s=void 0,r=function*(){const{MiewerTerminal:t}=yield Promise.all([n.e(216),n.e(106)]).then(n.bind(n,3504)),s=new t(e);return yield s.initialize(),s},new((i=void 0)||(i=Promise))((function(e,n){function o(e){try{l(r.next(e))}catch(e){n(e)}}function a(e){try{l(r.throw(e))}catch(e){n(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(o,a)}l((r=r.apply(t,s||[])).next())}));var t,s,i,r}(e).then((e=>{c(e),d(!1)})).catch((e=>{m(e.message),d(!1)})))}),[f,m,d,c]),(0,o.useEffect)((()=>a?()=>{a.dispose()}:L),[a]),(0,o.useEffect)((()=>(a&&a.attach(r),L)),[a,r]);const p=(0,o.useMemo)((()=>{const e=[];return h&&e.push(h),e}),[r,h]);return(0,s.jsxs)("div",{className:l()(t,"mw-miewer-terminal-container"),style:i,children:[(0,s.jsx)("div",{ref:f,className:l()("mw-full-size","mw-miewer-terminal")}),(u||p.length>0)&&(0,s.jsxs)("div",{className:l()("mw-full-size","mw-centered","mw-miewer-terminal-messages"),children:[u&&(0,s.jsx)("span",{className:l()("mw-text-faded","mw-miewer-terminal-message"),children:"Loading terminal..."}),p.map(((e,t)=>(0,s.jsx)("span",{className:l()("mw-miew-terminal-message","mw-error"),children:e},`error-${t}`)))]})]})},hn=n(7490),mn=n(6705),fn=n(8212),pn=n(6511),gn=n(5821);const vn={[pt.terminal]:{icon:hn.Z,iconOn:mn.Z,iconOff:hn.Z},[pt.representations]:{icon:fn.Z,iconOn:pn.Z,iconOff:fn.Z},[pt.sequences]:{icon:gn.Z,iconOn:gn.Z,iconOff:gn.Z}};var yn=function(e){var t;const{panel:n,className:i,style:r,displayName:a}=e,{iconOff:l,iconOn:c}=null!==(t=vn[n])&&void 0!==t?t:{},u=en(n),d=function(e){const t=Qt((e=>e.togglePanel));return(0,o.useCallback)((()=>{t(e)}),[t,e])}(n),h=u?c:l;return(0,s.jsxs)(It.ZP,{type:u?"primary":"text",className:i,style:r,onClick:d,children:[(0,s.jsx)(h,{className:"mw-panel-toggle-icon"}),a&&h?" ":null,a&&(0,s.jsx)("span",{children:"short"===a?bt[n]:yt[n]})]})},bn=n(5405),xn=n(4463),wn=n(924),jn=n(2762);function Cn(){const[e,t]=(0,o.useState)(!1),n=(0,o.useCallback)((()=>{t(!1)}),[t]),s=(0,o.useCallback)((()=>{t(!0)}),[t]);return(0,o.useMemo)((()=>({visible:e,onHide:n,onShow:s})),[e,s,n])}var Sn=n(2227),kn=n(5980),_n=function(e){const{className:t,style:n,visible:i,title:r,onClose:a,generator:l}=e,[c,u]=(0,o.useState)();return(0,o.useEffect)((()=>{i&&u(l())}),[u,i,l]),(0,s.jsx)(Sn.Z,{className:t,style:n,onCancel:a,title:r,open:i,closeIcon:!1,footer:(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(It.ZP,{onClick:a,children:"Close"})}),children:(0,s.jsx)(kn.Z.TextArea,{readOnly:!0,rows:6,value:c})})};const Nn=["click"];var On=function(e){const{className:t,style:n}=e,i=(0,o.useMemo)((()=>Object.values(pt)),[]),{panels:r,togglePanel:a}=Qt(),{themes:l,theme:c,setTheme:u}=ne(),d=function(){const e=dt(),t=function(){const e=ht(),{reps:t}=e,n=(0,o.useMemo)((()=>(null!=t?t:[]).map((e=>{var t;return null!==(t=e.name)&&void 0!==t?t:""})).join("\n")),[t]);return(0,o.useMemo)((()=>n.split("\n").map((e=>e.length?e:void 0))),[n])}();return(0,o.useCallback)((()=>e?Qe(e.getURL({settings:!1,view:!0,compact:!1}),t):""),[e,t,Qe])}(),h=function(){const e=dt();return(0,o.useCallback)((()=>{var t;return null!==(t=null==e?void 0:e.getScript({settings:!1,view:!0,compact:!1}))&&void 0!==t?t:""}),[e])}(),{visible:m,onShow:f,onHide:p}=Cn(),{visible:g,onShow:v,onHide:y}=Cn(),b=(0,o.useCallback)((e=>{const{key:t}=e;if("url"===t)return void f();if("script"===t)return void v();const n=/^panels\/(.+)$/i.exec(t);(null==n?void 0:n[1])&&a(n[1]);const s=/^theme\/(.+)$/i.exec(t);(null==s?void 0:s[1])&&u(s[1])}),[f,v,a,u]),x=(0,o.useMemo)((()=>[{key:"panels",label:"Panels",icon:(0,s.jsx)(bn.Z,{}),children:i.map((e=>{return{key:`panels/${e}`,label:(0,s.jsxs)("div",{className:"mw-header-menu-item-text",children:[(t=vn[e].icon,(0,s.jsx)(t,{className:"mw-header-menu-item-icon"})),(0,s.jsx)("span",{children:yt[e]}),r.has(e)&&(0,s.jsx)(Vt.Z,{style:{marginLeft:"auto"}})]})};var t}))},{type:"divider"},{key:"appearance",label:"Appearance",icon:(0,s.jsx)(xn.Z,{}),children:l.map((e=>({key:`theme/${e.id}`,label:(0,s.jsxs)("div",{className:"mw-header-menu-item-text",children:[(0,s.jsx)("span",{children:e.title}),c.id===e.id&&(0,s.jsx)(Vt.Z,{style:{marginLeft:"auto"}})]})})))},{type:"divider"},{key:"url",label:"Generate URL",icon:(0,s.jsx)(wn.Z,{})},{key:"script",label:"Generate script",icon:(0,s.jsx)(wn.Z,{})}]),[i,r,l,c]),w=(0,o.useMemo)((()=>({items:x,onClick:b})),[x,b]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Ft.Z,{menu:w,trigger:Nn,overlayClassName:"mw-header-menu",children:(0,s.jsx)(It.ZP,{className:t,style:n,type:"text",children:(0,s.jsx)(jn.Z,{})})}),(0,s.jsx)(_n,{title:"URL",visible:m,onClose:p,generator:d}),(0,s.jsx)(_n,{title:"Script",visible:g,onClose:y,generator:h})]})},En=n(5697);function Pn(e){return function(t){const{onBlur:n,onFocus:i}=t,r=function(){const e=dt();return(0,o.useCallback)((()=>{e&&e.enableHotKeys(!0)}),[e])}(),a=function(){const e=dt();return(0,o.useCallback)((()=>{e&&e.enableHotKeys(!1)}),[e])}(),l=(0,o.useCallback)((e=>{a(),"function"==typeof i&&i(e)}),[i,a]),c=(0,o.useCallback)((e=>{r(),"function"==typeof n&&n(e)}),[n,r]);return(0,s.jsx)(e,Object.assign({},t,{onBlur:c,onFocus:l}))}}const zn=Pn(kn.Z),Rn=Pn(En.Z);var Mn,qn,An,Bn=function(e){const{className:t,style:n}=e,[i,r]=(0,o.useState)(),a=at(),l=(0,o.useCallback)((e=>{r(e.target.value)}),[r]),c=(0,o.useCallback)((()=>{a(null!=i?i:"")}),[i,a]);return(0,s.jsx)(zn,{className:t,allowClear:!0,style:n,placeholder:"Search residues",value:i,onChange:l,onPressEnter:c})},Tn=function(e){const{panelTogglesDisplayName:t}=e;return(0,s.jsxs)("div",{className:"mw-miewer-header mw-row mw-end",children:[(0,s.jsx)(On,{}),(0,s.jsx)(Bn,{className:"mw-control mw-input-as-text"}),(0,s.jsx)(yn,{className:"mw-miewer-header-toggle",panel:pt.terminal,displayName:t}),(0,s.jsx)(yn,{className:"mw-miewer-header-toggle",panel:pt.sequences,displayName:t}),(0,s.jsx)(yn,{className:"mw-miewer-header-toggle",panel:pt.representations,displayName:t})]})},Ln=function(e){const{className:t,style:n}=e,{lastPick:i,selectedAtomsCount:r}=ot(),a=(0,o.useMemo)((()=>{if(!i)return;const e=r>0?`${r} atom${1===r?"":"s"} selected, last pick:`:"Last pick:",t=[];var n;return i.type===Se.atom&&t.push(function(e){const{residue:t}=e,n=32===e.location?"":String.fromCharCode(e.location);return`${e.element.fullName} #${e.serial}${n}:       ${tt(t)}.${e.name}`}(i.entity),(n=i.entity,`Coordinate: (${[n.position.x.toFixed(2),n.position.y.toFixed(2),n.position.z.toFixed(2)].join(", ")})`).toLowerCase()),i.type===Se.residue&&t.push(tt(i.entity)),function(e){return e.type===Se.chain}(i)&&t.push(`chain: ${i.entity.getName()}`),function(e){return e.type===Se.molecule}(i)&&t.push(`molecule: ${i.entity.name}`),e.concat(" ").concat(t.join(", "))}),[i,r]);return a?(0,s.jsx)("div",{className:l()(t,"mw-panel","content","mw-miew-selection-info"),style:n,children:a}):null};function In(e){return e*window.devicePixelRatio}function $n(e){return e/window.devicePixelRatio}function Fn(e,t){const{from:n,to:s,durationMs:i,reportLastValueOnAborted:r=!0}=e,o=e=>{"function"==typeof t&&t(e)};if(i<=0)return o(s),L;let a,l=0;const c=e=>{if(a){const t=e-a;t>=i?o(s):(o(n+t/i*(s-n)),l=requestAnimationFrame(c))}else a=e,l=requestAnimationFrame(c)};return l=requestAnimationFrame(c),()=>{r&&o(s),cancelAnimationFrame(l)}}function Zn(e){"function"==typeof e&&e()}!function(e){e.letter="letter",e.name="name"}(Mn||(Mn={})),function(e){e.scroll="scroll",e.scrollStart="scroll-start",e.scrollFinish="scroll-finish",e.selection="selection",e.selectionStart="selection-start",e.selectionFinish="selection-finish"}(qn||(qn={})),function(e){e.left="left",e.center="center",e.right="right"}(An||(An={}));const Hn=In(10),Dn=In(10),Un=In(2),Vn=In(1),Wn=In(5),Kn=In(1),Gn=In(4),Xn=In(2),Jn=In(2),Yn=Dn+Un+Vn;var Qn=class{constructor(){this.mouseMove=e=>{if(!this.pointerEventsDisabled)if(this._scrollSession){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),this.sliderHovered=!0;const t=this.getSliderPositionForMouseEvent(e)-this._scrollSession.touchPosition;this.position=this._scrollSession.sliderInitialPosition+t,this.reportPointerEvent(qn.scroll)}else this._selectionSession?(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),this.sequenceHovered=!0,this.handleSelectionEvent(e),this.reportPointerEvent(qn.selection)):this.updateHoveredStatesForEvent(e)},this.mouseDown=e=>{if(0!==e.button||this.pointerEventsDisabled)return;const t=this.mouseEventUnderBoundingBox(e,this.sliderOuterBoundingBox),n=this.mouseEventUnderBoundingBox(e,this.sliderInnerBoundingBox),s=this.mouseEventUnderBoundingBox(e,this.sequenceBoundingBox);return!n&&t?(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),void(this.center=this.getSliderPositionForMouseEvent(e))):n?(this.reportPointerEvent(qn.scrollStart),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),void(this._scrollSession={sliderInitialPosition:this.position,touchPosition:this.getSliderPositionForMouseEvent(e)})):void(s&&(this.reportPointerEvent(qn.selectionStart),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),this._selectionSession={touchPosition:this.getSequencePositionForMouseEvent(e),append:e.shiftKey&&!e.altKey,exclude:e.shiftKey&&e.altKey,initialSelection:this.selectedResidues.slice(),lastSelection:this.selectedResidues.slice()},this.handleSelectionEvent(e)))},this.mouseUp=e=>{this.pointerEventsDisabled||void 0===this._scrollSession||(this.mouseMove(e),this.reportPointerEvent(qn.scrollFinish),this.requestRender()),this.pointerEventsDisabled||void 0===this._selectionSession||(this.handleSelectionEvent(e),this.reportPointerEvent(qn.selectionFinish),this.requestRender()),this._selectionSession=void 0,this._scrollSession=void 0,this.updateHoveredStatesForEvent(e)},this._theme=void 0,this._width=1,this._height=1,this._bbox={width:1,height:1,top:0,left:0},this._position=0,this._sliderHeight=Wn,this._renderType=Mn.letter,this._useColorer=!0,this._alignment=An.left,this._renderRaf=0,this._renderRequested=!1,this._reportSelectionRequested=void 0,this._chain=void 0,this._scrollSession=void 0,this._selectionSession=void 0,this._sliderHovered=!1,this._sequenceHovered=!1,this._chainTitleSize={width:1,height:1},this._itemMaxCodeSize={width:1,height:1},this._itemMaxCodeLetterSize={width:1,height:1},this._selectedResidues=[],this._selectedResiduesIndices=new Set,this._positionAnimationAbort=void 0,this._sliderHeightAnimationAbort=void 0,this._pointerEventsDisabled=!1,this._pointerEventCallback=void 0,this.initializeRenderLoop()}get chain(){return this._chain}set chain(e){this._chain!==e&&(this._chain=e,this.resetPosition(!0),this.calculateTextSizes(),this.requestRender())}get renderType(){return this._renderType}set renderType(e){this._renderType!==e&&(this._renderType=e,this.resetPosition(),this.requestRender())}get useColorer(){return this._useColorer}set useColorer(e){this._useColorer!==e&&(this._useColorer=e,this.requestRender())}get alignment(){return this._alignment}set alignment(e){this._alignment!==e&&(this._alignment=e,this.resetPosition(),this.requestRender())}get theme(){return this._theme}set theme(e){this._theme!==e&&(this._theme=e,this.requestRender())}get selectedResidues(){return this._selectedResidues}set selectedResidues(e){this._selectedResidues!==e&&(this._selectedResidues=e,this._selectedResiduesIndices=new Set(e.map((e=>e._index))),this.requestRender())}get selectionCallback(){return this._selectionCallback}set selectionCallback(e){this._selectionCallback!==e&&(this._selectionCallback=e)}get pointerEventCallback(){return this._pointerEventCallback}set pointerEventCallback(e){this._pointerEventCallback!==e&&(this._pointerEventCallback=e)}get pointerEventsDisabled(){return this._pointerEventsDisabled}set pointerEventsDisabled(e){this._pointerEventsDisabled!==e&&(this._pointerEventsDisabled=e,this.requestRender())}get sequenceTitle(){const{chain:e}=this;return e?`Chain ${e.chain.getName()}:`:""}get chainItemsStartPx(){return this._chainTitleSize.width+Jn}get itemSize(){switch(this.renderType){case Mn.name:return this._itemMaxCodeSize;case Mn.letter:default:return this._itemMaxCodeLetterSize}}get itemsCount(){var e,t;return null!==(t=null===(e=this.chain)||void 0===e?void 0:e.sequence.length)&&void 0!==t?t:0}get visibleItemsCount(){return 0===this.itemSize.width?0:this._width/this.itemSize.width}get position(){return this._position}set position(e){const t=this.correctPosition(e);this._position!==t&&(this._position=t,this.stopPositionAnimation(),this.requestRender())}get center(){return this.position+this.visibleItemsCount/2}set center(e){this.setPosition(e-this.visibleItemsCount/2,!0)}get sliderVisible(){return this.visibleItemsCount<this.itemsCount}get sliderHovered(){return this._sliderHovered&&!this.pointerEventsDisabled}set sliderHovered(e){this._sliderHovered!==e&&(this._sliderHovered=e,this.stopSliderHeightAnimation(),this._sliderHeightAnimationAbort=Fn({from:this._sliderHeight,to:e?Dn:Wn,durationMs:50},(e=>{this._sliderHeight=e,this.requestRender()})),this.requestRender())}get sequenceHovered(){return this._sequenceHovered&&!this.pointerEventsDisabled}set sequenceHovered(e){this._sequenceHovered!==e&&(this._sequenceHovered=e,this.requestRender())}get sliderRatio(){const{chain:e}=this;return e&&0!==e.sequence.length&&this.sliderVisible?this._width/e.sequence.length:0}get sliderWidth(){const{chain:e,sliderRatio:t,itemsCount:n,visibleItemsCount:s}=this;return e&&0!==t&&this.sliderVisible&&0!==n?Math.max(Math.min(n,s)*t,2*this.sliderHeight):0}get sliderHeight(){const{chain:e}=this;return e&&0!==e.sequence.length&&this.sliderVisible?this._sliderHeight:0}get sliderCenter(){const{sliderVisible:e,sliderRatio:t}=this;return e&&0!==t?t*this.center:0}get sliderVerticalPosition(){return Math.floor(Xn+this.itemSize.height+Gn+Dn/2)}get sliderRange(){const{sliderWidth:e,sliderVisible:t,sliderCenter:n}=this;return t?[n-e/2,n+e/2]:[0,0]}get sequenceBoundingBox(){return{top:this._bbox.top,left:this._bbox.left,width:this._bbox.width,height:$n(Xn+this.itemSize.height+(this.sliderVisible?Gn:Xn))}}get sliderOuterBoundingBox(){return{top:this._bbox.top+$n(this.sliderVerticalPosition-Dn/2),left:this._bbox.left,width:this._bbox.width,height:$n(Yn)}}get sliderInnerBoundingBox(){const[e,t]=this.sliderRange,{top:n,height:s}=this.sliderOuterBoundingBox;return{top:n,left:this._bbox.left+$n(e),width:$n(t-e),height:s}}setCanvases(e){this._canvas!==e&&(this.detachListeners(),this.stopAnimations(),this._canvas=e,this._canvas&&(this._canvas.style.height=`${In(1)}px`),this.attachListeners(),this.calculateTextSizes(),this.requestRender())}destroy(){cancelAnimationFrame(this._renderRaf),this.stopAnimations(),this.detachListeners(),this._canvas=void 0}correctPosition(e){const{visibleItemsCount:t,itemsCount:n}=this;if(t>=n)switch(this.alignment){case An.center:return(n-t)/2;case An.right:return n-t;case An.left:default:return 0}const s=n-t,i=Math.max(0,(t-n)/2);return Math.max(i,Math.min(s,e))}setPosition(e,t){const n=this.correctPosition(e);t?(this.stopPositionAnimation(),this._positionAnimationAbort=Fn({from:this.position,to:n,durationMs:100},(e=>{this._position=this.correctPosition(e),this.requestRender()}))):this.position=n}resetPosition(e=!1){this.setPosition(e?0:this.position,!0),this.requestRender()}initializeRenderLoop(){let e,t;const n=()=>{const s=Math.ceil($n(this.itemSize.height+2*Xn+(this.sliderVisible?Yn+Gn:0)));this._canvas&&s!==this._canvas.clientHeight&&(this._canvas.style.height=`${s}px`),this._canvas&&(this._bbox=this._canvas.getBoundingClientRect()),!this._canvas||e===this._canvas.clientWidth&&t===this._canvas.clientHeight||(e=this._canvas.clientWidth,t=this._canvas.clientHeight,this._width=Math.max(1,In(e)),this._height=Math.max(1,In(t)),this._canvas.width=this._width,this._canvas.height=this._height,this.resetPosition(),this.requestRender()),this._renderRequested&&(this._renderRequested=!1,this.render()),this._reportSelectionRequested&&(this.reportSelectionChanged(this._reportSelectionRequested),this._reportSelectionRequested=void 0),this._renderRaf=requestAnimationFrame(n)};n()}applyTheme(e){var t;const{fontFamily:n,fontSize:s}=null!==(t=this._theme)&&void 0!==t?t:{background:0,foreground:16448250,fontSize:11,fontFamily:"verdana, sans-serif"};e.font=`${In(s)}px ${n}`}residueIsSelected(e){return this._selectedResiduesIndices.has(e._index)}getSequencePositionForMouseEvent(e){const{clientX:t}=e,{left:n}=this._bbox,s=In(t-n)-this.chainItemsStartPx;return 0===this.itemSize.width?0:this.position+s/this.itemSize.width}getSliderPositionForMouseEvent(e){const{sliderRatio:t}=this;if(0===t)return 0;const{clientX:n}=e,{left:s}=this._bbox;return In(n-s)/t}attachListeners(){this.detachListeners(),this._canvas&&(this._canvas.addEventListener("mousedown",this.mouseDown),window.addEventListener("mouseup",this.mouseUp,{capture:!0}),window.addEventListener("mousemove",this.mouseMove,{capture:!0}))}detachListeners(){this._canvas&&(this._canvas.removeEventListener("mousedown",this.mouseDown),window.removeEventListener("mouseup",this.mouseUp,{capture:!0}),window.removeEventListener("mousemove",this.mouseMove,{capture:!0}))}getItemsWithinRange(e,t){const{chain:n}=this;if(n){const s=e=>Math.max(0,Math.min(n.sequence.length+1,e)),i=s(Math.floor(Math.min(e,t))),r=s(Math.ceil(Math.max(e,t)));return n.sequence.slice(i,r+(i===r?1:0)).map((e=>e.residue))}return[]}reportPointerEvent(e){const{chain:t}=this;t&&!this.pointerEventsDisabled&&"function"==typeof this._pointerEventCallback&&this._pointerEventCallback(t.chain,e)}reportSelectionChanged(e){"function"==typeof this._selectionCallback&&this._selectionCallback(e)}stopAnimations(){this.stopPositionAnimation(),this.stopSliderHeightAnimation()}stopPositionAnimation(){Zn(this._positionAnimationAbort),this._positionAnimationAbort=void 0}stopSliderHeightAnimation(){Zn(this._sliderHeightAnimationAbort),this._sliderHeightAnimationAbort=void 0}mouseEventUnderBoundingBox(e,t){const{clientX:n,clientY:s}=e;return t.left<=n&&t.left+t.width>=n&&t.top<=s&&t.top+t.height>s}handleSelectionEvent(e){const t=this._selectionSession;if(t){const n=this.getItemsWithinRange(t.touchPosition,this.getSequencePositionForMouseEvent(e));let s=[...t.initialSelection];t.append||t.exclude||(s=[]),n.forEach((e=>{t.exclude&&s.find((t=>t._index===e._index))?s=s.filter((t=>t._index!==e._index)):s.push(e)})),$([...new Set(t.lastSelection.map((e=>e._index)))].sort(((e,t)=>e-t)),[...new Set(s.map((e=>e._index)))].sort(((e,t)=>e-t)))||(this._reportSelectionRequested=s),t.lastSelection=n}}updateHoveredStatesForEvent(e){this.sliderHovered=e.target===this._canvas&&this.mouseEventUnderBoundingBox(e,this.sliderOuterBoundingBox),this.sequenceHovered=e.target===this._canvas&&this.mouseEventUnderBoundingBox(e,this.sequenceBoundingBox)}calculateTextSizes(){const{chain:e}=this;if(this._canvas&&e){const t=this._canvas.getContext("2d");if(t){t.save(),t.textBaseline="alphabetic",this.applyTheme(t);const n=e=>{const{width:n,fontBoundingBoxAscent:s}=t.measureText(e);return{width:Math.ceil(n),height:s}};this._chainTitleSize=n(this.sequenceTitle),this._itemMaxCodeSize={width:0,height:0},this._itemMaxCodeLetterSize={width:0,height:0},e.sequence.forEach((e=>{const t=n(e.letterCode),s=n(e.code);this._itemMaxCodeSize.width=Math.max(this._itemMaxCodeSize.width,s.width),this._itemMaxCodeSize.height=Math.max(this._itemMaxCodeSize.height,s.height),this._itemMaxCodeLetterSize.width=Math.max(this._itemMaxCodeLetterSize.width,t.width),this._itemMaxCodeLetterSize.height=Math.max(this._itemMaxCodeLetterSize.height,t.height)})),this._itemMaxCodeSize.width+=Jn,this._itemMaxCodeLetterSize.width+=Jn,t.restore()}this.resetPosition(),this.requestRender()}}requestRender(){this._renderRequested=!0}getItemText(e){switch(this.renderType){case Mn.letter:return e.letterCode;case Mn.name:default:return e.code}}getSequenceItemPositionByIndex(e){if(e>=0){const{width:t=0}=this.itemSize;return this.chainItemsStartPx+t*(e+.5-this.position)}return this.chainItemsStartPx}renderSlider(e){const{chain:t,sliderWidth:n,sliderHeight:s,sliderRange:i,sliderRatio:r,sliderVerticalPosition:o,theme:a}=this,{foreground:l,foregroundFaded:c,selectionBackground:u}=null!=a?a:{foreground:16448250,foregroundFaded:7829367,selectionBackground:15174916};if(t&&t.sequence.length>0&&this.sliderVisible&&n>0){const n=r,a=o,d=Math.ceil(a+Dn/2+Un);let[h,m]=i;h+=s/2,m-=s/2,e.save(),e.beginPath(),e.moveTo(h,a),e.arc(h,a,s/2,Math.PI/2,-Math.PI/2,!1),e.moveTo(m,a),e.arc(m,a,s/2,-Math.PI/2,Math.PI/2,!1),e.moveTo(0,a),e.rect(0,Math.floor(a-Kn/2),this._width,Kn),e.moveTo(h,a),e.rect(h,Math.floor(a-s/2),m-h,s),e.moveTo(0,a),e.rect(0,d-Vn,this._width,2*Vn),e.clip(),t.sequence.forEach(((t,i)=>{const r=this.useColorer&&t.colorer?v(t.colorer.getResidueColor(t.residue,t.complex)):v(this.useColorer?c:l);e.save(),e.fillStyle=r,e.beginPath(),n>Hn?e.rect(i*n,Math.floor(a-s/2),n-2,s):e.rect(i*n,Math.floor(a-s/2),n,s),e.closePath(),e.fill(),e.restore(),this.residueIsSelected(t.residue)&&(e.save(),e.beginPath(),e.lineWidth=Vn,e.moveTo(i*n,d-Vn/2),e.lineTo((i+1)*n,d-Vn/2),e.closePath(),e.strokeStyle=v(u),e.stroke(),e.restore())})),e.restore()}}render(){const e=this._canvas;if(!e)return;const t=e.getContext("2d");if(!t)return;this.sliderVisible&&this.sliderHovered||this.sequenceHovered?e.style.cursor="pointer":e.style.cursor="default",t.clearRect(0,0,this._width,this._height),this.applyTheme(t);const{chain:n,position:s,visibleItemsCount:i,itemSize:r,theme:o}=this,{foreground:a,foregroundFaded:l,selectionBackground:c}=null!=o?o:{foreground:16448250,foregroundFaded:7829367,selectionBackground:15174916};if(n&&n.sequence.length>0){t.textBaseline="alphabetic",t.textAlign="center",t.save();const e=r.width,o=Xn+r.height-In(1),u=Math.floor(Math.min(Xn-In(1),Gn-In(1),In(2)));t.save(),t.textAlign="left",t.fillStyle=v(a),t.fillText(this.sequenceTitle,0,o),t.restore(),t.beginPath(),t.rect(this.chainItemsStartPx,0,this._width-this.chainItemsStartPx,this._height),t.clip(),n.sequence.forEach(((n,d)=>{const h=d>=s-1&&d<=s+i,m=this.useColorer&&n.colorer?v(n.colorer.getResidueColor(n.residue,n.complex)):v(this.useColorer?l:a);if(h){const s=this.getSequenceItemPositionByIndex(d);this._theme&&this.residueIsSelected(n.residue)&&(t.save(),t.fillStyle=v(c,.25),t.beginPath(),t.rect(s-e/2,Xn-u,e,r.height+2*u),t.closePath(),t.fill(),t.strokeStyle=v(c),t.beginPath(),t.lineWidth=Vn,t.moveTo(s-e/2,Xn-u+Vn/2),t.lineTo(s+e/2,Xn-u+Vn/2),t.moveTo(s-e/2,Xn+r.height+u+Vn/2),t.lineTo(s+e/2,Xn+r.height+u+Vn/2),t.closePath(),t.stroke(),t.restore()),t.fillStyle=m,t.fillText(this.getItemText(n),s,o)}})),t.restore(),this.renderSlider(t)}}};function es(e,t,n){(0,o.useEffect)((()=>{e&&(e[t]=n)}),[e,t,n])}var ts=function(e){const{className:t,style:n,chain:i,type:r=Mn.letter,alignment:a=An.left,pointerEventsDisabled:c=!1,onEvent:u,useColorer:d=!0}=e,[h,m]=function(){const[e,t]=(0,o.useState)(void 0);(0,o.useEffect)((()=>{const e=new Qn;return t(e),()=>{e.destroy()}}),[]);const n=(0,o.useRef)(null);return(0,o.useLayoutEffect)((()=>{const{current:t}=n;return t&&e&&e.setCanvases(t),L}),[e,n,t]),[e,n]}(),f=it().getChain(i),{selectedResidues:p,setSelectedResidues:g}=ot(),v=se();return es(h,"chain",f),es(h,"theme",v),es(h,"renderType",r),es(h,"useColorer",d),es(h,"alignment",a),es(h,"selectedResidues",p),es(h,"selectionCallback",g),es(h,"pointerEventsDisabled",c),es(h,"pointerEventCallback",u),(0,s.jsx)("canvas",{ref:m,className:l()(t,"mw-chain-sequence-canvas"),style:n})},ns=function(e){const{className:t,style:n}=e,i=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(s=Object.getOwnPropertySymbols(e);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(e,s[i])&&(n[s[i]]=e[s[i]])}return n}(e,["className","style"]),{chain:r}=i;return it().getChain(r)?(0,s.jsx)("div",{className:l()("chain-sequence",t),style:n,children:(0,s.jsx)(ts,Object.assign({},i))}):null};const{read:ss,save:is}=K("miewer-chain-sequences-config",{renderType:Mn.letter,useColorer:!0}),rs=ss(),os=(0,c.Ue)(((e,t)=>({renderType:rs.renderType,useColorer:rs.useColorer,setRenderType(e){t().setConfig({renderType:e})},setUseColorer(e){t().setConfig({useColorer:e})},setConfig(n){e((()=>n)),is(Object.assign({renderType:t().renderType,useColorer:t().useColorer},n))}})));var as=function(e){const{className:t,chainClassName:n,style:i,chainStyle:r}=e,{chainNames:a}=it(),{renderType:c,useColorer:u}=os(),[d,h]=(0,o.useState)(void 0),m=(0,o.useCallback)(((e,t)=>{switch(t){case qn.scrollFinish:case qn.selectionFinish:d&&h(void 0);break;default:d!==e.getName()&&h(e.getName())}}),[d,h]);return(0,s.jsx)("div",{className:l()("chain-sequences",t),style:i,children:a.map((e=>(0,s.jsx)(ns,{chain:e,className:l()(n,"mw-row","chain-sequence-block"),style:r,onEvent:m,type:c,useColorer:u,pointerEventsDisabled:void 0!==d&&d!==e},e)))})},ls=n(4616),cs=n(8145),us=function(e){const t=function(){const{getSelector:e,getSelectedResidues:t,setSelectedResidues:n}=ot(),s=t().length>0,{setUseColorer:i,setRenderType:r,renderType:a,useColorer:l}=os(),c=mt(),u=(0,o.useCallback)((()=>{n([])}),[n]),d=(0,o.useCallback)((()=>{const t=e();t&&(c({selector:t,name:"Layer from selection",mode:fe.cartoon,colorer:[oe.uniform,{color:16711680}]}),u())}),[e,c,u]);return(0,o.useMemo)((()=>{const e=[];return e.push({key:"config",title:"Appearance",icon:ls.Z,actions:[{key:"display-type-letter",title:"Residue letter code",checked:a===Mn.letter,onAction(){r(Mn.letter)}},{key:"display-type-name",title:"Residue code",checked:a===Mn.name,onAction(){r(Mn.name)}},{type:"divider"},{key:"use-colorer",title:"Use layer color",checked:l,onAction(){i(!l)}}]}),e.push({key:"selection",title:"Selection",icon:cs.Z,disabled:!s,actions:[{key:"add-layer-from-selection",title:"Add layer from selection",onAction:d,disabled:!s},{type:"divider"},{key:"clear-selection",title:"Clear",onAction:u,disabled:!s}]}),e}),[s,d,u,l,a,r,i])}();return(0,s.jsx)(tn,Object.assign({},e,{panel:"sequences",actions:t,children:(0,s.jsx)(as,{})}))},ds=n(3171),hs=n(9810),ms=n(5460);const fs="__configure__";var ps=function(e){const{className:t,style:n,disabled:i,value:r,titles:a,items:l,manifests:c,onChange:u,onConfigure:d,displayFullName:h,type:m="select"}=e,f=(0,o.useCallback)((e=>Oe(e).toString()),[]),p=(0,o.useCallback)((e=>{if(e===fs)return void("function"==typeof d&&d());const t=(e=>l.find((t=>f(t)===e)))(e);t&&u(function(e,t){const n=Ee(t[e]);return n?[e,n]:e}(t,c))}),[u,d,l,c,f]),g=(0,o.useCallback)((e=>{p(e.key)}),[p]),v=(0,o.useMemo)((()=>{const e=l.map((e=>({key:f(e),value:e,title:a[e],label:(0,s.jsxs)("span",{className:"mw-property-selector-item-text",children:[a[e],r&&f(e)===f(r)&&(0,s.jsx)(Vt.Z,{style:{marginLeft:5}})]})})));return"function"==typeof d&&(e.push({type:"divider"}),e.push({key:fs,title:"Configure",value:fs,label:(0,s.jsx)("span",{children:"Configure"})})),e}),[f,l,r,d]),y=(0,o.useMemo)((()=>({items:v,onClick:g,selectedKeys:r?[f(r)]:[]})),[g,f,v,r]),b=(0,o.useMemo)((()=>r?Oe(r):void 0),[r,Oe]),x=(0,o.useMemo)((()=>{var e;return b?null!==(e=h?a[b]:void 0)&&void 0!==e?e:b:null}),[h,b]);return"button"===m?(0,s.jsx)(Ft.Z,{disabled:i,menu:y,trigger:["click"],overlayClassName:"mw-property-selector-container",children:(0,s.jsx)(It.ZP,{className:t,style:n,type:"text",children:x})}):"select"===m?(0,s.jsx)(hs.Z,{className:t,style:n,disabled:i,onChange:p,value:b,popupClassName:"mw-property-selector-container",popupMatchSelectWidth:!1,children:v.map((e=>{return"type"in(t=e)&&"divider"===t.type?(0,s.jsx)(ms.Z,{},"divider"):(0,s.jsx)(hs.Z.Option,{title:e.title,value:e.value,children:e.title},e.key);var t}))}):null},gs=function(e){return(0,s.jsx)(ps,Object.assign({},e,{items:ve,titles:pe,manifests:ge}))},vs=function(e){return(0,s.jsx)(ps,Object.assign({},e,{items:me,titles:de,manifests:he}))},ys=function(e){return(0,s.jsx)(ps,Object.assign({},e,{items:we,titles:be,manifests:xe}))},bs=n(6666),xs=function(e){const{className:t,style:n,disabled:i,color:r,onChange:a,visible:c=!0,type:u="text",opened:d,onOpenedChanged:h,size:m=20,showValue:f}=e,p=!r||r<0,b=(0,o.useMemo)((()=>v(r&&r>=0?r:0)),[r]),x=(0,o.useCallback)((e=>{if("function"==typeof a){const t=e.toHexString(),n=y(t);0===function(e){return/^#[0-9a-f]{8}$/i.test(e)?g(e[2*3+1].concat(e[8])):255}(t)?a(-1):a(n)}}),[a]),w=(0,o.useMemo)((()=>({fill:p?"transparent":b,width:m,height:m})),[p,b,m]);return c?(0,s.jsxs)(s.Fragment,{children:[f&&(0,s.jsx)("span",{className:"mw-color-picker-display-value",children:r&&r>=0?v(r):"not set"}),(0,s.jsx)(bs.Z,{disabled:i,value:b,onChangeComplete:x,open:d,disabledAlpha:!0,onOpenChange:h,children:(0,s.jsx)(It.ZP,{type:u,disabled:i,className:l()(t,"mw-color-picker"),style:n,children:(0,s.jsx)("svg",{viewBox:"0 0 20 20",style:w,children:(0,s.jsx)("circle",{cx:"10",cy:"10",r:"8",strokeWidth:"1"})})})})]}):null},ws=function(e){const{className:t,style:n,value:i,onChange:r,manifests:a,disabled:l}=e,c=(0,o.useMemo)((()=>i?Pe(i,a):void 0),[i,a]),u=(0,o.useMemo)((()=>i?function(e,t){return ze(e,t).filter((e=>{return(t=e)&&t.kind===re.color;var t}))}(i,a):[]),[i,a]).find((e=>e.main)),d=(0,o.useMemo)((()=>{var e;if(u&&i){const t=null!==(e=Re(i,u))&&void 0!==e?e:u.default;if(void 0!==t&&t>=0)return t}}),[u,i]),h=(0,o.useCallback)((e=>{i&&u&&c&&"function"==typeof r&&r(Me(i,c,u,e))}),[r,i,u,c]);return u?(0,s.jsx)(xs,{disabled:l,className:t,style:n,color:d,onChange:h}):null};function js(e,t,n){const s=function(e,t,n){return(0,o.useCallback)((s=>{n(t,Object.assign(Object.assign({},e),s))}),[n,t,e])}(e,t,n),i=(0,o.useCallback)((e=>{s({name:e})}),[s]),r=(0,o.useCallback)((e=>{s({name:e.target.value})}),[s]),a=(0,o.useCallback)((e=>{s({selector:e})}),[s]),l=(0,o.useCallback)((e=>{s({selector:e.target.value})}),[s]),c=(0,o.useCallback)((e=>{s({mode:e})}),[s]),u=(0,o.useCallback)((e=>{s({colorer:e})}),[s]),d=(0,o.useCallback)((e=>{s({material:e})}),[s]);return(0,o.useMemo)((()=>({changeName:i,changeNameEvent:r,changeSelector:a,changeSelectorEvent:l,changeMaterial:d,changeMode:c,changeColorer:u})),[i,r,a,l,d,c,u])}var Cs=n(4634),Ss=function(e){const{className:t,style:n,option:i,property:r,propertyManifest:a,disabled:c,onChange:u}=e,d=null!=c?c:!u,h=(0,o.useMemo)((()=>{var e;if(r&&i)return null!==(e=Re(r,i))&&void 0!==e?e:i.default}),[r,i]),{kind:m}=i,f=(0,o.useCallback)((e=>{r&&u&&u(Me(r,a,i,e))}),[i,r,a,u]),p=(0,o.useCallback)((e=>{f(e.target.value)}),[f]),g=(0,o.useCallback)((e=>{Number.isNaN(Number(e))||f(Number(e))}),[f]),v=(0,o.useCallback)((e=>{f(e.target.checked)}),[f]),y=(0,o.useMemo)((()=>{var e,t;return null!==(t=null===(e=null==i?void 0:i.default)||void 0===e?void 0:e.toString())&&void 0!==t?t:void 0}),[i]),b=(0,o.useMemo)((()=>{var e,t;return(null!==(t=null!==(e=null==i?void 0:i.title)&&void 0!==e?e:null==i?void 0:i.name)&&void 0!==t?t:"").toString()}),[i]);return(0,s.jsxs)("div",{className:l()(t,"mw-row","mw-property-option"),style:n,children:[(0,s.jsx)("span",{className:"mw-property-option-name",children:b}),m===re.color&&(0,s.jsx)(xs,{disabled:d,showValue:!0,color:h,onChange:f}),m===re.string&&(0,s.jsx)(zn,{disabled:d,className:"mw-control",value:h,onChange:p,placeholder:y}),m===re.number&&(0,s.jsx)(Rn,{disabled:d,className:"mw-control",value:h,onChange:g,placeholder:y}),m===re.boolean&&(0,s.jsx)(Cs.Z,{disabled:d,checked:h,onChange:v})]})},ks=function(e){const{className:t,optionClassName:n,style:i,optionStyle:r,property:a,disabled:c,manifests:u,onChange:d}=e,h=(0,o.useMemo)((()=>a?Pe(a,u):void 0),[a,u]),m=(0,o.useMemo)((()=>a?ze(a,u):[]),[a,u]);return 0!==m.length&&h?(0,s.jsx)("div",{className:l()(t,"mw-property-options"),style:i,children:m.map((e=>(0,s.jsx)(Ss,{className:n,style:r,option:e,propertyManifest:h,property:a,disabled:c,onChange:d},e.name.toString())))}):null},_s=function(e){return(0,s.jsx)(ks,Object.assign({},e,{manifests:ge}))},Ns=function(e){return(0,s.jsx)(ks,Object.assign({},e,{manifests:he}))},Os=function(e){return(0,s.jsx)(ks,Object.assign({},e,{manifests:xe}))},Es=function(e){const{className:t,style:n,disabled:i,representation:r,repIndex:a,onRemove:c,onEdit:u}=e,d=l()("mw-row","mw-representation-row"),h=l()("mw-representation-row","mw-representation-row-details"),{colorer:m,material:f,mode:p,name:g,selector:v}=r,y=null!=i?i:!u,{changeColorer:b,changeMaterial:x,changeMode:w,changeNameEvent:j,changeSelectorEvent:C}=js(r,a,null!=u?u:L),S=(0,o.useCallback)((()=>{"function"==typeof c&&c(a)}),[c,a]);return(0,s.jsxs)("div",{className:l()(t,"mw-representation-form"),style:n,children:[(0,s.jsxs)("div",{className:d,children:[(0,s.jsx)("span",{className:"mw-representation-property",children:"Name:"}),(0,s.jsx)(zn,{disabled:y,className:"mw-control",value:g,onChange:j,placeholder:"Representation alias"})]}),(0,s.jsxs)("div",{className:d,children:[(0,s.jsx)("span",{className:"mw-representation-property",children:"Selector:"}),(0,s.jsx)(zn,{disabled:y,className:"mw-control",value:v,onChange:C,placeholder:"Representation selector"})]}),(0,s.jsxs)("div",{className:d,children:[(0,s.jsx)("span",{className:"mw-representation-property",children:"Mode:"}),(0,s.jsx)(gs,{disabled:y,className:"mw-control",value:p,onChange:w,type:"select"})]}),(0,s.jsx)(_s,{className:h,property:p,onChange:w}),(0,s.jsxs)("div",{className:d,children:[(0,s.jsx)("span",{className:"mw-representation-property",children:"Colorer:"}),(0,s.jsx)(vs,{disabled:y,className:"mw-control",value:m,onChange:b,type:"select"})]}),(0,s.jsx)(Ns,{className:h,property:m,onChange:b}),(0,s.jsxs)("div",{className:d,children:[(0,s.jsx)("span",{className:"mw-representation-property",children:"Material:"}),(0,s.jsx)(ys,{disabled:y,className:"mw-control",value:f,onChange:x,type:"select"})]}),(0,s.jsx)(Os,{className:h,property:f,onChange:x}),c&&(0,s.jsx)("div",{className:"mw-row mw-end",children:(0,s.jsx)(It.ZP,{type:"primary",danger:!0,onClick:S,children:"Remove"})})]})},Ps=function(e){const{className:t,style:n,disabled:i,representation:r,repIndex:a,onRemove:l,onEdit:c,visible:u,onClose:d}=e,[h,m]=(0,o.useState)(r);(0,o.useEffect)((()=>{m(r)}),[r,m,u]);const f=(0,o.useCallback)(((e,t)=>{m(t)}),[m]),p=(0,o.useMemo)((()=>Be(h,r)),[h,r,Be]),g=(0,o.useCallback)((()=>{"function"==typeof c&&c(a,h)}),[c,a,h]),v=(0,o.useCallback)((()=>{"function"==typeof l&&l(a)}),[l,a]);return(0,s.jsx)(Sn.Z,{className:t,style:n,open:u,onCancel:d,closeIcon:!1,footer:(0,s.jsxs)("div",{className:"mw-row mw-space-between",children:[(0,s.jsx)("div",{children:l&&(0,s.jsx)(It.ZP,{disabled:i,danger:!0,type:"primary",onClick:v,children:"Remove"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)(It.ZP,{onClick:d,children:"Cancel"}),(0,s.jsx)(It.ZP,{disabled:null!=i?i:p,type:"primary",onClick:g,children:"Save"})]})]}),title:!1,children:(0,s.jsx)(Es,{repIndex:a,representation:h,onEdit:f,disabled:i})})},zs=function(e){const{className:t,style:n,disabled:i,repIndex:r,representation:a,onRemove:c,onEdit:u,displayColorer:d,displayMode:h,displayMaterial:m}=e,f=null!=i?i:!u,{changeColorer:p,changeMaterial:g,changeMode:v,changeNameEvent:y,changeSelector:b}=js(a,r,null!=u?u:L),{name:x,selector:w,colorer:j,mode:C,material:S}=a,[k,_]=(0,o.useState)(w);(0,o.useEffect)((()=>{_(w)}),[w,_]);const N=(0,o.useCallback)((e=>{_(e.target.value)}),[_]),O=(0,o.useCallback)((()=>{b(null!=k?k:"")}),[b,k]),E=(0,o.useCallback)((()=>{"function"==typeof c&&c(r)}),[r,c]),[P,z]=(0,o.useState)(!1),R=(0,o.useCallback)((()=>{z(!0)}),[z]),M=(0,o.useCallback)((()=>{z(!1)}),[z]),q=(0,o.useCallback)(((e,t)=>{"function"==typeof u&&u(e,t),M()}),[u,M]),A=w?`Alias for "${w}"`:"Alias";return(0,s.jsxs)("div",{className:l()(t,"mw-representation-control"),style:n,children:[(0,s.jsxs)("div",{className:"mw-row",children:[(0,s.jsx)(zn,{disabled:f,className:"mw-control mw-input-as-text",value:x,onChange:y,placeholder:A}),(0,s.jsxs)("div",{className:"mw-actions",children:[d&&(0,s.jsx)(ws,{value:j,disabled:f,onChange:p,className:l()("mw-representation-selector","mw-representation-action"),manifests:he}),h&&(0,s.jsx)(gs,{disabled:f,value:C,onChange:v,className:l()("mw-representation-selector","mw-representation-action"),type:"button"}),d&&(0,s.jsx)(vs,{disabled:f,value:j,onChange:p,className:l()("mw-representation-selector","mw-representation-action"),type:"button"}),m&&(0,s.jsx)(ys,{disabled:f,value:S,onChange:g,className:l()("mw-representation-selector","mw-representation-action"),type:"button"}),!f&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(It.ZP,{type:"text",className:"mw-representation-action",onClick:R,children:(0,s.jsx)(ls.Z,{})}),c&&(0,s.jsx)(It.ZP,{danger:!0,type:"text",className:"mw-representation-action",onClick:E,children:(0,s.jsx)(ds.Z,{})})]})]})]}),(0,s.jsxs)("div",{className:"mw-row",children:[(0,s.jsx)("div",{className:"mw-with-input-padding",children:"Selector:"}),(0,s.jsx)(zn,{disabled:f,className:"mw-control mw-input-as-text",value:k,onChange:N,onBlur:O,onPressEnter:O,placeholder:"Selector"})]}),(0,s.jsx)(Ps,{repIndex:r,representation:a,onRemove:c,onEdit:u?q:void 0,visible:P,onClose:M})]})},Rs=function(e){const{className:t,style:n}=e,i=ut((e=>e.changeRepresentation)),r=ut((e=>e.removeRepresentation)),a=function(){const{reps:e}=ht();return(0,o.useMemo)((()=>null!=e?e:[]),[e])}();return(0,s.jsx)("div",{className:l()(t,"mw-representations","mw-list"),style:n,children:a.map(((e,t)=>(0,s.jsx)(zs,{className:"mw-list-item",repIndex:t,representation:e,onRemove:r,onEdit:i,displayColorer:!0,displayMode:!0},`rep-${t}`)))})},Ms=function(e){const t=function(){const e=mt();return(0,o.useMemo)((()=>[{key:"create-representation",onAction:e,title:"Add layer"}]),[e])}();return(0,s.jsx)(tn,Object.assign({},e,{panel:"representations",actions:t,children:(0,s.jsx)(Rs,{className:"mw-full-size"})}))};const qs={};console.log("[Miewer] version:","0.0.1");const As=function(e,t){const{tag:n,parent:s,classNames:i}=function(e){const{tag:t="div",parent:n=document.body,classNames:s=[]}=null!=e?e:qs;return{tag:t,parent:n,classNames:s}}({classNames:["miewer"]});let r=document.getElementById("miewer");r||(r=document.createElement(n),s.appendChild(r));for(const e of i)r.classList.add(e);return r}();(0,i.s)(As,{identifierPrefix:"miewer"}).render((0,s.jsx)((function(){!function(){const e=ne((e=>e.theme)),t=ne((e=>e.updateThemeConfig)),n=ne((e=>e.themeConfig.id));(0,o.useEffect)((()=>(document.body.classList.add(n),()=>{document.body.classList.remove(n)})),[n]),(0,o.useEffect)((()=>{if(m(e)){const e=()=>{t()};if(window.matchMedia){const t=window.matchMedia("(prefers-color-scheme: dark)");if(t&&"function"==typeof t.addEventListener)return t.addEventListener("change",e),()=>{t.removeEventListener("changed",e)};if(t&&"function"==typeof t.addListener)return t.addListener(e),()=>{t.removeListener(e)}}}return L}),[e,t])}();const e=en(pt.terminal),t=en(pt.representations),n=en(pt.sequences),i=it().chainNames.length>0,a=function(){const e=se();return(0,o.useMemo)((()=>({algorithm:e.dark?[d.Z.darkAlgorithm]:[d.Z.defaultAlgorithm],token:{borderRadiusOuter:0,borderRadius:0,colorBgBase:v(e.baseBackground),colorTextBase:v(e.foreground),colorError:v(e.error),fontFamily:e.fontFamily,fontSize:e.fontSize},components:{Dropdown:{algorithm:e.dark?[ie]:[d.Z.defaultAlgorithm]},Select:{algorithm:e.dark?[ie]:[d.Z.defaultAlgorithm]}}})),[e,d.Z])}();return(0,s.jsxs)(r.ZP,{componentSize:"small",theme:a,children:[(0,s.jsx)(vt,{className:"mw-miew"}),(0,s.jsxs)(Lt,{className:"mw-full-size overflow-hidden",direction:"vertical",children:[(0,s.jsx)(Tn,{},"header"),(0,s.jsxs)(un,{stretch:!0,direction:"horizontal",children:[(0,s.jsxs)(un,{direction:"vertical",stretch:!0,children:[n&&i&&(0,s.jsx)(us,{size:"auto"},"structure"),(0,s.jsx)(Ot,{}),(0,s.jsx)(Lt,{direction:"horizontal",size:"auto",flex:"center",children:(0,s.jsx)(Ln,{})},"selection-info"),e&&(0,s.jsx)(tn,{panel:"terminal",titleClassName:"mw-terminal-title",size:"20%",minSize:150,noPadding:!0,children:(0,s.jsx)(dn,{className:"mw-full-size"})},"terminal")]},"main"),t&&(0,s.jsx)(un,{direction:"vertical",size:300,minSize:300,children:(0,s.jsx)(Ms,{})},"right")]},"body")]},"root")]})}),{}))}},function(e){e.O(0,[216,119,24,514],(function(){return 4289,e(e.s=4289)})),e.O()}]);
//# sourceMappingURL=miewer.684eece122684ae0d3d8.js.map