{"version":3,"file":"js/miewer.684eece122684ae0d3d8.js","mappings":"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","sources":["webpack://miewer/./src/themes/utilities.ts","webpack://miewer/./src/helpers/colors.ts","webpack://miewer/./src/themes/index.ts","webpack://miewer/./src/themes/index.scss?52f8","webpack://miewer/./src/helpers/rest.ts","webpack://miewer/./src/stores/themes-store.ts","webpack://miewer/./src/@types/miew/base.ts","webpack://miewer/./src/@types/miew/display-color.ts","webpack://miewer/./src/@types/miew/display-mode.ts","webpack://miewer/./src/@types/miew/display-material.ts","webpack://miewer/./src/@types/miew/index.ts","webpack://miewer/./src/helpers/miew/properties.ts","webpack://miewer/./src/helpers/miew/representations.ts","webpack://miewer/./src/helpers/miew/property-options.ts","webpack://miewer/./src/helpers/miew-proxy/preprocess-options.ts","webpack://miewer/./src/helpers/miew-proxy/miew-request.ts","webpack://miewer/./src/helpers/miew-proxy/index.ts","webpack://miewer/./src/helpers/miew/options.ts","webpack://miewer/./src/helpers/miew/selection.ts","webpack://miewer/./src/stores/miew-molecule-structure-store.ts","webpack://miewer/./src/stores/search-store.ts","webpack://miewer/./src/stores/miew-selection-store.ts","webpack://miewer/./src/helpers/miew/entity.ts","webpack://miewer/./src/helpers/miew/sequences.ts","webpack://miewer/./src/stores/miew-store.ts","webpack://miewer/./src/components/miew/index.tsx","webpack://miewer/./src/@types/components/panels.ts","webpack://miewer/./src/components/miew/use-initialization-options.ts","webpack://miewer/./src/helpers/miew/lazy-initialization.ts","webpack://miewer/./src/components/layout/utilities.ts","webpack://miewer/./src/components/layout/container/space-container.tsx","webpack://miewer/./src/components/layout/container/utilities.ts","webpack://miewer/./src/components/layout/container/hooks/use-children-sizes.ts","webpack://miewer/./src/components/layout/container/index.tsx","webpack://miewer/./src/components/layout/container/hooks/use-container-style.ts","webpack://miewer/./src/helpers/panels.ts","webpack://miewer/./src/components/layout/panel/use-actions-tree.tsx","webpack://miewer/./src/components/layout/panel/panel-action.tsx","webpack://miewer/./src/components/layout/panel/index.tsx","webpack://miewer/./src/stores/miewer-panels-store.ts","webpack://miewer/./src/components/layout/miewer-panel/index.tsx","webpack://miewer/./src/components/layout/split-container/hooks/resize-context.ts","webpack://miewer/./src/components/layout/split-container/utilities.ts","webpack://miewer/./src/components/layout/split-container/divider.tsx","webpack://miewer/./src/components/layout/split-container/hooks/use-split-container-divider.ts","webpack://miewer/./src/components/layout/split-container/index.tsx","webpack://miewer/./src/components/terminal/index.tsx","webpack://miewer/./src/terminal/initialize.ts","webpack://miewer/./src/components/shared/panel-toggle/panel-icons.tsx","webpack://miewer/./src/components/shared/panel-toggle/index.tsx","webpack://miewer/./src/components/shared/generated-code-modal/use-generated-code-modal.ts","webpack://miewer/./src/components/shared/generated-code-modal/index.tsx","webpack://miewer/./src/components/miewer/menu.tsx","webpack://miewer/./src/components/shared/antd-overrides/miewer-input-hoc.tsx","webpack://miewer/./src/components/shared/antd-overrides/index.ts","webpack://miewer/./src/components/miewer/search.tsx","webpack://miewer/./src/@types/components/chain-sequences.ts","webpack://miewer/./src/components/miewer/header.tsx","webpack://miewer/./src/components/miew-selection-info/index.tsx","webpack://miewer/./src/helpers/canvas.ts","webpack://miewer/./src/helpers/animation.ts","webpack://miewer/./src/components/chain-sequence/renderer/index.ts","webpack://miewer/./src/components/chain-sequence/renderer/use-renderer-prop.ts","webpack://miewer/./src/components/chain-sequence/canvas.tsx","webpack://miewer/./src/components/chain-sequence/use-renderer.ts","webpack://miewer/./src/components/chain-sequence/index.tsx","webpack://miewer/./src/stores/chain-sequences-config-store.ts","webpack://miewer/./src/components/chain-sequences/index.tsx","webpack://miewer/./src/components/chain-sequences/panel.tsx","webpack://miewer/./src/components/chain-sequences/use-chain-sequences-actions.ts","webpack://miewer/./src/components/property-selectors/miew-property-selector.tsx","webpack://miewer/./src/components/property-selectors/mode-selector.tsx","webpack://miewer/./src/components/property-selectors/colorer-selector.tsx","webpack://miewer/./src/components/property-selectors/material-selector.tsx","webpack://miewer/./src/components/shared/miewer-color-picker/index.tsx","webpack://miewer/./src/components/representations/single-color-option.tsx","webpack://miewer/./src/components/representation/hooks/use-change-representation.ts","webpack://miewer/./src/components/representation/hooks/use-change-property.ts","webpack://miewer/./src/components/property-option/index.tsx","webpack://miewer/./src/components/property-options/property-options.tsx","webpack://miewer/./src/components/property-options/mode-options.tsx","webpack://miewer/./src/components/property-options/colorer-options.tsx","webpack://miewer/./src/components/property-options/material-options.tsx","webpack://miewer/./src/components/representation/representation-form.tsx","webpack://miewer/./src/components/representation/representation-modal.tsx","webpack://miewer/./src/components/representations/list-item.tsx","webpack://miewer/./src/components/representations/index.tsx","webpack://miewer/./src/components/representations/panel.tsx","webpack://miewer/./src/components/representations/use-representations-actions.ts","webpack://miewer/./src/helpers/dom.ts","webpack://miewer/./src/index.tsx","webpack://miewer/./src/components/miewer/index.tsx"],"sourcesContent":["export function mapFontSize(fs) {\n    var _a;\n    if (typeof fs === 'number') {\n        return fs;\n    }\n    const e = /^(\\d+)px$/.exec(fs);\n    return Number((_a = e === null || e === void 0 ? void 0 : e[1]) !== null && _a !== void 0 ? _a : '11');\n}\nexport function systemThemeIsDark() {\n    return (window.matchMedia &&\n        window.matchMedia('(prefers-color-scheme: dark)').matches);\n}\nexport function isSystemTheme(theme) {\n    return theme && 'system' in theme && theme.system === true;\n}\nexport function getThemeConfig(theme) {\n    if (isSystemTheme(theme)) {\n        return systemThemeIsDark() ? theme.dark : theme.light;\n    }\n    return theme;\n}\n","export function hexString(hex) {\n    const abs = Math.abs(hex);\n    if (abs < 16) {\n        return '0'.concat(Number(abs).toString(16));\n    }\n    return Number(abs).toString(16);\n}\nexport function stringToHex(string) {\n    return Number(`0x${string}`);\n}\nconst channelBits = 0x8;\nexport function colorValueToString(color, alpha) {\n    const positiveValue = Math.abs(color);\n    const r = ((positiveValue >> channelBits) >> channelBits) & 0xff;\n    const g = (positiveValue >> channelBits) & 0xff;\n    const b = positiveValue & 0xff;\n    if (alpha === undefined) {\n        return `#${hexString(r)}${hexString(g)}${hexString(b)}`;\n    }\n    return `#${hexString(r)}${hexString(g)}${hexString(b)}${hexString(Math.floor(0xff * alpha))}`;\n}\nexport function stringToColorValue(color) {\n    if (/^#[0-9a-f]{3}$/i.test(color)) {\n        // Shorthand color notation\n        const getChannel = (index) => color[index + 1].concat(color[index + 1]);\n        const r = stringToHex(getChannel(0));\n        const g = stringToHex(getChannel(1));\n        const b = stringToHex(getChannel(2));\n        return b | (g << channelBits) | ((r << channelBits) << channelBits);\n    }\n    if (/^#[0-9a-f]{6,8}$/i.test(color)) {\n        // Shorthand color notation\n        const getChannel = (index) => color[index * 2 + 1].concat(color[index * 2 + 2]);\n        const r = stringToHex(getChannel(0));\n        const g = stringToHex(getChannel(1));\n        const b = stringToHex(getChannel(2));\n        return b | (g << channelBits) | ((r << channelBits) << channelBits);\n    }\n    const rgb = /^rgba?\\(\\s*(\\d+)\\s*[,\\s]\\s*(\\d+)\\s*[,\\s]\\s*(\\d+)\\s*([,\\s/]\\s*[\\d.]+%?)?\\s*\\)$/i.exec(color);\n    if (rgb) {\n        const r = Math.min(255, Number(rgb[1]));\n        const g = Math.min(255, Number(rgb[2]));\n        const b = Math.min(255, Number(rgb[3]));\n        if (!Number.isNaN(r) && !Number.isNaN(g) && !Number.isNaN(b)) {\n            return b | (g << channelBits) | ((r << channelBits) << channelBits);\n        }\n    }\n    return 0x0;\n}\n/**\n * Returns byte value of the alpha channel of the color\n * @param {string} color - color string in hex format (#AABBCC or #AABBCCDD)\n */\nexport function extractAlphaChannelFromHexColor(color) {\n    if (/^#[0-9a-f]{8}$/i.test(color)) {\n        // Shorthand color notation\n        const getChannel = (index) => color[2 * index + 1].concat(color[2 * index + 2]);\n        return stringToHex(getChannel(3));\n    }\n    return 255;\n}\n","import { stringToColorValue } from '../helpers/colors';\nimport { mapFontSize } from './utilities';\nimport variables from './index.scss';\nconst { fontFamily = 'verdana, sans-serif', fontSize = 11, darkBackgroundBase = '#111', darkBackground = '#222', darkForeground = '#cacaca', darkForegroundFaded = '#777', darkError = '#d13460', darkSelectionBackground = '#e78d04', darkSelectionForeground = '#222', lightBackgroundBase = '#e0e0e0', lightBackground = '#ededed', lightForeground = '#333', lightForegroundFaded = '#777', lightError = '#d90f45', lightSelectionBackground = '#e78d04', lightSelectionForeground = '#222', } = variables || {};\nexport const darkTheme = {\n    id: 'dark-theme',\n    title: 'Dark theme',\n    baseBackground: stringToColorValue(darkBackgroundBase),\n    background: stringToColorValue(darkBackground),\n    foreground: stringToColorValue(darkForeground),\n    foregroundFaded: stringToColorValue(darkForegroundFaded),\n    selectionBackground: stringToColorValue(darkSelectionBackground),\n    selectionForeground: stringToColorValue(darkSelectionForeground),\n    error: stringToColorValue(darkError),\n    fontFamily,\n    fontSize: mapFontSize(fontSize),\n    dark: true,\n};\nexport const lightTheme = {\n    id: 'light-theme',\n    title: 'Light theme',\n    baseBackground: stringToColorValue(lightBackgroundBase),\n    background: stringToColorValue(lightBackground),\n    foreground: stringToColorValue(lightForeground),\n    foregroundFaded: stringToColorValue(lightForegroundFaded),\n    selectionBackground: stringToColorValue(lightSelectionBackground),\n    selectionForeground: stringToColorValue(lightSelectionForeground),\n    error: stringToColorValue(lightError),\n    fontFamily,\n    fontSize: mapFontSize(fontSize),\n    dark: false,\n};\nexport const systemTheme = {\n    id: 'system-theme',\n    title: 'System theme',\n    dark: darkTheme,\n    light: lightTheme,\n    system: true,\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"fontFamily\":\"verdana,sans-serif\",\"fontSize\":\"11px\",\"darkBackgroundBase\":\"#000\",\"darkBackground\":\"#222\",\"darkForeground\":\"#cacaca\",\"darkForegroundFaded\":\"#777\",\"darkError\":\"#d13460\",\"darkSelectionBackground\":\"#e78d04\",\"darkSelectionForeground\":\"#222\",\"lightBackgroundBase\":\"#f0f0f0\",\"lightBackground\":\"#ededed\",\"lightForeground\":\"#333\",\"lightForegroundFaded\":\"#777\",\"lightError\":\"#d90f45\",\"lightSelectionBackground\":\"#e78d04\",\"lightSelectionForeground\":\"#222\"};","export function noop() {\n    // Noop\n}\nexport function asArray(data) {\n    if (data !== undefined && Array.isArray(data)) {\n        return data;\n    }\n    if (data !== undefined) {\n        return [data];\n    }\n    return [];\n}\nexport function asPlain(data) {\n    if (data !== undefined && Array.isArray(data)) {\n        return data[0];\n    }\n    if (data !== undefined) {\n        return data;\n    }\n    return undefined;\n}\nexport function getGreatestCommonDivisorEuclideanAlgorithm(a, b) {\n    // We're only processing integer numbers\n    const t1 = Math.floor(a);\n    const t2 = Math.floor(b);\n    if (t1 <= 0 || t2 <= 0) {\n        return 1;\n    }\n    // Euclidean algorithm, division-based version\n    let min = Math.min(t1, t2);\n    let max = Math.max(t1, t2);\n    while (min !== 0) {\n        const t = min;\n        min = max % min;\n        max = t;\n    }\n    return max;\n}\nexport function getGreatestCommonDivisor(...number) {\n    if (number.length === 0) {\n        return 1;\n    }\n    if (number.length === 1) {\n        return number[0];\n    }\n    const [a, b, ...rest] = number;\n    return getGreatestCommonDivisor(getGreatestCommonDivisorEuclideanAlgorithm(a, b), ...rest);\n}\nexport function getObjectsShallowDifferences(original, comparing) {\n    const differences = {};\n    const keys = Object.keys(Object.assign(Object.assign({}, original), comparing));\n    for (const key of keys) {\n        if (original[key] !== comparing[key] && comparing[key] !== undefined) {\n            differences[key] = comparing[key];\n        }\n    }\n    return differences;\n}\nexport function arraysEquals(original, comparing) {\n    if (original.length !== comparing.length) {\n        return false;\n    }\n    for (let i = 0; i < original.length; i += 1) {\n        if (!objectsEquals(original[i], comparing[i])) {\n            return false;\n        }\n    }\n    return true;\n}\nexport function arraysShallowEquals(original, comparing) {\n    if (original.length !== comparing.length) {\n        return false;\n    }\n    for (let i = 0; i < original.length; i += 1) {\n        if (original[i] !== comparing[i]) {\n            return false;\n        }\n    }\n    return true;\n}\nexport function objectsEquals(original, comparing) {\n    if (!original && !comparing) {\n        return true;\n    }\n    if (!original || !comparing) {\n        return false;\n    }\n    if (typeof original !== typeof comparing) {\n        return false;\n    }\n    if (typeof original === 'string' ||\n        typeof original === 'number' ||\n        typeof original === 'boolean') {\n        return original === comparing;\n    }\n    if (Array.isArray(original) && Array.isArray(comparing)) {\n        return arraysEquals(original, comparing);\n    }\n    if (typeof original === 'object' && typeof comparing === 'object') {\n        const keysA = Object.keys(original);\n        const keysB = Object.keys(comparing);\n        const keys = [].concat(keysA).concat(keysB);\n        for (const key of keys) {\n            if (!(key in original) && key in comparing) {\n                return false;\n            }\n            if (key in original && !(key in comparing)) {\n                return false;\n            }\n            const a = original[key];\n            const b = comparing[key];\n            if (!objectsEquals(a, b)) {\n                return false;\n            }\n        }\n        return true;\n    }\n    return original !== comparing;\n}\nexport function getQueryStringEntries(search) {\n    const { search: locationSearch = '' } = document.location;\n    const queryString = search !== null && search !== void 0 ? search : locationSearch;\n    const query = queryString.startsWith('?')\n        ? queryString.slice(1)\n        : queryString;\n    return query\n        .split('&')\n        .map((entryString) => entryString.split('='))\n        .map(([key, ...value]) => ({\n        key: decodeURIComponent(key),\n        value: decodeURIComponent(value.join('=')),\n    }));\n}\nfunction getQueryEntryString(entry, encodeKey, encodeValue) {\n    const key = encodeKey ? encodeURIComponent(entry.key) : entry.key;\n    const value = encodeValue ? encodeURIComponent(entry.value) : entry.value;\n    return `${key}=${value}`;\n}\nfunction entryMatchesEncodeKey(entry, encodeKey) {\n    if (typeof encodeKey === 'string') {\n        return entry.key === encodeKey;\n    }\n    return encodeKey.test(entry.key);\n}\nexport function getQueryStringFromEntries(entries, ...encodeKeys) {\n    const query = entries\n        .map((entry) => getQueryEntryString(entry, false, encodeKeys.some((encodeKey) => entryMatchesEncodeKey(entry, encodeKey))))\n        .join('&');\n    return query.length > 0 ? `?${query}` : '';\n}\nconst escapeRegExpCharacters = [\n    '.',\n    '-',\n    '+',\n    '*',\n    '?',\n    '^',\n    '$',\n    '(',\n    ')',\n    '[',\n    ']',\n    '{',\n    '}',\n];\nexport function escapeRegExp(string, characters = escapeRegExpCharacters) {\n    let result = string;\n    characters.forEach((character) => {\n        result = result.replace(new RegExp('\\\\' + character, 'g'), `\\\\${character}`);\n    });\n    return result;\n}\nexport function getRangesFromNumberArray(array) {\n    const result = [];\n    const uniqueSorted = [...new Set(array)].sort((a, b) => a - b);\n    for (const item of uniqueSorted) {\n        if (result.length === 0) {\n            result.push([item, item]);\n        }\n        else if (result[result.length - 1][1] < item - 1) {\n            result.push([item, item]);\n        }\n        else {\n            result[result.length - 1][1] = item;\n        }\n    }\n    return result;\n}\nexport function getCssNumberValueRegExp(...unit) {\n    return new RegExp(`^(\\\\d+(\\\\.\\\\d+)?)(${unit.map((u) => escapeRegExp(u)).join('|')})?$`, 'i');\n}\nexport function isCssNumberValue(cssValue, ...unit) {\n    const regExp = getCssNumberValueRegExp(...unit);\n    return regExp.test(cssValue);\n}\nexport function parseCssNumberValue(cssValue, ...unit) {\n    var _a;\n    const regExp = getCssNumberValueRegExp(...unit);\n    const [, valueString] = (_a = regExp.exec(cssValue)) !== null && _a !== void 0 ? _a : [];\n    if (valueString && !Number.isNaN(Number(valueString))) {\n        return Number(valueString);\n    }\n    return undefined;\n}\nexport function readSetting(setting, defaultValue) {\n    try {\n        const value = localStorage.getItem(setting);\n        if (!value || value.trim() === '') {\n            return defaultValue;\n        }\n        return JSON.parse(value);\n    }\n    catch (noopError) {\n        // Noop\n    }\n    return defaultValue;\n}\nexport function saveSetting(setting, value) {\n    localStorage.setItem(setting, value === undefined ? '' : JSON.stringify(value));\n}\nexport function createLocalSettings(settings, defaultValue) {\n    const read = () => readSetting(settings, defaultValue);\n    const save = (value) => {\n        saveSetting(settings, value);\n    };\n    return {\n        read,\n        save,\n    };\n}\n","var _a;\nimport { create } from 'zustand';\nimport { theme as antdTheme } from 'antd';\nimport { getThemeConfig, isSystemTheme } from '../themes/utilities';\nimport { darkTheme, lightTheme, systemTheme } from '../themes';\nimport { useEffect, useMemo } from 'react';\nimport { noop, createLocalSettings } from '../helpers/rest';\nimport { colorValueToString } from '../helpers/colors';\nconst defaultTheme = darkTheme;\nconst { read, save } = createLocalSettings('miewer-theme', defaultTheme.id);\nconst themes = [darkTheme, lightTheme, systemTheme];\nconst defaultLocalStorageThemeId = read();\nconst savedTheme = (_a = themes.find((theme) => theme.id === defaultLocalStorageThemeId)) !== null && _a !== void 0 ? _a : defaultTheme;\nexport const useThemesStore = create((set) => ({\n    themes,\n    theme: savedTheme,\n    themeConfig: getThemeConfig(savedTheme),\n    setTheme(theme) {\n        set((state) => {\n            if (typeof theme === 'string') {\n                const aTheme = state.themes.find((o) => o.id === theme);\n                if (aTheme) {\n                    save(aTheme.id);\n                    return {\n                        theme: aTheme,\n                        themeConfig: getThemeConfig(aTheme),\n                    };\n                }\n                return {};\n            }\n            return {\n                theme,\n                themeConfig: getThemeConfig(theme),\n            };\n        });\n    },\n    updateThemeConfig() {\n        set((state) => ({\n            themeConfig: getThemeConfig(state.theme),\n        }));\n    },\n}));\nexport function useThemes() {\n    const theme = useThemesStore((state) => state.theme);\n    const updateThemeConfig = useThemesStore((state) => state.updateThemeConfig);\n    const themeId = useThemesStore((state) => state.themeConfig.id);\n    useEffect(() => {\n        document.body.classList.add(themeId);\n        return () => {\n            document.body.classList.remove(themeId);\n        };\n    }, [themeId]);\n    useEffect(() => {\n        if (isSystemTheme(theme)) {\n            const applyTheme = () => {\n                updateThemeConfig();\n            };\n            if (window.matchMedia) {\n                const matchMedia = window.matchMedia('(prefers-color-scheme: dark)');\n                if (matchMedia && typeof matchMedia.addEventListener === 'function') {\n                    matchMedia.addEventListener('change', applyTheme);\n                    return () => {\n                        matchMedia.removeEventListener('changed', applyTheme);\n                    };\n                }\n                if (matchMedia && typeof matchMedia.addListener === 'function') {\n                    // IE support\n                    matchMedia.addListener(applyTheme);\n                    return () => {\n                        matchMedia.removeListener(applyTheme);\n                    };\n                }\n            }\n        }\n        return noop;\n    }, [theme, updateThemeConfig]);\n}\nexport function useThemeConfig() {\n    return useThemesStore((store) => store.themeConfig);\n}\nfunction customDarkAlgorithm(seedToken) {\n    const mapToken = antdTheme.darkAlgorithm(seedToken);\n    mapToken.colorPrimary = mapToken.colorText;\n    mapToken.colorPrimaryBg = mapToken.colorFillTertiary;\n    mapToken.colorPrimaryBgHover = mapToken.colorFillSecondary;\n    return mapToken;\n}\nexport function useAntdThemes() {\n    const themeConfig = useThemeConfig();\n    return useMemo(() => ({\n        algorithm: themeConfig.dark\n            ? [antdTheme.darkAlgorithm]\n            : [antdTheme.defaultAlgorithm],\n        token: {\n            borderRadiusOuter: 0,\n            borderRadius: 0,\n            colorBgBase: colorValueToString(themeConfig.baseBackground),\n            colorTextBase: colorValueToString(themeConfig.foreground),\n            colorError: colorValueToString(themeConfig.error),\n            fontFamily: themeConfig.fontFamily,\n            fontSize: themeConfig.fontSize,\n        },\n        components: {\n            // eslint-disable-next-line @typescript-eslint/naming-convention\n            Dropdown: {\n                algorithm: themeConfig.dark\n                    ? [customDarkAlgorithm]\n                    : [antdTheme.defaultAlgorithm],\n            },\n            // eslint-disable-next-line @typescript-eslint/naming-convention\n            Select: {\n                algorithm: themeConfig.dark\n                    ? [customDarkAlgorithm]\n                    : [antdTheme.defaultAlgorithm],\n            },\n        },\n    }), [themeConfig, antdTheme]);\n}\n","export var MiewPropertyOptionKind;\n(function (MiewPropertyOptionKind) {\n    MiewPropertyOptionKind[\"string\"] = \"string\";\n    MiewPropertyOptionKind[\"boolean\"] = \"boolean\";\n    MiewPropertyOptionKind[\"number\"] = \"number\";\n    MiewPropertyOptionKind[\"color\"] = \"color\";\n})(MiewPropertyOptionKind || (MiewPropertyOptionKind = {}));\n","import { MiewPropertyOptionKind } from './base';\nexport var DisplayColor;\n(function (DisplayColor) {\n    DisplayColor[\"element\"] = \"EL\";\n    DisplayColor[\"residueType\"] = \"RT\";\n    DisplayColor[\"sequence\"] = \"SQ\";\n    DisplayColor[\"chain\"] = \"CH\";\n    DisplayColor[\"secondaryStructure\"] = \"SS\";\n    DisplayColor[\"uniform\"] = \"UN\";\n    DisplayColor[\"conditional\"] = \"CO\";\n    DisplayColor[\"conformation\"] = \"CF\";\n    DisplayColor[\"temperature\"] = \"TM\";\n    DisplayColor[\"occupancy\"] = \"OC\";\n    DisplayColor[\"hydrophobicity\"] = \"HY\";\n    DisplayColor[\"molecule\"] = \"MO\";\n    DisplayColor[\"carbon\"] = \"CB\";\n})(DisplayColor || (DisplayColor = {}));\nexport const element = {\n    carbon: {\n        default: -1,\n        kind: MiewPropertyOptionKind.color,\n    },\n};\nexport const uniform = {\n    color: {\n        required: true,\n        default: 0xffffff,\n        main: true,\n        kind: MiewPropertyOptionKind.color,\n    },\n};\nexport const conditional = {\n    subset: {\n        default: 'charged',\n        kind: MiewPropertyOptionKind.string,\n    },\n    color: {\n        default: 0xff0000,\n        kind: MiewPropertyOptionKind.color,\n    },\n    baseColor: {\n        default: 0x000000,\n        kind: MiewPropertyOptionKind.color,\n        title: 'base color',\n    },\n};\nexport const carbon = {\n    color: {\n        default: 0x909090,\n        kind: MiewPropertyOptionKind.color,\n    },\n};\nexport const displayColorNames = {\n    [DisplayColor.element]: 'Element',\n    [DisplayColor.residueType]: 'Residue type',\n    [DisplayColor.sequence]: 'Sequence',\n    [DisplayColor.chain]: 'Chain',\n    [DisplayColor.secondaryStructure]: 'Secondary structure',\n    [DisplayColor.uniform]: 'Uniform',\n    [DisplayColor.conditional]: 'Conditional',\n    [DisplayColor.conformation]: 'Conformation',\n    [DisplayColor.temperature]: 'Temperature',\n    [DisplayColor.occupancy]: 'Occupancy',\n    [DisplayColor.hydrophobicity]: 'Hydrophobicity',\n    [DisplayColor.molecule]: 'Molecule',\n    [DisplayColor.carbon]: 'Carbon',\n};\nexport const displayColorOptionsManifests = {\n    [DisplayColor.element]: element,\n    [DisplayColor.residueType]: {},\n    [DisplayColor.sequence]: {},\n    [DisplayColor.chain]: {},\n    [DisplayColor.secondaryStructure]: {},\n    [DisplayColor.uniform]: uniform,\n    [DisplayColor.conditional]: conditional,\n    [DisplayColor.conformation]: {},\n    [DisplayColor.temperature]: {},\n    [DisplayColor.occupancy]: {},\n    [DisplayColor.hydrophobicity]: {},\n    [DisplayColor.molecule]: {},\n    [DisplayColor.carbon]: carbon,\n};\nexport const displayColors = Object.values(DisplayColor);\n","export var DisplayMode;\n(function (DisplayMode) {\n    DisplayMode[\"lines\"] = \"LN\";\n    DisplayMode[\"licorice\"] = \"LC\";\n    DisplayMode[\"ballsAndSticks\"] = \"BS\";\n    DisplayMode[\"vanDerWaals\"] = \"VW\";\n    DisplayMode[\"solventAccessibleSurface\"] = \"SA\";\n    DisplayMode[\"solventExcludedSurface\"] = \"SE\";\n    DisplayMode[\"quickSurface\"] = \"QS\";\n    DisplayMode[\"contactSurface\"] = \"CS\";\n    DisplayMode[\"trace\"] = \"TR\";\n    DisplayMode[\"tube\"] = \"TU\";\n    DisplayMode[\"cartoon\"] = \"CA\";\n    DisplayMode[\"text\"] = \"TX\";\n    DisplayMode[\"volumeDensity\"] = \"VD\";\n})(DisplayMode || (DisplayMode = {}));\nexport const displayModeNames = {\n    [DisplayMode.lines]: 'Lines',\n    [DisplayMode.licorice]: 'Licorice',\n    [DisplayMode.ballsAndSticks]: 'Balls and sticks',\n    [DisplayMode.vanDerWaals]: 'Van der Waals',\n    [DisplayMode.solventAccessibleSurface]: 'Solvent accessible surface',\n    [DisplayMode.solventExcludedSurface]: 'Solvent excluded surface',\n    [DisplayMode.quickSurface]: 'Quick surface',\n    [DisplayMode.contactSurface]: 'Contact surface',\n    [DisplayMode.trace]: 'Trace',\n    [DisplayMode.tube]: 'Tube',\n    [DisplayMode.cartoon]: 'Cartoon',\n    [DisplayMode.text]: 'Text',\n    [DisplayMode.volumeDensity]: 'Volume density',\n};\nexport const displayModesOptionsManifests = {\n    [DisplayMode.lines]: {},\n    [DisplayMode.licorice]: {},\n    [DisplayMode.ballsAndSticks]: {},\n    [DisplayMode.vanDerWaals]: {},\n    [DisplayMode.solventAccessibleSurface]: {},\n    [DisplayMode.solventExcludedSurface]: {},\n    [DisplayMode.quickSurface]: {},\n    [DisplayMode.contactSurface]: {},\n    [DisplayMode.trace]: {},\n    [DisplayMode.tube]: {},\n    [DisplayMode.cartoon]: {},\n    [DisplayMode.text]: {},\n    [DisplayMode.volumeDensity]: {},\n};\nexport const displayModes = Object.values(DisplayMode);\n","export var DisplayMaterial;\n(function (DisplayMaterial) {\n    DisplayMaterial[\"diffuse\"] = \"DF\";\n    DisplayMaterial[\"softPlastic\"] = \"SF\";\n    DisplayMaterial[\"glossyPlastic\"] = \"PL\";\n    DisplayMaterial[\"metal\"] = \"ME\";\n    DisplayMaterial[\"transparent\"] = \"TR\";\n    DisplayMaterial[\"glass\"] = \"GL\";\n    DisplayMaterial[\"backdrop\"] = \"BA\";\n    DisplayMaterial[\"toon\"] = \"TN\";\n    DisplayMaterial[\"flat\"] = \"FL\";\n})(DisplayMaterial || (DisplayMaterial = {}));\nexport const displayMaterialNames = {\n    [DisplayMaterial.diffuse]: 'Diffuse',\n    [DisplayMaterial.softPlastic]: 'Soft plastic',\n    [DisplayMaterial.glossyPlastic]: 'Glossy plastic',\n    [DisplayMaterial.metal]: 'Metal',\n    [DisplayMaterial.transparent]: 'Transparent',\n    [DisplayMaterial.glass]: 'Glass',\n    [DisplayMaterial.backdrop]: 'Backdrop',\n    [DisplayMaterial.toon]: 'Toon',\n    [DisplayMaterial.flat]: 'Flat',\n};\nexport const displayMaterialOptionsManifests = {\n    [DisplayMaterial.diffuse]: {},\n    [DisplayMaterial.softPlastic]: {},\n    [DisplayMaterial.glossyPlastic]: {},\n    [DisplayMaterial.metal]: {},\n    [DisplayMaterial.transparent]: {},\n    [DisplayMaterial.glass]: {},\n    [DisplayMaterial.backdrop]: {},\n    [DisplayMaterial.toon]: {},\n    [DisplayMaterial.flat]: {},\n};\nexport const displayMaterials = Object.values(DisplayMaterial);\n","import { MiewPropertyOptionKind } from './base';\nimport { DisplayColor, displayColorNames, displayColorOptionsManifests, displayColors, } from './display-color';\nimport { DisplayMode, displayModeNames, displayModesOptionsManifests, displayModes, } from './display-mode';\nimport { DisplayMaterial, displayMaterialNames, displayMaterialOptionsManifests, displayMaterials, } from './display-material';\nexport { DisplayColor, DisplayMode, DisplayMaterial };\nexport var MiewShadowType;\n(function (MiewShadowType) {\n    MiewShadowType[\"random\"] = \"random\";\n    MiewShadowType[\"basic\"] = \"basic\";\n    MiewShadowType[\"pcf\"] = \"pcf\";\n})(MiewShadowType || (MiewShadowType = {}));\nexport var Palette;\n(function (Palette) {\n    Palette[\"jm\"] = \"JM\";\n    Palette[\"jmol\"] = \"JMOL\";\n})(Palette || (Palette = {}));\nexport var MiewEntityType;\n(function (MiewEntityType) {\n    MiewEntityType[\"atom\"] = \"atom\";\n    MiewEntityType[\"residue\"] = \"residue\";\n    MiewEntityType[\"molecule\"] = \"molecule\";\n    MiewEntityType[\"chain\"] = \"chain\";\n})(MiewEntityType || (MiewEntityType = {}));\nexport { displayColors, displayMaterials, displayModes, displayColorNames, displayMaterialNames, displayModeNames, displayColorOptionsManifests, displayMaterialOptionsManifests, displayModesOptionsManifests, MiewPropertyOptionKind, };\n","import { displayColorOptionsManifests, displayMaterialOptionsManifests, displayModesOptionsManifests, MiewPropertyOptionKind, } from '../../@types/miew';\nimport { objectsEquals } from '../rest';\nexport function isPropertyConfig(property) {\n    return property && Array.isArray(property);\n}\nexport function getPropertyOptions(property) {\n    if (isPropertyConfig(property)) {\n        return property[1];\n    }\n    return undefined;\n}\nexport function serializePropertyOptions(propertyConfig) {\n    return Object.entries(propertyConfig)\n        .map(([prop, value]) => ({ prop, value }))\n        .sort((a, b) => a.prop.localeCompare(b.prop))\n        .map(({ prop, value }) => `${prop}:${value}`)\n        .join('/');\n}\nexport function getPropertyHash(property) {\n    if (isPropertyConfig(property)) {\n        return [property[0], serializePropertyOptions(property[1])].join('/');\n    }\n    return property.toString();\n}\nexport function cloneProperty(property) {\n    var _a;\n    if (isPropertyConfig(property)) {\n        const config = Object.assign({}, ((_a = property[1]) !== null && _a !== void 0 ? _a : {}));\n        return [property[0], config];\n    }\n    return property;\n}\nexport function getPropertyValue(property) {\n    return isPropertyConfig(property) ? property[0] : property;\n}\nfunction initializeOptionIfRequired(optionManifest) {\n    if (optionManifest.required) {\n        return optionManifest.default;\n    }\n    return undefined;\n}\nexport function initializeMiewPropertyOptions(manifest, allowEmpty = false) {\n    const optionManifests = Object.entries(manifest !== null && manifest !== void 0 ? manifest : {});\n    const options = optionManifests\n        .map((entry) => {\n        const [option, optionManifest] = entry;\n        const value = initializeOptionIfRequired(optionManifest);\n        if (value) {\n            return {\n                [option]: value,\n            };\n        }\n        return false;\n    })\n        .filter(Boolean)\n        .reduce((result, opt) => (Object.assign(Object.assign({}, result), opt)), {});\n    if (Object.keys(options).length === 0 && !allowEmpty) {\n        return undefined;\n    }\n    return options;\n}\nexport function initializeMiewProperty(type, optionsManifests) {\n    const options = initializeMiewPropertyOptions(optionsManifests[type]);\n    if (options) {\n        return [type, options];\n    }\n    return type;\n}\nexport function initializeColorer(type) {\n    return initializeMiewProperty(type, displayColorOptionsManifests);\n}\nexport function initializeMode(type) {\n    return initializeMiewProperty(type, displayModesOptionsManifests);\n}\nexport function initializeMaterial(type) {\n    return initializeMiewProperty(type, displayMaterialOptionsManifests);\n}\nexport function getPropertyManifest(property, manifests) {\n    const value = getPropertyValue(property);\n    return manifests[value];\n}\nexport function getOptionsForProperty(property, manifests) {\n    const value = getPropertyValue(property);\n    const manifest = manifests[value];\n    const optionManifests = Object.entries(manifest !== null && manifest !== void 0 ? manifest : {});\n    return optionManifests.map(([name, m]) => (Object.assign(Object.assign({}, m), { name })));\n}\nexport function getOptionsForColorer(colorer) {\n    return getOptionsForProperty(colorer, displayColorOptionsManifests);\n}\nexport function getOptionsForMode(mode) {\n    return getOptionsForProperty(mode, displayModesOptionsManifests);\n}\nexport function getOptionsForMaterial(material) {\n    return getOptionsForProperty(material, displayMaterialOptionsManifests);\n}\nexport function isColorOptionManifest(manifest) {\n    return manifest && manifest.kind === MiewPropertyOptionKind.color;\n}\nexport function getColorOptionsForProperty(property, manifests) {\n    return getOptionsForProperty(property, manifests).filter((m) => isColorOptionManifest(m));\n}\nexport function getColorOptionsForColorer(colorer) {\n    return getColorOptionsForProperty(colorer, displayColorOptionsManifests);\n}\nexport function getColorOptionsForMode(mode) {\n    return getColorOptionsForProperty(mode, displayModesOptionsManifests);\n}\nexport function getColorOptionsForMaterial(material) {\n    return getColorOptionsForProperty(material, displayMaterialOptionsManifests);\n}\nexport function getPropertyOptionValue(property, manifest) {\n    const options = getPropertyOptions(property);\n    if (options) {\n        return options[manifest.name];\n    }\n    return undefined;\n}\nexport function setPropertyOptionValue(property, propertyManifest, optionManifest, value) {\n    let options = getPropertyOptions(property);\n    if (!options && value !== undefined) {\n        options = initializeMiewPropertyOptions(propertyManifest, true);\n    }\n    if (options) {\n        return [\n            getPropertyValue(property),\n            Object.assign(Object.assign({}, options), { [optionManifest.name]: value }),\n        ];\n    }\n    return property;\n}\nexport function propertiesOptionsEqual(options1, options2) {\n    if (!options1 && !options2) {\n        return true;\n    }\n    if (!options1 || !options2) {\n        return false;\n    }\n    return objectsEquals(options1, options2);\n}\nexport function propertiesEqual(property1, property2) {\n    if (!property1 && !property2) {\n        return true;\n    }\n    if (!property1 || !property2) {\n        return false;\n    }\n    const p1 = getPropertyValue(property1);\n    const p2 = getPropertyValue(property2);\n    if (p1 !== p2) {\n        return false;\n    }\n    const pOptions1 = getPropertyOptions(property1);\n    const pOptions2 = getPropertyOptions(property2);\n    return propertiesOptionsEqual(pOptions1, pOptions2);\n}\n","import { cloneProperty, getPropertyHash, propertiesEqual } from './properties';\nimport { DisplayColor, DisplayMaterial, DisplayMode } from '../../@types/miew';\nexport function getMiewRepresentations(miew) {\n    const count = miew.repCount(undefined);\n    const representations = [];\n    for (let i = 0; i < count; i += 1) {\n        const { selector, mode, material, colorer } = miew.rep(i, undefined);\n        representations.push({\n            selector,\n            mode,\n            material,\n            colorer,\n        });\n    }\n    return representations;\n}\nexport function cloneRepresentation(representation) {\n    const { name, selector, mode, colorer, material } = representation;\n    return {\n        name,\n        selector,\n        mode: mode ? cloneProperty(mode) : undefined,\n        colorer: colorer ? cloneProperty(colorer) : undefined,\n        material: material ? cloneProperty(material) : undefined,\n    };\n}\nexport function getRepresentationHash(representation) {\n    const { selector, mode, colorer, material } = representation;\n    return [\n        selector,\n        mode ? getPropertyHash(mode) : '',\n        colorer ? getPropertyHash(colorer) : '',\n        material ? getPropertyHash(material) : '',\n    ].join('|');\n}\nexport function createDefaultRepresentation() {\n    return {\n        selector: 'not hetatm',\n        mode: DisplayMode.cartoon,\n        colorer: DisplayColor.secondaryStructure,\n        material: DisplayMaterial.softPlastic,\n    };\n}\nexport function representationsEqual(rep1, rep2) {\n    const { name: name1, selector: selector1, colorer: colorer1, material: material1, mode: mode1, } = rep1;\n    const { name: name2, selector: selector2, colorer: colorer2, material: material2, mode: mode2, } = rep2;\n    return ((name1 !== null && name1 !== void 0 ? name1 : '') === (name2 !== null && name2 !== void 0 ? name2 : '') &&\n        (selector1 !== null && selector1 !== void 0 ? selector1 : '') === (selector2 !== null && selector2 !== void 0 ? selector2 : '') &&\n        propertiesEqual(colorer1, colorer2) &&\n        propertiesEqual(material1, material2) &&\n        propertiesEqual(mode1, mode2));\n}\n","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { cloneRepresentation } from './representations';\nexport function clonePropertyOptions(options) {\n    const { reps } = options, rest = __rest(options, [\"reps\"]);\n    return Object.assign(Object.assign({}, rest), { reps: reps ? reps.map(cloneRepresentation) : undefined });\n}\n","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { arraysEquals, getObjectsShallowDifferences } from '../rest';\nexport function removeRepresentationName(representation) {\n    const { name } = representation, rest = __rest(representation, [\"name\"]);\n    return rest;\n}\nexport function processRepresentations(representations) {\n    if (!representations) {\n        return undefined;\n    }\n    return representations.map(removeRepresentationName);\n}\nexport function processOptions(options) {\n    const { reps, source, searchRequest } = options, rest = __rest(options, [\"reps\", \"source\", \"searchRequest\"]);\n    return Object.assign(Object.assign({}, rest), { reps: processRepresentations(reps) });\n}\nexport function getOptionsDiffIgnoringRepresentationNames(original, comparing) {\n    const _a = processOptions(original), { reps: originalReps } = _a, processedOriginal = __rest(_a, [\"reps\"]);\n    const _b = processOptions(comparing), { reps: comparingReps } = _b, processedComparing = __rest(_b, [\"reps\"]);\n    const diff = getObjectsShallowDifferences(processedOriginal, processedComparing);\n    if (!arraysEquals(originalReps !== null && originalReps !== void 0 ? originalReps : [], comparingReps !== null && comparingReps !== void 0 ? comparingReps : [])) {\n        diff.reps = comparingReps;\n    }\n    return diff;\n}\n","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { processOptions } from './preprocess-options';\nclass MiewRequest {\n}\nclass MiewSourceRequest extends MiewRequest {\n    constructor(source) {\n        super();\n        this._source = source;\n    }\n    perform(miew, callback) {\n        miew.unload(undefined);\n        miew\n            .load(this._source, {})\n            .then(() => {\n            callback();\n        })\n            .catch((error) => {\n            console.warn(error.message);\n        });\n    }\n}\nclass MiewOptionsRequest extends MiewRequest {\n    constructor(options) {\n        super();\n        this._options = options;\n    }\n    merge(request) {\n        this._options = Object.assign(Object.assign({}, this._options), request._options);\n    }\n    perform(miew, callback) {\n        const _a = processOptions(this._options), { preset, reps } = _a, rest = __rest(_a, [\"preset\", \"reps\"]);\n        if (Object.keys(rest).length > 0) {\n            miew.setOptions(rest);\n        }\n        if (preset) {\n            miew.applyPreset(preset);\n        }\n        if (reps) {\n            const repsCount = miew.repCount(undefined);\n            reps.forEach((rep, idx) => {\n                miew.rep(idx, rep);\n            });\n            for (let i = reps.length; i < repsCount; i += 1) {\n                miew.repRemove(i, undefined);\n            }\n        }\n        callback();\n    }\n}\nclass MiewRequestProcessor {\n    constructor(miew) {\n        this._miew = miew;\n        this._queue = [];\n    }\n    get busy() {\n        return Boolean(this._requestInProgress);\n    }\n    registerRequest(request) {\n        const last = this._queue[this._queue.length - 1];\n        if (request instanceof MiewSourceRequest) {\n            this._queue = [request];\n        }\n        else if (last instanceof MiewOptionsRequest &&\n            request instanceof MiewOptionsRequest) {\n            last.merge(request);\n        }\n        else {\n            this._queue.push(request);\n        }\n        this.performNextRequest();\n    }\n    dispose() {\n        this._queue = [];\n        this._miew = undefined;\n    }\n    pickRequest() {\n        if (this._queue.length === 0) {\n            return undefined;\n        }\n        return this._queue.shift();\n    }\n    onRequestDone() {\n        this._requestInProgress = undefined;\n        this.performNextRequest();\n    }\n    performNextRequest() {\n        if (!this._requestInProgress && this._miew) {\n            this._requestInProgress = this.pickRequest();\n            if (this._requestInProgress) {\n                this._requestInProgress.perform(this._miew, this.onRequestDone.bind(this));\n            }\n        }\n    }\n}\nexport { MiewRequestProcessor, MiewSourceRequest, MiewOptionsRequest };\n","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { MiewOptionsRequest, MiewRequestProcessor, MiewSourceRequest, } from './miew-request';\nimport { getOptionsDiffIgnoringRepresentationNames } from './preprocess-options';\nclass MiewProxy {\n    constructor(miew, options) {\n        this._processor = new MiewRequestProcessor(miew);\n        this._source = undefined;\n        this._options = {};\n        this.requestOptions(options !== null && options !== void 0 ? options : {});\n    }\n    get busy() {\n        return this._processor.busy;\n    }\n    requestOptions(options) {\n        const { load } = options, rest = __rest(options, [\"load\"]);\n        if (load && this._source !== load) {\n            this._source = load;\n            this._options = rest;\n            this._processor.registerRequest(new MiewSourceRequest(load));\n            this._processor.registerRequest(new MiewOptionsRequest(rest));\n        }\n        else {\n            const diff = getOptionsDiffIgnoringRepresentationNames(this._options, rest);\n            this._options = rest;\n            this._processor.registerRequest(new MiewOptionsRequest(Object.assign(Object.assign({}, diff), { reps: rest.reps })));\n        }\n    }\n    dispose() {\n        this._processor.dispose();\n    }\n}\nexport default MiewProxy;\n","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { clonePropertyOptions } from './property-options';\nimport { getQueryStringEntries, getQueryStringFromEntries } from '../rest';\nconst representationNameQueryKeyRegExp = /^r\\.n\\.(\\d+)$/i;\nconst ignoredKeys = /^(bg\\.color)$/i;\nexport function filterIgnoredKeys(entries) {\n    return entries.filter((entry) => !ignoredKeys.test(entry.key));\n}\nexport function getRepresentationNamesFromEntries(entries) {\n    const repsNames = entries.filter((entry) => representationNameQueryKeyRegExp.test(entry.key));\n    const filtered = entries.filter((entry) => !representationNameQueryKeyRegExp.test(entry.key));\n    const names = [];\n    repsNames.forEach((repNameEntry) => {\n        const e = representationNameQueryKeyRegExp.exec(repNameEntry.key);\n        if (e === null || e === void 0 ? void 0 : e[1]) {\n            names[Number(e === null || e === void 0 ? void 0 : e[1])] = repNameEntry.value;\n        }\n    });\n    return {\n        names,\n        filteredEntries: filtered,\n    };\n}\nexport function getSearchRequestFromEntries(entries) {\n    const search = entries.find((o) => /^search$/i.test(o.key));\n    const filteredEntries = entries.filter((o) => !/^search$/i.test(o.key));\n    return {\n        search: search ? search.value : undefined,\n        filteredEntries,\n    };\n}\nexport function appendRepresentationNamesToEntries(entries, names) {\n    const result = [];\n    names.forEach((name, index) => {\n        if (name) {\n            result.push({\n                key: `r.n.${index}`,\n                value: name,\n            });\n        }\n    });\n    return result.concat(entries.slice());\n}\nexport function getMiewOptionsFromUrl(fromUrl) {\n    const entries = getQueryStringEntries();\n    const { names, filteredEntries: filteredAfterNames } = getRepresentationNamesFromEntries(entries);\n    const { search, filteredEntries } = getSearchRequestFromEntries(filteredAfterNames);\n    const filteredQuery = getQueryStringFromEntries(filterIgnoredKeys(filteredEntries), 'v', representationNameQueryKeyRegExp);\n    const options = clonePropertyOptions(fromUrl(filteredQuery));\n    options.searchRequest = search;\n    const { reps } = options, rest = __rest(options, [\"reps\"]);\n    if (reps) {\n        for (let r = 0; r < Math.min(reps.length, names.length); r += 1) {\n            reps[r].name = names[r];\n        }\n    }\n    return Object.assign(Object.assign({}, rest), { reps });\n}\nexport function appendRepresentationsNamesToUrl(url, representationsNames) {\n    try {\n        const urlObject = new URL(url);\n        urlObject.search = getQueryStringFromEntries(filterIgnoredKeys(appendRepresentationNamesToEntries(getQueryStringEntries(urlObject.search), representationsNames !== null && representationsNames !== void 0 ? representationsNames : [])), 'v', representationNameQueryKeyRegExp);\n        return urlObject.href;\n    }\n    catch (error) {\n        if (error instanceof Error) {\n            console.warn(error.message);\n        }\n        else {\n            console.warn(error);\n        }\n    }\n    return '';\n}\n","import { getRangesFromNumberArray } from '../rest';\nexport function getSelectedAtomsCount(miew) {\n    let count = 0;\n    miew._forEachComplexVisual((complexVisual) => {\n        count += complexVisual.getSelectionCount();\n    });\n    return count;\n}\nconst whiteSpaceCode = 32;\nexport function getAtomPositionDescription(atom) {\n    const position = [\n        atom.position.x.toFixed(2),\n        atom.position.y.toFixed(2),\n        atom.position.z.toFixed(2),\n    ].join(', ');\n    return `Coordinate: (${position})`;\n}\nexport function getAtomDescription(atom) {\n    const { residue } = atom;\n    const location = atom.location === whiteSpaceCode ? '' : String.fromCharCode(atom.location);\n    return `${atom.element.fullName} #${atom.serial}${location}: \\\n      ${getResidueDescription(residue)}.${atom.name}`;\n}\nexport function getResidueDescription(residue) {\n    const type = residue.getType();\n    const sequence = residue.getSequence();\n    const iCode = residue.getICode().trim();\n    const chain = residue.getChain();\n    return `${type._fullName}: ${chain.getName()}.${type.getName()}${sequence}${iCode}`;\n}\nexport function getChainDescription(chain) {\n    return `chain: ${chain.getName()}`;\n}\nexport function getMoleculeDescription(molecule) {\n    return `molecule: ${molecule.name}`;\n}\nexport function getSelectedResidues(miew) {\n    const selection = [];\n    miew._forEachComplexVisual((complexVisual) => {\n        complexVisual.forSelectedResidues((residue) => {\n            selection.push(residue);\n        });\n    });\n    return selection;\n}\nexport function getSelectorFromSelectedResidues(residues) {\n    const ranges = getRangesFromNumberArray(residues.map((residue) => residue._index));\n    if (!ranges.length) {\n        return 'none';\n    }\n    const rangesString = ranges\n        .map(([start, end]) => start === end\n        ? start.toString()\n        : [start.toString(), end.toString()].join(':'))\n        .join(',');\n    return `residx ${rangesString}`;\n}\n","import { create } from 'zustand';\nexport const useMoleculeStructureStore = create((set, get) => ({\n    loaded: false,\n    chains: [],\n    chainNames: [],\n    setChains(chains) {\n        set(() => ({\n            chains,\n            chainNames: chains.map((chain) => chain.chain.getName()),\n            loaded: true,\n        }));\n    },\n    getChain(chain) {\n        return get().chains.find((aChain) => aChain.chain.getName() === chain);\n    },\n}));\n","import { create } from 'zustand';\nexport const useSearchStore = create((set) => ({\n    search: undefined,\n    urlSearchRequest: undefined,\n    setSearch(search) {\n        set(() => ({ search }));\n    },\n    setUrlSearchRequest(urlSearchRequest) {\n        set(() => ({ urlSearchRequest }));\n    },\n}));\n","import { create } from 'zustand';\nimport { arraysShallowEquals } from '../helpers/rest';\nimport { getSelectorFromSelectedResidues } from '../helpers/miew/selection';\nimport { useCallback, useEffect } from 'react';\nimport { useMoleculeStructureStore } from './miew-molecule-structure-store';\nimport { useSearchStore } from './search-store';\nexport const useMiewSelectionStore = create((set, get) => ({\n    lastPick: undefined,\n    selectedAtomsCount: 0,\n    selectedResidues: [],\n    selector: '',\n    setLastPick(entity) {\n        set(() => ({ lastPick: entity }));\n    },\n    setSelectedAtomsCount(count) {\n        set(() => ({ selectedAtomsCount: count }));\n    },\n    getSelectedResidues() {\n        return get().selectedResidues;\n    },\n    setSelectedResidues(residues) {\n        set(() => ({\n            selectedResidues: residues.slice(),\n            selector: getSelectorFromSelectedResidues(residues),\n        }));\n    },\n    getSelector() {\n        return get().selector;\n    },\n    setData(data) {\n        set((current) => {\n            const { lastPick = current.lastPick, selectedAtomsCount = current.selectedAtomsCount, selectedResidues = current.selectedResidues, selector = getSelectorFromSelectedResidues(selectedResidues), } = data;\n            if (lastPick === current.lastPick &&\n                selectedAtomsCount === current.selectedAtomsCount &&\n                (selectedResidues === current.selectedResidues ||\n                    arraysShallowEquals(selectedResidues, current.selectedResidues)) &&\n                selector === current.selector) {\n                return current;\n            }\n            return data;\n        });\n    },\n}));\nexport function useSelectionByCodes() {\n    const { chains } = useMoleculeStructureStore();\n    const { setSelectedResidues } = useMiewSelectionStore();\n    return useCallback((codes) => {\n        let all = [];\n        if (codes && codes.length > 0) {\n            for (const chain of chains) {\n                all = all.concat(chain.sequence);\n            }\n            const str = all.reduce((r, item) => r.concat(item.letterCode), '');\n            const searchResult = (() => {\n                let result = [];\n                try {\n                    const regExp = new RegExp(`(${codes})`, 'ig');\n                    let e = regExp.exec(str);\n                    while (e) {\n                        result = result.concat(all.slice(e.index, e.index + e[1].length).map((o) => o.residue));\n                        e = regExp.exec(str);\n                    }\n                    return result;\n                }\n                catch (noopError) {\n                    // Noop\n                }\n                let idx = str.toUpperCase().indexOf(codes.toUpperCase());\n                while (idx >= 0) {\n                    result = result.concat(all.slice(idx, idx + codes.length).map((o) => o.residue));\n                    idx = str\n                        .toUpperCase()\n                        .indexOf(codes.toUpperCase(), idx + codes.length);\n                }\n                return result;\n            })();\n            setSelectedResidues(searchResult);\n            return searchResult;\n        }\n        return [];\n    }, [chains, setSelectedResidues]);\n}\nexport function useUrlRequestedSearch() {\n    const { urlSearchRequest, setUrlSearchRequest } = useSearchStore();\n    const { loaded } = useMoleculeStructureStore();\n    const search = useSelectionByCodes();\n    useEffect(() => {\n        if (loaded && urlSearchRequest && urlSearchRequest.length > 0) {\n            search(urlSearchRequest);\n            setUrlSearchRequest(undefined);\n        }\n    }, [loaded, urlSearchRequest, search]);\n}\n","import { MiewEntityType } from '../../@types/miew';\nexport function isMiewAtom(entity) {\n    return entity.type === MiewEntityType.atom;\n}\nexport function isMiewResidue(entity) {\n    return entity.type === MiewEntityType.residue;\n}\nexport function isMiewChain(entity) {\n    return entity.type === MiewEntityType.chain;\n}\nexport function isMiewMolecule(entity) {\n    return entity.type === MiewEntityType.molecule;\n}\nexport function getEntityFromPickEvent(event) {\n    var _a, _b, _c, _d;\n    if ((_a = event.obj) === null || _a === void 0 ? void 0 : _a.atom) {\n        return {\n            type: MiewEntityType.atom,\n            entity: event.obj.atom,\n        };\n    }\n    if ((_b = event.obj) === null || _b === void 0 ? void 0 : _b.residue) {\n        return {\n            type: MiewEntityType.residue,\n            entity: event.obj.residue,\n        };\n    }\n    if ((_c = event.obj) === null || _c === void 0 ? void 0 : _c.chain) {\n        return {\n            type: MiewEntityType.chain,\n            entity: event.obj.chain,\n        };\n    }\n    if ((_d = event.obj) === null || _d === void 0 ? void 0 : _d.molecule) {\n        return {\n            type: MiewEntityType.molecule,\n            entity: event.obj.molecule,\n        };\n    }\n    return undefined;\n}\nexport function isWater(residue) {\n    const type = residue.getType();\n    // eslint-disable-next-line @typescript-eslint/naming-convention,@typescript-eslint/no-unsafe-assignment\n    const { Flags } = type.constructor;\n    if (Flags === null || Flags === void 0 ? void 0 : Flags.WATER) {\n        return type.flags === Flags.WATER;\n    }\n    return false;\n}\n","import { isWater } from './entity';\nexport function getColorersForResidue(residue, representations) {\n    const hits = new Set();\n    residue.forEachAtom((atom) => {\n        representations.forEach((representation, repIndex) => {\n            if (representation.selector &&\n                typeof representation.selector.includesAtom === 'function' &&\n                representation.selector.includesAtom(atom)) {\n                hits.add(repIndex);\n            }\n        });\n    });\n    return [...hits]\n        .map((repIndex) => representations[repIndex].colorer)\n        .filter((colorer) => Boolean(colorer));\n}\nexport function getChainSequence(complex, chain, representations) {\n    const chainObject = complex.getChain(chain);\n    const sequence = [];\n    chainObject.forEachResidue((residue) => {\n        if (!isWater(residue)) {\n            const anyColorer = getColorersForResidue(residue, representations).pop();\n            let { letterCode } = residue.getType();\n            if (letterCode.length === 0) {\n                letterCode = '?';\n            }\n            sequence.push({\n                residue,\n                index: residue._index,\n                code: residue.getType().getName(),\n                letterCode,\n                name: residue.getType()._fullName,\n                colorer: anyColorer,\n                complex,\n            });\n        }\n    });\n    return {\n        chain: chainObject,\n        complex,\n        sequence,\n    };\n}\nexport function getChainSequencesFromComplex(complex, representations) {\n    return complex\n        .getChainNames()\n        .map((chain) => getChainSequence(complex, chain, representations));\n}\nexport function getChainSequences(miew) {\n    let result = [];\n    miew._forEachComplexVisual((complexVisual) => {\n        const representations = [];\n        for (let r = 0; r < complexVisual.repCount(); r += 1) {\n            const rep = complexVisual.repGet(r);\n            if (rep) {\n                representations.push(rep);\n            }\n        }\n        result = result.concat(getChainSequencesFromComplex(complexVisual.getComplex(), representations));\n    });\n    return result;\n}\n","import { useCallback, useEffect, useMemo } from 'react';\nimport { create } from 'zustand';\nimport { produce } from 'immer';\nimport { useThemeConfig } from './themes-store';\nimport { cloneRepresentation, getMiewRepresentations, createDefaultRepresentation, } from '../helpers/miew/representations';\nimport { clonePropertyOptions } from '../helpers/miew/property-options';\nimport { noop } from '../helpers/rest';\nimport MiewProxy from '../helpers/miew-proxy';\nimport { getMiewOptionsFromUrl, appendRepresentationsNamesToUrl, } from '../helpers/miew/options';\nimport { useMiewSelectionStore, useUrlRequestedSearch, } from './miew-selection-store';\nimport { getSelectedAtomsCount, getSelectedResidues, } from '../helpers/miew/selection';\nimport { getEntityFromPickEvent } from '../helpers/miew/entity';\nimport { getChainSequences } from '../helpers/miew/sequences';\nimport { useMoleculeStructureStore } from './miew-molecule-structure-store';\nimport { useSearchStore } from './search-store';\nexport const useMiewStore = create((set) => ({\n    miew: undefined,\n    miewProxy: undefined,\n    error: undefined,\n    options: {},\n    optionsInitializer: undefined,\n    setMiew(miew) {\n        set(() => ({\n            miew,\n            optionsInitializer: miew.constructor\n                .options,\n        }));\n    },\n    setMiewProxy(miewProxy) {\n        set(() => ({\n            miewProxy,\n        }));\n    },\n    setError(error) {\n        set(() => ({\n            error,\n        }));\n    },\n    setSource(source) {\n        set(produce((store) => {\n            store.options.source = source;\n        }));\n    },\n    setOptions(options) {\n        set(produce((store) => {\n            const currentSettings = store.options.settings;\n            store.options = clonePropertyOptions(options);\n            if (!store.options.settings) {\n                store.options.settings = currentSettings;\n            }\n            else if (currentSettings === null || currentSettings === void 0 ? void 0 : currentSettings.bg) {\n                store.options.settings.bg = currentSettings.bg;\n            }\n        }));\n    },\n    setBackground(background) {\n        set(produce((store) => {\n            var _a;\n            store.options.settings = (_a = store.options.settings) !== null && _a !== void 0 ? _a : {};\n            store.options.settings.bg = {\n                color: background,\n            };\n        }));\n    },\n    addRepresentation(representation) {\n        set(produce((store) => {\n            if (!store.options.reps) {\n                store.options.reps = [];\n            }\n            store.options.reps.push(representation);\n        }));\n    },\n    changeRepresentation(index, representation) {\n        set(produce((store) => {\n            if (!store.options.reps) {\n                store.options.reps = [];\n            }\n            if (store.options.reps.length <= index) {\n                store.options.reps.push(representation);\n            }\n            else {\n                store.options.reps[index] = representation;\n            }\n        }));\n    },\n    changeRepresentations(representations) {\n        set(produce((store) => {\n            var _a;\n            const result = representations.map(cloneRepresentation);\n            const current = ((_a = store.options.reps) !== null && _a !== void 0 ? _a : []).map(cloneRepresentation);\n            let changed = current.length !== result.length;\n            for (let c = 0; c < Math.max(current.length, result.length); c += 1) {\n                if (current[c] &&\n                    result[c] &&\n                    current[c].selector === result[c].selector) {\n                    result[c].name = current[c].name;\n                }\n                else {\n                    changed = true;\n                }\n            }\n            if (changed) {\n                store.options.reps = result;\n            }\n        }));\n    },\n    removeRepresentation(index) {\n        set(produce((store) => {\n            if (store.options.reps) {\n                store.options.reps.splice(index, 1);\n            }\n        }));\n    },\n}));\nexport function useMiew() {\n    return useMiewStore((state) => state.miew);\n}\nfunction useMiewOptions() {\n    return useMiewStore().options;\n}\nexport function useMiewRepresentations() {\n    const { reps } = useMiewOptions();\n    return useMemo(() => reps !== null && reps !== void 0 ? reps : [], [reps]);\n}\nexport function useAddMiewRepresentation() {\n    return useMiewStore((store) => store.addRepresentation);\n}\nexport function useChangeMiewRepresentation() {\n    return useMiewStore((store) => store.changeRepresentation);\n}\nexport function useRemoveMiewRepresentation() {\n    return useMiewStore((store) => store.removeRepresentation);\n}\nexport function useCreateMiewRepresentation() {\n    const callback = useAddMiewRepresentation();\n    return useCallback((representation) => {\n        const newRepresentation = representation !== null && representation !== void 0 ? representation : createDefaultRepresentation();\n        callback(newRepresentation);\n        return newRepresentation;\n    }, [callback]);\n}\n/**\n * Uses Miewer theme (sets Miew background color)\n */\nexport function useSynchronizeMiewBackgroundWithTheme() {\n    const theme = useThemeConfig();\n    const { setBackground } = useMiewStore();\n    useEffect(() => {\n        setBackground(theme.background);\n    }, [theme, setBackground]);\n}\n/**\n * Uses miew options from url\n */\nfunction useSynchronizedUrlOptions() {\n    const fromUrl = useMiewStore((state) => { var _a; return (_a = state.optionsInitializer) === null || _a === void 0 ? void 0 : _a.fromURL; });\n    const { setOptions } = useMiewStore();\n    const { setUrlSearchRequest } = useSearchStore();\n    useEffect(() => {\n        if (fromUrl) {\n            const options = getMiewOptionsFromUrl(fromUrl);\n            if (options.searchRequest) {\n                setUrlSearchRequest(options.searchRequest);\n                delete options.searchRequest;\n            }\n            if (options.load) {\n                options.source = options.load;\n                setOptions(options);\n            }\n            else {\n                setOptions({\n                    load: '1CRN',\n                    preset: 'macro',\n                });\n            }\n        }\n    }, [fromUrl, getMiewOptionsFromUrl, setOptions, setUrlSearchRequest]);\n}\n/**\n * Listens Miew events (loading, building representations)\n */\nfunction useMiewEvents() {\n    const { miew } = useMiewStore();\n    const { setData } = useMiewSelectionStore();\n    const { changeRepresentations, setSource } = useMiewStore();\n    const { setChains } = useMoleculeStructureStore();\n    useUrlRequestedSearch();\n    useEffect(() => {\n        if (miew) {\n            const onMiewLoading = (event) => {\n                setSource(event.source);\n            };\n            const onMiewBuildingDone = () => {\n                setChains(getChainSequences(miew));\n                changeRepresentations(getMiewRepresentations(miew));\n            };\n            const onMiewPick = (event) => {\n                setData({\n                    selectedAtomsCount: getSelectedAtomsCount(miew),\n                    lastPick: getEntityFromPickEvent(event),\n                    selectedResidues: getSelectedResidues(miew),\n                });\n            };\n            const onMiewRepresentationsChanged = () => {\n                setChains(getChainSequences(miew));\n            };\n            miew.addEventListener('loading', onMiewLoading);\n            miew.addEventListener('buildingDone', onMiewBuildingDone);\n            miew.addEventListener('newpick', onMiewPick);\n            miew.addEventListener('repChanged', onMiewRepresentationsChanged);\n            miew.addEventListener('repAdded', onMiewRepresentationsChanged);\n            miew.addEventListener('repRemoved', onMiewRepresentationsChanged);\n            return () => {\n                miew.removeEventListener('loading', onMiewLoading);\n                miew.removeEventListener('buildingDone', onMiewBuildingDone);\n                miew.removeEventListener('newpick', onMiewPick);\n                miew.removeEventListener('repChanged', onMiewRepresentationsChanged);\n                miew.removeEventListener('repAdded', onMiewRepresentationsChanged);\n                miew.removeEventListener('repRemoved', onMiewRepresentationsChanged);\n            };\n        }\n        return noop;\n    }, [miew, setSource, changeRepresentations, setData]);\n}\n/**\n * Applies options set by user via Miewer UI\n */\nfunction useSynchronizedUserOptions() {\n    const { miew, miewProxy: proxy, setMiewProxy: setProxy } = useMiewStore();\n    useEffect(() => {\n        if (miew) {\n            const aProxy = new MiewProxy(miew);\n            setProxy(aProxy);\n            return () => {\n                setProxy(undefined);\n                aProxy.dispose();\n            };\n        }\n        return noop;\n    }, [miew, setProxy]);\n    const options = useMiewOptions();\n    useEffect(() => {\n        if (proxy) {\n            proxy.requestOptions(options);\n        }\n        return noop;\n    }, [proxy, options]);\n}\nfunction useSynchronizedSelection() {\n    const { selector, setSelectedAtomsCount } = useMiewSelectionStore();\n    const miew = useMiew();\n    useEffect(() => {\n        if (miew) {\n            miew.select(selector, false);\n            setSelectedAtomsCount(getSelectedAtomsCount(miew));\n        }\n    }, [selector, miew, setSelectedAtomsCount]);\n}\nexport function useSynchronizedMiewOptions() {\n    // --- Synchronizing global Miewer theme ---\n    useSynchronizeMiewBackgroundWithTheme();\n    // -----------------------------------------\n    // --- Synchronizing events from router  ---\n    useSynchronizedUrlOptions();\n    // -----------------------------------------\n    // --- Synchronizing events from miew ------\n    // (in case of manipulating the miew options\n    // via miew-cli, items selection etc.)\n    useMiewEvents();\n    // -----------------------------------------\n    // ----- Synchronizing Miewer options ------\n    // (changing miew settings via Miewer UI)\n    useSynchronizedUserOptions();\n    // -----------------------------------------\n    // ------- Synchronizing selection ---------\n    useSynchronizedSelection();\n    return useMiewOptions();\n}\nexport function useDisableMiewHotKeys() {\n    const miew = useMiew();\n    return useCallback(() => {\n        if (miew) {\n            miew.enableHotKeys(false);\n        }\n    }, [miew]);\n}\nexport function useEnableMiewHotKeys() {\n    const miew = useMiew();\n    return useCallback(() => {\n        if (miew) {\n            miew.enableHotKeys(true);\n        }\n    }, [miew]);\n}\nexport function useRepresentationNames() {\n    const options = useMiewOptions();\n    const { reps } = options;\n    const cached = useMemo(() => (reps !== null && reps !== void 0 ? reps : []).map((rep) => { var _a; return (_a = rep.name) !== null && _a !== void 0 ? _a : ''; }).join('\\n'), [reps]);\n    return useMemo(() => cached.split('\\n').map((o) => (o.length ? o : undefined)), [cached]);\n}\nexport function useUrlGenerator() {\n    const miew = useMiew();\n    const names = useRepresentationNames();\n    return useCallback(() => {\n        if (miew) {\n            return appendRepresentationsNamesToUrl(miew.getURL({ settings: false, view: true, compact: false }), names);\n        }\n        return '';\n    }, [miew, names, appendRepresentationsNamesToUrl]);\n}\nexport function useScriptGenerator() {\n    const miew = useMiew();\n    return useCallback(() => { var _a; return (_a = miew === null || miew === void 0 ? void 0 : miew.getScript({ settings: false, view: true, compact: false })) !== null && _a !== void 0 ? _a : ''; }, [miew]);\n}\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useLayoutEffect, useRef } from 'react';\nimport classNames from 'classnames';\nimport { initializeMiew } from '../../helpers/miew/lazy-initialization';\nimport { useMiewStore, useSynchronizedMiewOptions, } from '../../stores/miew-store';\nimport useInitializationOptions from './use-initialization-options';\nfunction MiewRenderer(props) {\n    var _a;\n    useSynchronizedMiewOptions();\n    const { className, style } = props;\n    const ref = useRef(null);\n    const { miew, error, setMiew, setError } = useMiewStore();\n    const initializationOptions = useInitializationOptions((_a = ref.current) !== null && _a !== void 0 ? _a : undefined);\n    useLayoutEffect(() => {\n        if (initializationOptions) {\n            initializeMiew(initializationOptions)\n                .then(setMiew)\n                .catch((reason) => {\n                setError(reason.message);\n            });\n        }\n    }, [setError, setMiew, initializationOptions]);\n    return (_jsxs(\"div\", { className: className, style: style, children: [_jsx(\"div\", { ref: ref, className: \"mw-full-size overflow-hidden\" }), !error && !miew && (_jsx(\"div\", { className: classNames('mw-full-size', 'mw-centered'), children: _jsx(\"span\", { className: classNames('mw-miew-message', 'mw-text-faded'), children: \"Initialization...\" }) })), error && (_jsx(\"div\", { className: classNames('mw-error', 'mw-full-size', 'mw-centered'), children: _jsx(\"span\", { className: \"mw-miew-message\", children: error }) }))] }));\n}\nexport default MiewRenderer;\n","export var MiewerPanel;\n(function (MiewerPanel) {\n    MiewerPanel[\"terminal\"] = \"terminal\";\n    MiewerPanel[\"representations\"] = \"representations\";\n    MiewerPanel[\"sequences\"] = \"sequences\";\n})(MiewerPanel || (MiewerPanel = {}));\nexport const miewerPanelNames = {\n    [MiewerPanel.terminal]: 'Terminal',\n    [MiewerPanel.representations]: 'Layers',\n    [MiewerPanel.sequences]: 'Chain sequences',\n};\nexport const miewerPanelShortNames = {\n    [MiewerPanel.terminal]: 'Terminal',\n    [MiewerPanel.representations]: 'Layers',\n    [MiewerPanel.sequences]: 'Sequences',\n};\n","import { useEffect, useState } from 'react';\nimport { useThemeConfig } from '../../stores/themes-store';\nexport default function useInitializationOptions(container) {\n    const [initializationOptions, setInitializationOptions] = useState();\n    const theme = useThemeConfig();\n    useEffect(() => {\n        if (container &&\n            theme &&\n            (!initializationOptions || initializationOptions.container !== container)) {\n            setInitializationOptions({\n                container,\n                settings: {\n                    bg: {\n                        color: theme.background,\n                    },\n                    axes: false,\n                    fps: false,\n                },\n            });\n        }\n    }, [container, theme, initializationOptions]);\n    return initializationOptions;\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nexport function initializeMiew(options) {\n    return __awaiter(this, void 0, void 0, function* () {\n        if (!options.container) {\n            throw new Error('Error initializing miew: container is missing');\n        }\n        const module = yield import('miew');\n        const miew = new module.Miew(options);\n        if (!miew.init()) {\n            throw new Error('Error initializing Miew');\n        }\n        miew.run();\n        return miew;\n    });\n}\n","import { isCssNumberValue, parseCssNumberValue } from '../../helpers/rest';\nexport function isFixedSize(size) {\n    return (size !== undefined &&\n        (typeof size === 'number' || isCssNumberValue(size, 'px')));\n}\nexport function isPercentSize(size) {\n    return typeof size === 'string' && isCssNumberValue(size, '%');\n}\nexport function isFlexSize(size) {\n    return (typeof size === 'string' &&\n        (isCssNumberValue(size, '*', '%') || /^(\\*|fr)$/i.test(size)));\n}\nexport function isAutoSize(size) {\n    return typeof size === 'string' && /^auto$/i.test(size);\n}\nexport function getSizeInfo(size) {\n    return {\n        value: getSizeValuePart(size),\n        fixed: isFixedSize(size),\n        percent: isPercentSize(size),\n        flex: isFlexSize(size),\n        auto: isAutoSize(size),\n        size,\n    };\n}\nexport function getSizeValuePart(size) {\n    if (size === undefined) {\n        return 0;\n    }\n    if (typeof size === 'number') {\n        return size;\n    }\n    if (!Number.isNaN(Number(size))) {\n        return Number(size);\n    }\n    const value = parseCssNumberValue(size, 'px', '%', '*', 'fr');\n    if (value !== undefined) {\n        return value;\n    }\n    if (/^(\\*|fr)$/i.test(size)) {\n        return 1;\n    }\n    if (isFlexSize(size)) {\n        return 1;\n    }\n    return 0;\n}\nexport function getFixedSize(size, totalSize, flexBase) {\n    var _a, _b, _c;\n    if (size === undefined) {\n        return undefined;\n    }\n    if (typeof size === 'number') {\n        return size;\n    }\n    const getValue = (units, fn) => {\n        const value = parseCssNumberValue(size, ...units);\n        if (value !== undefined) {\n            return typeof fn === 'function' ? fn(value) : value;\n        }\n        return undefined;\n    };\n    return ((_c = (_b = (_a = getValue(['px'])) !== null && _a !== void 0 ? _a : getValue(['%'], (o) => totalSize * (o / 100.0))) !== null && _b !== void 0 ? _b : getValue(['*', 'fr'], (o) => o * flexBase)) !== null && _c !== void 0 ? _c : (size === '*' ? flexBase : 0));\n}\nexport function parseGridSize(size, minSize) {\n    const max = (() => {\n        if (size === undefined) {\n            return 'auto';\n        }\n        if (typeof size === 'number') {\n            return `${size}px`;\n        }\n        if (size === 'auto') {\n            return size;\n        }\n        if (size === '*') {\n            return '1fr';\n        }\n        const e = /^(\\d+(\\.\\d+)?)(fr|\\*)$/i.exec(size);\n        if (e === null || e === void 0 ? void 0 : e[1]) {\n            return `${e[1]}fr`;\n        }\n        if (/\\d+(\\.\\d+)?%$/.test(size)) {\n            return size;\n        }\n        return '1fr';\n    })();\n    const min = (() => {\n        if (typeof minSize === 'number') {\n            return `${minSize}px`;\n        }\n        return undefined;\n    })();\n    if (min && min !== max) {\n        return `minmax(${minSize}px, ${max})`;\n    }\n    return max;\n}\nexport function getFlexStyle(childSize, direction) {\n    var _a;\n    if (!childSize) {\n        return undefined;\n    }\n    const { size, minSize } = childSize;\n    if (typeof size === 'string') {\n        const e = /^(\\d+(\\.\\d+)?)?(fr|\\*)$/i.exec(size);\n        if (e) {\n            const grow = (_a = e[1]) !== null && _a !== void 0 ? _a : 1;\n            const minSizeValue = minSize ? `${minSize}px` : 'auto';\n            return { flex: `${grow} 1 ${minSizeValue}` };\n        }\n    }\n    switch (direction) {\n        case 'horizontal':\n            return { width: size, minWidth: minSize };\n        case 'vertical':\n        default:\n            return { height: size, minHeight: minSize };\n    }\n}\nexport function shallowCopySizes(sizes) {\n    return sizes.map((config) => ({\n        key: config.key,\n        index: config.index,\n        size: config.size,\n        minSize: config.minSize,\n    }));\n}\nexport function normalizeSizes(sizes, total) {\n    const flexes = sizes.reduce((r, s) => r + (isFlexSize(s.size) ? getSizeValuePart(s.size) : 0), 0);\n    const flexTotal = total -\n        sizes.reduce((r, s) => { var _a; return r + ((_a = getFixedSize(s.size, total, 0)) !== null && _a !== void 0 ? _a : 0); }, 0);\n    const flexBase = flexes === 0 ? 0 : flexTotal / flexes;\n    return sizes.map((config) => { var _a; return (_a = getFixedSize(config.size, total, flexBase)) !== null && _a !== void 0 ? _a : 0; });\n}\n","export default function SpaceContainer() {\n    return null;\n}\n","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport React, { Children } from 'react';\nimport classNames from 'classnames';\nimport { shallowCopySizes, parseGridSize, getFlexStyle } from '../utilities';\nimport SpaceContainer from './space-container';\nexport function childrenSizesHoldSameKeys(set1, set2) {\n    return !set1.some((item1) => Boolean(item1.key) &&\n        !set2.find((item2) => Boolean(item2.key) && item1.key === item2.key));\n}\nexport function recoverSizesByKeys(sizes, original) {\n    const copy = shallowCopySizes(sizes);\n    for (const size of copy) {\n        const previous = original.find((o) => Boolean(o.key) && Boolean(size.key) && o.key === size.key);\n        if (previous) {\n            size.size = previous.size;\n            size.minSize = previous.minSize;\n        }\n    }\n    return copy;\n}\nexport function childrenSizesSetsEqual(set1, set2) {\n    if (set1.length === set2.length) {\n        for (let i = 0; i < set1.length; i += 1) {\n            if (set1[i].size !== set2[i].size ||\n                set1[i].minSize !== set2[i].minSize) {\n                return false;\n            }\n        }\n        return true;\n    }\n    return false;\n}\nexport function extractChildSizeConfiguration(child, defaultSize = 'auto') {\n    if (child && typeof child !== 'boolean') {\n        if (child.type === SpaceContainer) {\n            return { size: '*', minSize: 0 };\n        }\n        const { size, stretch, minSize } = child.props;\n        if (size !== undefined) {\n            return { size, minSize: minSize !== null && minSize !== void 0 ? minSize : 0 };\n        }\n        if (stretch) {\n            return { size: '*', minSize: minSize !== null && minSize !== void 0 ? minSize : 0 };\n        }\n    }\n    return { size: defaultSize, minSize: 5 };\n}\nexport function createChildSizeConfig(child, index, defaultSize = 'auto') {\n    var _a;\n    let key;\n    if (typeof child !== 'boolean' && child) {\n        key = (_a = child.key) !== null && _a !== void 0 ? _a : undefined;\n    }\n    return Object.assign({ key: key !== null && key !== void 0 ? key : `child-${index}`, index }, extractChildSizeConfiguration(child, defaultSize));\n}\nexport function getChildrenSizes(children, defaultSize) {\n    const sizes = [];\n    Children.forEach(children, (child, index) => {\n        sizes.push(createChildSizeConfig(child, index, defaultSize));\n    });\n    return sizes;\n}\nexport function getChildSizeConfigByKey(sizes, key) {\n    return sizes.find((o) => Boolean(o.key) && Boolean(key) && o.key === key);\n}\nexport function getChildSizeConfigGenerator(sizes) {\n    return (child, index) => {\n        var _a, _b;\n        return (_b = (child && typeof child !== 'boolean'\n            ? getChildSizeConfigByKey(sizes, (_a = child.key) !== null && _a !== void 0 ? _a : undefined)\n            : undefined)) !== null && _b !== void 0 ? _b : sizes[index];\n    };\n}\nexport function getSizeGridIndex(size) {\n    var _a;\n    return typeof size.key === 'string'\n        ? size.key\n        : `child-${(_a = size.key) !== null && _a !== void 0 ? _a : size.index}`;\n}\nexport function getGridStyle(sizes, direction) {\n    const template = sizes.map((aSize) => `[${getSizeGridIndex(aSize)}] ${parseGridSize(aSize.size, aSize.minSize)}`);\n    switch (direction) {\n        case 'vertical':\n            return {\n                gridTemplateRows: template.join(' '),\n            };\n        case 'horizontal':\n            return {\n                gridTemplateColumns: template.join(' '),\n            };\n        default:\n            return undefined;\n    }\n}\nexport function setGridStyle(element, sizes, direction) {\n    const style = getGridStyle(sizes, direction);\n    const { gridTemplateRows = '', gridTemplateColumns = '' } = style !== null && style !== void 0 ? style : {};\n    element.style.gridTemplateRows = gridTemplateRows;\n    element.style.gridTemplateColumns = gridTemplateColumns;\n    return style;\n}\nexport function getGridTemplateProperty(direction) {\n    switch (direction) {\n        case 'horizontal':\n            return 'gridColumn';\n        case 'vertical':\n        default:\n            return 'gridRow';\n    }\n}\nexport function getDirection(props) {\n    const { direction = 'horizontal' } = props;\n    return direction;\n}\nexport function getContainerType(props) {\n    const { grid, flex } = props;\n    if (grid === true) {\n        return {\n            grid: true,\n            flex: false,\n        };\n    }\n    return {\n        grid: false,\n        flex: flex !== null && flex !== void 0 ? flex : 'start',\n    };\n}\nexport function getContainerClassName(props) {\n    const { className } = props;\n    const { grid, flex } = getContainerType(props);\n    return classNames(className, 'mw-container', getDirection(props), {\n        'mw-grid': grid,\n        'mw-flex': flex,\n    }, flex && typeof flex !== 'boolean' ? `mw-flex-${flex}` : false);\n}\nexport function mergeStyles(...style) {\n    const filtered = style.filter((aStyle) => aStyle !== undefined);\n    if (filtered.length === 0) {\n        return undefined;\n    }\n    if (filtered.length === 1) {\n        return filtered[0];\n    }\n    const [a, b, ...rest] = filtered;\n    return mergeStyles(Object.assign(Object.assign({}, a), b), ...rest);\n}\nexport function mapContainerChild(child, props, size) {\n    const { grid } = getContainerType(props);\n    const direction = getDirection(props);\n    if (!child) {\n        return null;\n    }\n    if (typeof child === 'boolean') {\n        return child;\n    }\n    const _a = child.props, { style } = _a, rest = __rest(_a, [\"style\"]);\n    const modifiedStyle = (() => {\n        var _a;\n        if (size) {\n            if (grid) {\n                return Object.assign(Object.assign({}, (style !== null && style !== void 0 ? style : {})), { [getGridTemplateProperty(direction)]: getSizeGridIndex(size) });\n            }\n            return Object.assign(Object.assign({}, (style !== null && style !== void 0 ? style : {})), ((_a = getFlexStyle(size, direction)) !== null && _a !== void 0 ? _a : {}));\n        }\n        return style;\n    })();\n    return React.cloneElement(child, Object.assign(Object.assign({}, rest), { style: modifiedStyle }));\n}\n","import { useCallback, useEffect, useState } from 'react';\nimport { childrenSizesHoldSameKeys, childrenSizesSetsEqual, getChildrenSizes, recoverSizesByKeys, } from '../utilities';\nexport function useChildrenSize(children, defaultSize) {\n    const [data, setData] = useState({\n        sizes: getChildrenSizes(children, defaultSize),\n        children,\n    });\n    const setChildSizes = useCallback((newSizes) => {\n        setData((current) => ({\n            sizes: newSizes,\n            children: current.children,\n        }));\n    }, [setData]);\n    const { sizes, children: synchronizedChildren } = data;\n    useEffect(() => {\n        const newSizes = getChildrenSizes(children, defaultSize);\n        setData((current) => {\n            const sameKeys = childrenSizesHoldSameKeys(newSizes, current.sizes);\n            const recovered = sameKeys\n                ? recoverSizesByKeys(newSizes, current.sizes)\n                : newSizes;\n            if (!childrenSizesSetsEqual(recovered, current.sizes)) {\n                return {\n                    sizes: recovered,\n                    children,\n                };\n            }\n            return {\n                sizes: current.sizes,\n                children,\n            };\n        });\n    }, [children, defaultSize, setData]);\n    return [sizes, synchronizedChildren, setChildSizes];\n}\n","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport React from 'react';\nimport { getChildSizeConfigGenerator, getContainerClassName, mapContainerChild, } from './utilities';\nimport SpaceContainer from './space-container';\nimport { useContainerStyle } from './hooks/use-container-style';\nfunction Container(props) {\n    const { children } = props;\n    const className = getContainerClassName(props);\n    const [style, sizes] = useContainerStyle(props);\n    const getChildSize = getChildSizeConfigGenerator(sizes);\n    return (_jsx(\"div\", { className: className, style: style, children: React.Children.map(children, (child, index) => mapContainerChild(child, props, getChildSize(child, index))) }));\n}\nexport { SpaceContainer };\nexport default Container;\n","import { useMemo } from 'react';\nimport { useChildrenSize } from './use-children-sizes';\nimport { getContainerType, getDirection, getGridStyle, mergeStyles, } from '../utilities';\nexport function useContainerStyle(props) {\n    const { grid } = getContainerType(props);\n    const { style, children, gridSizes, defaultChildSize = 'auto' } = props;\n    const [childrenSizes] = useChildrenSize(children !== null && children !== void 0 ? children : [], defaultChildSize);\n    const sizes = gridSizes !== null && gridSizes !== void 0 ? gridSizes : childrenSizes;\n    const direction = getDirection(props);\n    return useMemo(() => {\n        const mergedStyle = mergeStyles(grid ? getGridStyle(sizes, direction) : undefined, style);\n        return [mergedStyle, sizes];\n    }, [style, direction, grid, sizes]);\n}\n","export function isPanelActionDivider(action) {\n    return 'type' in action && action.type === 'divider';\n}\nexport function isPanelActionContainer(action) {\n    return (!isPanelActionDivider(action) &&\n        Boolean(action.title) &&\n        'actions' in action &&\n        Array.isArray(action.actions));\n}\nexport function isPanelActionConfig(action) {\n    return !isPanelActionDivider(action) && !isPanelActionContainer(action);\n}\nexport function findActionByKey(key, actions) {\n    for (const action of actions) {\n        if (isPanelActionConfig(action) && action.key === key) {\n            return action;\n        }\n        if (isPanelActionContainer(action)) {\n            if (action.key === key) {\n                return undefined;\n            }\n            const child = findActionByKey(key, action.actions);\n            if (child) {\n                return child;\n            }\n        }\n    }\n    return undefined;\n}\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useMemo } from 'react';\nimport { isPanelActionConfig, isPanelActionDivider, } from '../../../helpers/panels';\nimport { CheckOutlined } from '@ant-design/icons';\nfunction reduceActionsTree(trees) {\n    return trees.reduce((result, items) => [...(result !== null && result !== void 0 ? result : []), ...(items !== null && items !== void 0 ? items : [])], []);\n}\nfunction extractActionsTree(action) {\n    if (isPanelActionDivider(action)) {\n        return [{ type: 'divider' }];\n    }\n    if (isPanelActionConfig(action)) {\n        const { icon: Icon, key, title, checked, disabled } = action;\n        return [\n            {\n                key,\n                label: (_jsxs(\"span\", { className: \"mw-panel-action-menu-item\", children: [_jsxs(\"span\", { className: \"mw-panel-action-menu-item-title\", children: [Icon && _jsx(Icon, { style: { marginRight: 5, fontSize: 'larger' } }), title] }), _jsx(\"span\", { children: checked && _jsx(CheckOutlined, { style: { marginLeft: 5 } }) })] })),\n                disabled,\n            },\n        ];\n    }\n    const { actions, icon: Icon, title, key } = action;\n    if (actions.length > 0) {\n        return [\n            {\n                key,\n                label: title,\n                icon: Icon && _jsx(Icon, {}),\n                children: reduceActionsTree(actions.map(extractActionsTree)),\n            },\n        ];\n    }\n}\nexport default function useActionsTree(rootAction) {\n    return useMemo(() => reduceActionsTree(rootAction.actions.map(extractActionsTree)), [rootAction]);\n}\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useCallback, useMemo } from 'react';\nimport { Button, Dropdown } from 'antd';\nimport { findActionByKey, isPanelActionConfig } from '../../../helpers/panels';\nimport useActionsTree from './use-actions-tree';\nfunction PanelAction(props) {\n    var _a, _b;\n    const { className, style, action } = props;\n    if (isPanelActionConfig(action)) {\n        const { key, title, disabled, icon: Icon, onAction } = action;\n        return (_jsxs(Button, { disabled: disabled, type: \"text\", className: className, style: style, onClick: onAction, children: [Icon && _jsx(Icon, {}), title, (_a = (!Icon && !title)) !== null && _a !== void 0 ? _a : key] }));\n    }\n    const items = useActionsTree(action);\n    const onAction = useCallback((event) => {\n        const execute = findActionByKey(event.key, [action]);\n        if (execute) {\n            execute.onAction();\n        }\n    }, [action]);\n    const menu = useMemo(() => ({\n        items,\n        onClick: onAction,\n    }), [items, onAction]);\n    const { key, disabled, icon: Icon, title } = action;\n    return (_jsx(Dropdown, { disabled: action.disabled, menu: menu, trigger: ['click'], overlayClassName: \"mw-panel-action-menu-container\", children: _jsxs(Button, { disabled: disabled, type: \"text\", className: className, style: style, children: [Icon && _jsx(Icon, {}), title, (_b = (!Icon && !title)) !== null && _b !== void 0 ? _b : key] }) }));\n}\nexport default PanelAction;\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport classNames from 'classnames';\nimport { Button } from 'antd';\nimport { CloseOutlined } from '@ant-design/icons';\nimport PanelAction from './panel-action';\nfunction Panel(props) {\n    var _a;\n    const { className, title, titleClassName, titleStyle, onClose, actions, children, style, bordered, noPadding, transparent, } = props;\n    const closable = typeof onClose === 'function';\n    return (_jsxs(\"div\", { className: classNames('mw-panel', className, {\n            'mw-panel-bordered': bordered,\n            'mw-panel-no-padding': noPadding,\n            'mw-panel-transparent': transparent,\n        }), style: style, children: [((_a = title !== null && title !== void 0 ? title : closable) !== null && _a !== void 0 ? _a : actions) && (_jsxs(\"div\", { className: \"mw-panel-header\", children: [_jsx(\"div\", { className: classNames('mw-panel-title', titleClassName), style: titleStyle, children: title }), _jsxs(\"div\", { className: \"mw-panel-actions\", children: [(actions !== null && actions !== void 0 ? actions : []).map((action) => (_jsx(PanelAction, { className: \"mw-panel-action\", action: action }, action.key))), actions && actions.length > 0 && closable && (_jsx(\"div\", { className: \"mw-panel-action-divider\" })), closable && (_jsx(Button, { className: \"mw-panel-action mw-panel-close\", type: \"text\", onClick: onClose, children: _jsx(CloseOutlined, {}) }))] })] })), _jsx(\"div\", { className: \"mw-panel-content\", children: children })] }));\n}\nexport default Panel;\n","import { useCallback } from 'react';\nimport { create } from 'zustand';\nimport { MiewerPanel } from '../@types/components/panels';\nimport { createLocalSettings } from '../helpers/rest';\nconst { read, save } = createLocalSettings('miewer-panels', [\n    MiewerPanel.representations,\n    MiewerPanel.sequences,\n]);\nexport const useMiewerPanelsStore = create((set, get) => ({\n    panels: new Set(read()),\n    setPanelVisible(panel, visible) {\n        const panels = new Set([...get().panels]\n            .filter((p) => p !== panel)\n            .concat(visible === undefined || visible ? [panel] : []));\n        save([...panels]);\n        set({ panels });\n    },\n    togglePanel(panel) {\n        const visible = get().panels.has(panel);\n        get().setPanelVisible(panel, !visible);\n    },\n}));\nexport function usePanelVisible(panel) {\n    return useMiewerPanelsStore((store) => store.panels).has(panel);\n}\nexport function isTerminalVisible() {\n    return usePanelVisible(MiewerPanel.terminal);\n}\nexport function isRepresentationsVisible() {\n    return usePanelVisible(MiewerPanel.representations);\n}\nexport function useTogglePanel(panel) {\n    const togglePanel = useMiewerPanelsStore((store) => store.togglePanel);\n    return useCallback(() => {\n        togglePanel(panel);\n    }, [togglePanel, panel]);\n}\nexport function useClosePanel(panel) {\n    const setPanelVisible = useMiewerPanelsStore((store) => store.setPanelVisible);\n    return useCallback(() => {\n        setPanelVisible(panel, false);\n    }, [setPanelVisible, panel]);\n}\n","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { useMemo } from 'react';\nimport Panel from '../panel';\nimport { miewerPanelNames } from '../../../@types/components/panels';\nimport { useClosePanel } from '../../../stores/miewer-panels-store';\nfunction MiewerPanel(props) {\n    const { panel, children, title } = props, rest = __rest(props, [\"panel\", \"children\", \"title\"]);\n    const closePanel = useClosePanel(panel);\n    const panelTitle = useMemo(() => {\n        if (title) {\n            return title;\n        }\n        return miewerPanelNames[panel];\n    }, [panel, title]);\n    return (_jsx(Panel, Object.assign({}, rest, { title: panelTitle, onClose: closePanel, children: children })));\n}\nexport default MiewerPanel;\n","import { createContext } from 'react';\nimport { noop } from '../../../../helpers/rest';\nexport const resizerContext = createContext({\n    setSizes: noop,\n    sizes: [],\n});\n","import { normalizeSizes, shallowCopySizes, getSizeInfo } from '../utilities';\nimport { getGreatestCommonDivisor } from '../../../helpers/rest';\nfunction isIndex(o) {\n    return o !== undefined && !Number.isNaN(Number(o));\n}\nexport function getResizeSession(divider, sizes, getSize) {\n    const { parentElement } = divider;\n    const previousIdx = divider.dataset.previous;\n    const nextIdx = divider.dataset.next;\n    const children = [];\n    const dividers = new Set();\n    if (!parentElement || !isIndex(previousIdx) || !isIndex(nextIdx)) {\n        return undefined;\n    }\n    const { children: parentElementChildren } = parentElement;\n    for (let i = 0; i < parentElementChildren.length; i += 1) {\n        const child = parentElementChildren[i];\n        if (!(child instanceof HTMLElement)) {\n            return undefined;\n        }\n        children.push(child);\n        if (child.dataset.divider) {\n            dividers.add(i);\n        }\n    }\n    if (children.length > Number(previousIdx) &&\n        children.length > Number(nextIdx)) {\n        return {\n            calculatedSizes: children.map(getSize),\n            calculatedMinSizes: sizes.map((config) => { var _a; return (_a = (config ? config.minSize : undefined)) !== null && _a !== void 0 ? _a : 0; }),\n            previousId: Number(previousIdx),\n            nextId: Number(nextIdx),\n            grid: parentElement,\n            dividers,\n            sizes: shallowCopySizes(sizes),\n            sizesInfo: sizes.map((config) => getSizeInfo(config.size)),\n            initialSizes: shallowCopySizes(sizes),\n        };\n    }\n    return undefined;\n}\nexport function findIndexOfElementToResize(session, from, direction, checkSize) {\n    if (direction === 0) {\n        return from;\n    }\n    const inc = Math.sign(direction);\n    let index = from;\n    const { calculatedSizes, calculatedMinSizes, sizesInfo } = session;\n    const check = (idx) => checkSize && calculatedSizes[idx] <= calculatedMinSizes[idx];\n    while (session.dividers.has(index) || sizesInfo[index].auto || check(index)) {\n        if (index >= calculatedSizes.length - 1 || index === 0) {\n            return undefined;\n        }\n        index += inc;\n    }\n    return index;\n}\nexport function getResizeSessionSizesAfterDrag(session, delta) {\n    const { calculatedSizes, calculatedMinSizes } = session;\n    const previousId = findIndexOfElementToResize(session, session.previousId, -1, delta < 0);\n    const nextId = findIndexOfElementToResize(session, session.nextId, 1, delta > 0);\n    if (previousId === undefined || nextId === undefined) {\n        return session.sizes;\n    }\n    let previousSize = calculatedSizes[previousId];\n    let nextSize = calculatedSizes[nextId];\n    const previousMinSize = calculatedMinSizes[previousId];\n    const nextMinSize = calculatedMinSizes[nextId];\n    const total = previousSize + nextSize;\n    previousSize = Math.max(previousMinSize, previousSize + delta);\n    nextSize = Math.max(nextMinSize, total - previousSize);\n    previousSize = Math.max(previousMinSize, total - nextSize);\n    const newSizes = shallowCopySizes(session.sizes);\n    newSizes[previousId].size = previousSize;\n    newSizes[nextId].size = nextSize;\n    return newSizes;\n}\nexport function getResizeSessionFinalSizes(session, getSize) {\n    const { sizes, initialSizes, grid } = session;\n    const total = getSize(grid);\n    const normalized = normalizeSizes(sizes, total);\n    const flexSizes = initialSizes\n        .map((config, idx) => (getSizeInfo(config.size).flex ? normalized[idx] : 0))\n        .filter((o) => o > 0);\n    const gcd = getGreatestCommonDivisor(...flexSizes);\n    const result = initialSizes.map((config, idx) => {\n        const info = getSizeInfo(config.size);\n        if (info.percent) {\n            return Object.assign(Object.assign({}, config), { size: `${Math.floor((normalized[idx] / total) * 100.0)}%` });\n        }\n        if (info.flex) {\n            return Object.assign(Object.assign({}, config), { size: `${Math.floor(normalized[idx] / gcd)}*` });\n        }\n        if (info.fixed) {\n            return Object.assign(Object.assign({}, config), { size: normalized[idx] });\n        }\n        return config;\n    });\n    return shallowCopySizes(result);\n}\n","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { useCallback, useContext, useMemo, useRef } from 'react';\nimport classNames from 'classnames';\nimport useSplitContainerDivider from './hooks/use-split-container-divider';\nimport { resizerContext } from './hooks/resize-context';\nimport { setGridStyle, getDirection } from '../container/utilities';\nimport { getResizeSession, getResizeSessionFinalSizes, getResizeSessionSizesAfterDrag, } from './utilities';\nfunction getSizeGenerator(direction) {\n    return (element) => {\n        switch (direction) {\n            case 'vertical':\n                return element.offsetHeight;\n            case 'horizontal':\n            default:\n                return element.offsetWidth;\n        }\n    };\n}\nfunction SplitContainerDivider(props) {\n    const { className, style, disabled, previous, next } = props;\n    const { sizes, setSizes } = useContext(resizerContext);\n    const session = useRef(undefined);\n    const direction = getDirection(props);\n    const getSize = useMemo(() => getSizeGenerator(direction), [direction]);\n    const setGrid = useCallback((element, newSizes) => setGridStyle(element, newSizes, direction), [direction]);\n    const onDragStart = useCallback((divider) => {\n        session.current = getResizeSession(divider, sizes, getSize);\n        return Boolean(session.current);\n    }, [session, sizes, getSize, direction]);\n    const onDrag = useCallback((divider, delta) => {\n        const { current } = session;\n        if (current) {\n            current.sizes = getResizeSessionSizesAfterDrag(current, delta);\n            setGrid(current.grid, current.sizes);\n        }\n    }, [session, setGrid]);\n    const onDragFinish = useCallback(() => {\n        const { current } = session;\n        if (current) {\n            const result = getResizeSessionFinalSizes(current, getSize);\n            setSizes(result);\n        }\n        session.current = undefined;\n    }, [session, getSize, setSizes]);\n    const ref = useSplitContainerDivider(direction, {\n        onDrag,\n        onDragStart,\n        onDragFinish,\n    });\n    return (_jsx(\"div\", { ref: ref, className: classNames('mw-split-container-divider', {\n            horizontal: direction === 'horizontal',\n            vertical: direction === 'vertical',\n            disabled,\n        }, className), style: style, \"data-divider\": true, \"data-previous\": previous, \"data-next\": next, children: _jsx(\"div\", { className: \"mw-split-container-divider-content\", children: '\\u00A0' }) }));\n}\nexport default SplitContainerDivider;\n","/* eslint-disable @typescript-eslint/ban-types */\nimport { useLayoutEffect, useRef } from 'react';\nimport { noop } from '../../../../helpers/rest';\nexport default function useSplitContainerDivider(dividerDirection, callbacks) {\n    const ref = useRef(null);\n    const { onDrag, onDragFinish, onDragStart } = callbacks;\n    useLayoutEffect(() => {\n        const { current } = ref;\n        if (current) {\n            let moving;\n            const onMouseDown = (event) => {\n                if (event.button === 0 && onDragStart(current)) {\n                    moving = {\n                        x: event.clientX,\n                        y: event.clientY,\n                    };\n                    current.classList.add('mw-divider-moving');\n                }\n            };\n            const onMouseMove = (event) => {\n                if (moving) {\n                    event.preventDefault();\n                    const deltaPoint = {\n                        x: event.clientX - moving.x,\n                        y: event.clientY - moving.y,\n                    };\n                    onDrag(current, dividerDirection === 'horizontal' ? deltaPoint.x : deltaPoint.y);\n                }\n            };\n            const onMouseUp = (event) => {\n                if (moving) {\n                    onMouseMove(event);\n                    current.classList.remove('mw-divider-moving');\n                    moving = undefined;\n                    onDragFinish(current);\n                }\n            };\n            current.addEventListener('mousedown', onMouseDown);\n            // We need to capture mousemove / mouseup, because Miew stops propagation of\n            // this events\n            window.addEventListener('mouseup', onMouseUp, { capture: true });\n            window.addEventListener('mousemove', onMouseMove, { capture: true });\n            return () => {\n                current.addEventListener('mousedown', onMouseDown);\n                window.removeEventListener('mouseup', onMouseUp, { capture: true });\n                window.removeEventListener('mousemove', onMouseMove, { capture: true });\n            };\n        }\n        return noop;\n    }, [ref, dividerDirection, onDrag, onDragFinish, onDragStart]);\n    return ref;\n}\n","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useMemo } from 'react';\nimport classNames from 'classnames';\nimport Container from '../container';\nimport { getDirection, extractChildSizeConfiguration, } from '../container/utilities';\nimport SplitContainerDivider from './divider';\nimport { useChildrenSize } from '../container/hooks/use-children-sizes';\nimport { resizerContext } from './hooks/resize-context';\nimport { getSizeInfo } from '../utilities';\nconst splitContainerDefaultChildSize = '*';\nfunction getChildKey(child) {\n    var _a;\n    if (child && typeof child !== 'boolean') {\n        return (_a = child.key) !== null && _a !== void 0 ? _a : undefined;\n    }\n    return undefined;\n}\nfunction getChildProps(child) {\n    var _a;\n    if (child && typeof child !== 'boolean') {\n        return Object.assign(Object.assign({}, ((_a = child.props) !== null && _a !== void 0 ? _a : {})), extractChildSizeConfiguration(child, splitContainerDefaultChildSize));\n    }\n    return extractChildSizeConfiguration(child, splitContainerDefaultChildSize);\n}\nfunction cloneChildElementWithoutProps(child) {\n    if (child && typeof child !== 'boolean') {\n        return React.cloneElement(child, {\n            size: undefined,\n            minSize: undefined,\n            stretch: true,\n        });\n    }\n    return child;\n}\nfunction SplitContainer(props) {\n    const { children, className, dividerSize = 4 } = props, containerProps = __rest(props, [\"children\", \"className\", \"dividerSize\"]);\n    const splitContainerClassName = classNames(className, 'mw-split-container');\n    const direction = getDirection(props);\n    const childrenWithDividers = useMemo(() => {\n        const mapped = [];\n        let previousInfo;\n        let previousResizableInfo;\n        let childIndex = -1;\n        React.Children.forEach(children, (child, index) => {\n            var _a;\n            if (child) {\n                const key = (_a = getChildKey(child)) !== null && _a !== void 0 ? _a : `child-${index}`;\n                const childProps = getChildProps(child);\n                const info = getSizeInfo(childProps.size);\n                const resizable = !info.auto;\n                if (previousResizableInfo && resizable) {\n                    childIndex += 1;\n                    mapped.push(_jsx(SplitContainerDivider, { size: dividerSize, minSize: dividerSize, direction: direction, previous: previousResizableInfo.index, next: childIndex + 1 }, `divider-${key}`));\n                }\n                childIndex += 1;\n                if (resizable) {\n                    previousResizableInfo = Object.assign(Object.assign({}, info), { index: childIndex });\n                }\n                previousInfo = info;\n                mapped.push(_jsx(Container, Object.assign({}, childProps, { children: cloneChildElementWithoutProps(child) }), key));\n            }\n        });\n        return mapped;\n    }, [children, direction]);\n    const [sizes, synchronizedChildren, setSizes] = useChildrenSize(childrenWithDividers, splitContainerDefaultChildSize);\n    const context = useMemo(() => ({\n        sizes,\n        setSizes,\n    }), [sizes, setSizes]);\n    return (_jsx(resizerContext.Provider, { value: context, children: _jsx(Container, Object.assign({ className: splitContainerClassName, grid: true }, containerProps, { defaultChildSize: splitContainerDefaultChildSize, gridSizes: sizes, children: synchronizedChildren })) }));\n}\nexport default SplitContainer;\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useEffect, useLayoutEffect, useMemo, useRef, useState, } from 'react';\nimport { useMiew } from '../../stores/miew-store';\nimport classNames from 'classnames';\nimport { noop } from '../../helpers/rest';\nimport { initialize } from '../../terminal/initialize';\nfunction Terminal(props) {\n    const { className, style } = props;\n    const miew = useMiew();\n    const [terminal, setTerminal] = useState();\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState(undefined);\n    // eslint-disable-next-line @typescript-eslint/ban-types\n    const terminalRef = useRef(null);\n    useLayoutEffect(() => {\n        const { current: terminalDiv } = terminalRef;\n        if (terminalDiv) {\n            setLoading(true);\n            initialize(terminalDiv)\n                .then((aTerminal) => {\n                setTerminal(aTerminal);\n                setLoading(false);\n            })\n                .catch((reason) => {\n                setError(reason.message);\n                setLoading(false);\n            });\n        }\n    }, [terminalRef, setError, setLoading, setTerminal]);\n    useEffect(() => {\n        if (terminal) {\n            return () => {\n                terminal.dispose();\n            };\n        }\n        return noop;\n    }, [terminal]);\n    useEffect(() => {\n        if (terminal) {\n            terminal.attach(miew);\n        }\n        return noop;\n    }, [terminal, miew]);\n    const errors = useMemo(() => {\n        const result = [];\n        if (error) {\n            result.push(error);\n        }\n        return result;\n    }, [miew, error]);\n    return (_jsxs(\"div\", { className: classNames(className, 'mw-miewer-terminal-container'), style: style, children: [_jsx(\"div\", { ref: terminalRef, className: classNames('mw-full-size', 'mw-miewer-terminal') }), (loading || errors.length > 0) && (_jsxs(\"div\", { className: classNames('mw-full-size', 'mw-centered', 'mw-miewer-terminal-messages'), children: [loading && (_jsx(\"span\", { className: classNames('mw-text-faded', 'mw-miewer-terminal-message'), children: \"Loading terminal...\" })), errors.map((error, idx) => (_jsx(\"span\", { className: classNames('mw-miew-terminal-message', 'mw-error'), children: error }, `error-${idx}`)))] }))] }));\n}\nexport default Terminal;\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nexport function initialize(terminalDiv) {\n    return __awaiter(this, void 0, void 0, function* () {\n        // eslint-disable-next-line @typescript-eslint/naming-convention\n        const { MiewerTerminal } = yield import(\n        /* webpackChunkName: \"miewer-terminal\" */ './miewer-terminal');\n        const terminal = new MiewerTerminal(terminalDiv);\n        yield terminal.initialize();\n        return terminal;\n    });\n}\n","import { MiewerPanel } from '../../../@types/components/panels';\nimport { CodeFilled, CodeOutlined, EditFilled, EditOutlined, FontColorsOutlined, } from '@ant-design/icons';\nexport const miewerPanelIconsSets = {\n    [MiewerPanel.terminal]: {\n        icon: CodeOutlined,\n        iconOn: CodeFilled,\n        iconOff: CodeOutlined,\n    },\n    [MiewerPanel.representations]: {\n        icon: EditOutlined,\n        iconOn: EditFilled,\n        iconOff: EditOutlined,\n    },\n    [MiewerPanel.sequences]: {\n        icon: FontColorsOutlined,\n        iconOn: FontColorsOutlined,\n        iconOff: FontColorsOutlined,\n    },\n};\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Button } from 'antd';\nimport { miewerPanelNames, miewerPanelShortNames, } from '../../../@types/components/panels';\nimport { usePanelVisible, useTogglePanel, } from '../../../stores/miewer-panels-store';\nimport { miewerPanelIconsSets } from './panel-icons';\nfunction PanelToggle(props) {\n    var _a;\n    const { panel, className, style, displayName } = props;\n    const { iconOff, iconOn } = (_a = miewerPanelIconsSets[panel]) !== null && _a !== void 0 ? _a : {};\n    const visible = usePanelVisible(panel);\n    const toggle = useTogglePanel(panel);\n    const IconChild = visible ? iconOn : iconOff;\n    return (_jsxs(Button, { type: visible ? 'primary' : 'text', className: className, style: style, onClick: toggle, children: [_jsx(IconChild, { className: \"mw-panel-toggle-icon\" }), displayName && IconChild ? ' ' : null, displayName && (_jsx(\"span\", { children: displayName === 'short'\n                    ? miewerPanelShortNames[panel]\n                    : miewerPanelNames[panel] }))] }));\n}\nexport default PanelToggle;\n","import { useCallback, useMemo, useState } from 'react';\nexport default function useGeneratedCodeModal() {\n    const [visible, setVisible] = useState(false);\n    const onHide = useCallback(() => {\n        setVisible(false);\n    }, [setVisible]);\n    const onShow = useCallback(() => {\n        setVisible(true);\n    }, [setVisible]);\n    return useMemo(() => ({\n        visible,\n        onHide,\n        onShow,\n    }), [visible, onShow, onHide]);\n}\n","import { jsx as _jsx, Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { useEffect, useState } from 'react';\nimport { Button, Input, Modal } from 'antd';\nfunction GeneratedCodeModal(props) {\n    const { className, style, visible, title, onClose, generator } = props;\n    const [code, setCode] = useState();\n    useEffect(() => {\n        if (visible) {\n            setCode(generator());\n        }\n    }, [setCode, visible, generator]);\n    return (_jsx(Modal, { className: className, style: style, onCancel: onClose, title: title, open: visible, closeIcon: false, footer: _jsx(_Fragment, { children: _jsx(Button, { onClick: onClose, children: \"Close\" }) }), children: _jsx(Input.TextArea, { readOnly: true, rows: 6, value: code }) }));\n}\nexport default GeneratedCodeModal;\n","import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { useCallback, useMemo } from 'react';\nimport { Button, Dropdown } from 'antd';\nimport { AppstoreOutlined, CheckOutlined, ExportOutlined, LaptopOutlined, MenuOutlined, } from '@ant-design/icons';\nimport { MiewerPanel, miewerPanelNames } from '../../@types/components/panels';\nimport { useMiewerPanelsStore } from '../../stores/miewer-panels-store';\nimport { miewerPanelIconsSets } from '../shared/panel-toggle/panel-icons';\nimport { useScriptGenerator, useUrlGenerator } from '../../stores/miew-store';\nimport useGeneratedCodeModal from '../shared/generated-code-modal/use-generated-code-modal';\nimport GeneratedCodeModal from '../shared/generated-code-modal';\nimport { useThemesStore } from '../../stores/themes-store';\nconst trigger = ['click'];\nfunction renderIcon(Icon) {\n    return _jsx(Icon, { className: \"mw-header-menu-item-icon\" });\n}\nfunction Menu(props) {\n    const { className, style } = props;\n    const panels = useMemo(() => Object.values(MiewerPanel), []);\n    const { panels: visiblePanels, togglePanel } = useMiewerPanelsStore();\n    const { themes, theme, setTheme } = useThemesStore();\n    const urlGenerator = useUrlGenerator();\n    const scriptGenerator = useScriptGenerator();\n    const { visible: urlVisible, onShow: urlShow, onHide: urlHide, } = useGeneratedCodeModal();\n    const { visible: scriptVisible, onShow: scriptShow, onHide: scriptHide, } = useGeneratedCodeModal();\n    const handleKey = useCallback((event) => {\n        const { key } = event;\n        if (key === 'url') {\n            urlShow();\n            return;\n        }\n        if (key === 'script') {\n            scriptShow();\n            return;\n        }\n        const panelKeyE = /^panels\\/(.+)$/i.exec(key);\n        if (panelKeyE === null || panelKeyE === void 0 ? void 0 : panelKeyE[1]) {\n            togglePanel(panelKeyE[1]);\n        }\n        const themeKeyE = /^theme\\/(.+)$/i.exec(key);\n        if (themeKeyE === null || themeKeyE === void 0 ? void 0 : themeKeyE[1]) {\n            setTheme(themeKeyE[1]);\n        }\n    }, [urlShow, scriptShow, togglePanel, setTheme]);\n    const options = useMemo(() => [\n        {\n            key: 'panels',\n            label: 'Panels',\n            icon: _jsx(AppstoreOutlined, {}),\n            children: panels.map((panel) => ({\n                key: `panels/${panel}`,\n                label: (_jsxs(\"div\", { className: \"mw-header-menu-item-text\", children: [renderIcon(miewerPanelIconsSets[panel].icon), _jsx(\"span\", { children: miewerPanelNames[panel] }), visiblePanels.has(panel) && (_jsx(CheckOutlined, { style: { marginLeft: 'auto' } }))] })),\n            })),\n        },\n        {\n            type: 'divider',\n        },\n        {\n            key: 'appearance',\n            label: 'Appearance',\n            icon: _jsx(LaptopOutlined, {}),\n            children: themes.map((aTheme) => ({\n                key: `theme/${aTheme.id}`,\n                label: (_jsxs(\"div\", { className: \"mw-header-menu-item-text\", children: [_jsx(\"span\", { children: aTheme.title }), theme.id === aTheme.id && (_jsx(CheckOutlined, { style: { marginLeft: 'auto' } }))] })),\n            })),\n        },\n        {\n            type: 'divider',\n        },\n        {\n            key: 'url',\n            label: 'Generate URL',\n            icon: _jsx(ExportOutlined, {}),\n        },\n        {\n            key: 'script',\n            label: 'Generate script',\n            icon: _jsx(ExportOutlined, {}),\n        },\n    ], [panels, visiblePanels, themes, theme]);\n    const menu = useMemo(() => ({\n        items: options,\n        onClick: handleKey,\n    }), [options, handleKey]);\n    return (_jsxs(_Fragment, { children: [_jsx(Dropdown, { menu: menu, trigger: trigger, overlayClassName: \"mw-header-menu\", children: _jsx(Button, { className: className, style: style, type: \"text\", children: _jsx(MenuOutlined, {}) }) }), _jsx(GeneratedCodeModal, { title: \"URL\", visible: urlVisible, onClose: urlHide, generator: urlGenerator }), _jsx(GeneratedCodeModal, { title: \"Script\", visible: scriptVisible, onClose: scriptHide, generator: scriptGenerator })] }));\n}\nexport default Menu;\n","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { useCallback } from 'react';\nimport { useDisableMiewHotKeys, useEnableMiewHotKeys, } from '../../../stores/miew-store';\nexport function miewerInputHoc(WrappedComponent) {\n    // eslint-disable-next-line react/display-name\n    return function (props) {\n        const { onBlur, onFocus } = props;\n        const enableMiewHotKeys = useEnableMiewHotKeys();\n        const disableMiewHotKeys = useDisableMiewHotKeys();\n        const onFocusHoc = useCallback((event) => {\n            disableMiewHotKeys();\n            if (typeof onFocus === 'function') {\n                onFocus(event);\n            }\n        }, [onFocus, disableMiewHotKeys]);\n        const onBlurHoc = useCallback((event) => {\n            enableMiewHotKeys();\n            if (typeof onBlur === 'function') {\n                onBlur(event);\n            }\n        }, [onBlur, enableMiewHotKeys]);\n        return (_jsx(WrappedComponent, Object.assign({}, props, { onBlur: onBlurHoc, onFocus: onFocusHoc })));\n    };\n}\n","/* eslint-disable @typescript-eslint/naming-convention */\nimport { Input as AntdInput, InputNumber as AntdInputNumber } from 'antd';\nimport { miewerInputHoc } from './miewer-input-hoc';\nexport const Input = miewerInputHoc(AntdInput);\nexport const InputNumber = miewerInputHoc(AntdInputNumber);\n","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { useCallback, useState } from 'react';\nimport { Input } from '../shared/antd-overrides';\nimport { useSelectionByCodes } from '../../stores/miew-selection-store';\nfunction Search(props) {\n    const { className, style } = props;\n    const [search, setSearch] = useState();\n    const selectionByCodes = useSelectionByCodes();\n    const onSearchChange = useCallback((event) => {\n        setSearch(event.target.value);\n    }, [setSearch]);\n    const onPressEnter = useCallback(() => {\n        selectionByCodes(search !== null && search !== void 0 ? search : '');\n    }, [search, selectionByCodes]);\n    return (_jsx(Input, { className: className, allowClear: true, style: style, placeholder: \"Search residues\", value: search, onChange: onSearchChange, onPressEnter: onPressEnter }));\n}\nexport default Search;\n","export var ChainSequenceRenderType;\n(function (ChainSequenceRenderType) {\n    ChainSequenceRenderType[\"letter\"] = \"letter\";\n    ChainSequenceRenderType[\"name\"] = \"name\";\n})(ChainSequenceRenderType || (ChainSequenceRenderType = {}));\nexport var ChainSequenceEvent;\n(function (ChainSequenceEvent) {\n    ChainSequenceEvent[\"scroll\"] = \"scroll\";\n    ChainSequenceEvent[\"scrollStart\"] = \"scroll-start\";\n    ChainSequenceEvent[\"scrollFinish\"] = \"scroll-finish\";\n    ChainSequenceEvent[\"selection\"] = \"selection\";\n    ChainSequenceEvent[\"selectionStart\"] = \"selection-start\";\n    ChainSequenceEvent[\"selectionFinish\"] = \"selection-finish\";\n})(ChainSequenceEvent || (ChainSequenceEvent = {}));\nexport var ChainSequenceAlignment;\n(function (ChainSequenceAlignment) {\n    ChainSequenceAlignment[\"left\"] = \"left\";\n    ChainSequenceAlignment[\"center\"] = \"center\";\n    ChainSequenceAlignment[\"right\"] = \"right\";\n})(ChainSequenceAlignment || (ChainSequenceAlignment = {}));\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport PanelToggle from '../shared/panel-toggle';\nimport { MiewerPanel } from '../../@types/components/panels';\nimport Menu from './menu';\nimport Search from './search';\nfunction Header(props) {\n    const { panelTogglesDisplayName } = props;\n    return (_jsxs(\"div\", { className: \"mw-miewer-header mw-row mw-end\", children: [_jsx(Menu, {}), _jsx(Search, { className: \"mw-control mw-input-as-text\" }), _jsx(PanelToggle, { className: \"mw-miewer-header-toggle\", panel: MiewerPanel.terminal, displayName: panelTogglesDisplayName }), _jsx(PanelToggle, { className: \"mw-miewer-header-toggle\", panel: MiewerPanel.sequences, displayName: panelTogglesDisplayName }), _jsx(PanelToggle, { className: \"mw-miewer-header-toggle\", panel: MiewerPanel.representations, displayName: panelTogglesDisplayName })] }));\n}\nexport default Header;\n","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { useMemo } from 'react';\nimport { useMiewSelectionStore } from '../../stores/miew-selection-store';\nimport { isMiewAtom, isMiewChain, isMiewMolecule, isMiewResidue, } from '../../helpers/miew/entity';\nimport { getAtomDescription, getAtomPositionDescription, getChainDescription, getMoleculeDescription, getResidueDescription, } from '../../helpers/miew/selection';\nimport classNames from 'classnames';\nfunction MiewSelectionInfo(props) {\n    const { className, style } = props;\n    const { lastPick, selectedAtomsCount: count } = useMiewSelectionStore();\n    const lastPickDescription = useMemo(() => {\n        if (!lastPick) {\n            return undefined;\n        }\n        const base = count > 0\n            ? `${count} atom${count === 1 ? '' : 's'} selected, last pick:`\n            : 'Last pick:';\n        const info = [];\n        if (isMiewAtom(lastPick)) {\n            info.push(getAtomDescription(lastPick.entity), getAtomPositionDescription(lastPick.entity).toLowerCase());\n        }\n        if (isMiewResidue(lastPick)) {\n            info.push(getResidueDescription(lastPick.entity));\n        }\n        if (isMiewChain(lastPick)) {\n            info.push(getChainDescription(lastPick.entity));\n        }\n        if (isMiewMolecule(lastPick)) {\n            info.push(getMoleculeDescription(lastPick.entity));\n        }\n        return base.concat(' ').concat(info.join(', '));\n    }, [lastPick, count]);\n    if (lastPickDescription) {\n        return (_jsx(\"div\", { className: classNames(className, 'mw-panel', 'content', 'mw-miew-selection-info'), style: style, children: lastPickDescription }));\n    }\n    return null;\n}\nexport default MiewSelectionInfo;\n","export function getDprValue(value) {\n    return value * window.devicePixelRatio;\n}\nexport function getUnDprValue(value) {\n    return value / window.devicePixelRatio;\n}\n","import { noop } from './rest';\nexport function animate(config, callback) {\n    const { from, to, durationMs, reportLastValueOnAborted = true } = config;\n    const report = (value) => {\n        if (typeof callback === 'function') {\n            callback(value);\n        }\n    };\n    if (durationMs <= 0) {\n        report(to);\n        return noop;\n    }\n    let raf = 0;\n    let start;\n    const tick = (time) => {\n        if (start) {\n            const elapsed = time - start;\n            if (elapsed >= durationMs) {\n                report(to);\n            }\n            else {\n                const ratio = elapsed / durationMs;\n                report(from + (to - from) * ratio);\n                raf = requestAnimationFrame(tick);\n            }\n        }\n        else {\n            start = time;\n            raf = requestAnimationFrame(tick);\n        }\n    };\n    raf = requestAnimationFrame(tick);\n    return () => {\n        if (reportLastValueOnAborted) {\n            report(to);\n        }\n        cancelAnimationFrame(raf);\n    };\n}\nexport function stopAnimation(animation) {\n    if (typeof animation === 'function') {\n        animation();\n    }\n}\n","import { ChainSequenceAlignment, ChainSequenceEvent, ChainSequenceRenderType, } from '../../../@types/components/chain-sequences';\nimport { colorValueToString } from '../../../helpers/colors';\nimport { getDprValue, getUnDprValue } from '../../../helpers/canvas';\nimport { animate, stopAnimation } from '../../../helpers/animation';\nimport { arraysEquals } from '../../../helpers/rest';\nconst bricksRenderModeThresholdPx = getDprValue(10);\nconst sliderInViewportSizeHovered = getDprValue(10);\nconst sliderSelectionOffset = getDprValue(2);\nconst selectionLineWidth = getDprValue(1);\nconst sliderInViewportSize = getDprValue(5);\nconst sliderOutOfViewportSize = getDprValue(1.0);\nconst sliderTopMargin = getDprValue(4.0);\nconst margin = getDprValue(2);\nconst sequenceItemHorizontalMargin = getDprValue(2.0);\nconst sliderZoneHeight = sliderInViewportSizeHovered + sliderSelectionOffset + selectionLineWidth;\nconst animationDurationMs = 100;\nclass ChainRenderer {\n    constructor() {\n        this.mouseMove = (event) => {\n            if (this.pointerEventsDisabled) {\n                return;\n            }\n            if (this._scrollSession) {\n                event.preventDefault();\n                event.stopPropagation();\n                event.stopImmediatePropagation();\n                this.sliderHovered = true;\n                const diff = this.getSliderPositionForMouseEvent(event) -\n                    this._scrollSession.touchPosition;\n                this.position = this._scrollSession.sliderInitialPosition + diff;\n                this.reportPointerEvent(ChainSequenceEvent.scroll);\n            }\n            else if (this._selectionSession) {\n                event.preventDefault();\n                event.stopPropagation();\n                event.stopImmediatePropagation();\n                this.sequenceHovered = true;\n                this.handleSelectionEvent(event);\n                this.reportPointerEvent(ChainSequenceEvent.selection);\n            }\n            else {\n                this.updateHoveredStatesForEvent(event);\n            }\n        };\n        this.mouseDown = (event) => {\n            if (event.button !== 0 || this.pointerEventsDisabled) {\n                return;\n            }\n            const sliderOuter = this.mouseEventUnderBoundingBox(event, this.sliderOuterBoundingBox);\n            const sliderInner = this.mouseEventUnderBoundingBox(event, this.sliderInnerBoundingBox);\n            const sequence = this.mouseEventUnderBoundingBox(event, this.sequenceBoundingBox);\n            if (!sliderInner && sliderOuter) {\n                event.preventDefault();\n                event.stopPropagation();\n                event.stopImmediatePropagation();\n                this.center = this.getSliderPositionForMouseEvent(event);\n                return;\n            }\n            if (sliderInner) {\n                this.reportPointerEvent(ChainSequenceEvent.scrollStart);\n                event.preventDefault();\n                event.stopPropagation();\n                event.stopImmediatePropagation();\n                this._scrollSession = {\n                    sliderInitialPosition: this.position,\n                    touchPosition: this.getSliderPositionForMouseEvent(event),\n                };\n                return;\n            }\n            if (sequence) {\n                this.reportPointerEvent(ChainSequenceEvent.selectionStart);\n                event.preventDefault();\n                event.stopPropagation();\n                event.stopImmediatePropagation();\n                this._selectionSession = {\n                    touchPosition: this.getSequencePositionForMouseEvent(event),\n                    append: event.shiftKey && !event.altKey,\n                    exclude: event.shiftKey && event.altKey,\n                    initialSelection: this.selectedResidues.slice(),\n                    lastSelection: this.selectedResidues.slice(),\n                };\n                this.handleSelectionEvent(event);\n            }\n        };\n        this.mouseUp = (event) => {\n            if (!this.pointerEventsDisabled && this._scrollSession !== undefined) {\n                this.mouseMove(event);\n                this.reportPointerEvent(ChainSequenceEvent.scrollFinish);\n                this.requestRender();\n            }\n            if (!this.pointerEventsDisabled && this._selectionSession !== undefined) {\n                this.handleSelectionEvent(event);\n                this.reportPointerEvent(ChainSequenceEvent.selectionFinish);\n                this.requestRender();\n            }\n            this._selectionSession = undefined;\n            this._scrollSession = undefined;\n            this.updateHoveredStatesForEvent(event);\n        };\n        this._theme = undefined;\n        this._width = 1;\n        this._height = 1;\n        this._bbox = { width: 1, height: 1, top: 0, left: 0 };\n        this._position = 0;\n        this._sliderHeight = sliderInViewportSize;\n        this._renderType = ChainSequenceRenderType.letter;\n        this._useColorer = true;\n        this._alignment = ChainSequenceAlignment.left;\n        this._renderRaf = 0;\n        this._renderRequested = false;\n        this._reportSelectionRequested = undefined;\n        this._chain = undefined;\n        this._scrollSession = undefined;\n        this._selectionSession = undefined;\n        this._sliderHovered = false;\n        this._sequenceHovered = false;\n        this._chainTitleSize = { width: 1, height: 1 };\n        this._itemMaxCodeSize = { width: 1, height: 1 };\n        this._itemMaxCodeLetterSize = { width: 1, height: 1 };\n        this._selectedResidues = [];\n        this._selectedResiduesIndices = new Set();\n        this._positionAnimationAbort = undefined;\n        this._sliderHeightAnimationAbort = undefined;\n        this._pointerEventsDisabled = false;\n        this._pointerEventCallback = undefined;\n        this.initializeRenderLoop();\n    }\n    get chain() {\n        return this._chain;\n    }\n    set chain(chain) {\n        if (this._chain !== chain) {\n            this._chain = chain;\n            this.resetPosition(true);\n            this.calculateTextSizes();\n            this.requestRender();\n        }\n    }\n    get renderType() {\n        return this._renderType;\n    }\n    set renderType(renderType) {\n        if (this._renderType !== renderType) {\n            this._renderType = renderType;\n            this.resetPosition();\n            this.requestRender();\n        }\n    }\n    get useColorer() {\n        return this._useColorer;\n    }\n    set useColorer(useColorer) {\n        if (this._useColorer !== useColorer) {\n            this._useColorer = useColorer;\n            this.requestRender();\n        }\n    }\n    get alignment() {\n        return this._alignment;\n    }\n    set alignment(alignment) {\n        if (this._alignment !== alignment) {\n            this._alignment = alignment;\n            this.resetPosition();\n            this.requestRender();\n        }\n    }\n    get theme() {\n        return this._theme;\n    }\n    set theme(theme) {\n        if (this._theme !== theme) {\n            this._theme = theme;\n            this.requestRender();\n        }\n    }\n    get selectedResidues() {\n        return this._selectedResidues;\n    }\n    set selectedResidues(residues) {\n        // Shallow compare\n        if (this._selectedResidues !== residues) {\n            this._selectedResidues = residues;\n            this._selectedResiduesIndices = new Set(residues.map((residue) => residue._index));\n            this.requestRender();\n        }\n    }\n    get selectionCallback() {\n        return this._selectionCallback;\n    }\n    set selectionCallback(selectionCallback) {\n        if (this._selectionCallback !== selectionCallback) {\n            this._selectionCallback = selectionCallback;\n        }\n    }\n    get pointerEventCallback() {\n        return this._pointerEventCallback;\n    }\n    set pointerEventCallback(callback) {\n        if (this._pointerEventCallback !== callback) {\n            this._pointerEventCallback = callback;\n        }\n    }\n    get pointerEventsDisabled() {\n        return this._pointerEventsDisabled;\n    }\n    set pointerEventsDisabled(disabled) {\n        if (this._pointerEventsDisabled !== disabled) {\n            this._pointerEventsDisabled = disabled;\n            this.requestRender();\n        }\n    }\n    get sequenceTitle() {\n        const { chain } = this;\n        if (chain) {\n            return `Chain ${chain.chain.getName()}:`;\n        }\n        return '';\n    }\n    get chainItemsStartPx() {\n        return this._chainTitleSize.width + sequenceItemHorizontalMargin;\n    }\n    get itemSize() {\n        switch (this.renderType) {\n            case ChainSequenceRenderType.name:\n                return this._itemMaxCodeSize;\n            case ChainSequenceRenderType.letter:\n            default:\n                return this._itemMaxCodeLetterSize;\n        }\n    }\n    get itemsCount() {\n        var _a, _b;\n        return (_b = (_a = this.chain) === null || _a === void 0 ? void 0 : _a.sequence.length) !== null && _b !== void 0 ? _b : 0;\n    }\n    get visibleItemsCount() {\n        if (this.itemSize.width === 0) {\n            return 0;\n        }\n        return this._width / this.itemSize.width;\n    }\n    get position() {\n        return this._position;\n    }\n    set position(position) {\n        const corrected = this.correctPosition(position);\n        if (this._position !== corrected) {\n            this._position = corrected;\n            this.stopPositionAnimation();\n            this.requestRender();\n        }\n    }\n    get center() {\n        return this.position + this.visibleItemsCount / 2.0;\n    }\n    set center(center) {\n        this.setPosition(center - this.visibleItemsCount / 2.0, true);\n    }\n    get sliderVisible() {\n        return this.visibleItemsCount < this.itemsCount;\n    }\n    get sliderHovered() {\n        return this._sliderHovered && !this.pointerEventsDisabled;\n    }\n    set sliderHovered(hovered) {\n        if (this._sliderHovered !== hovered) {\n            this._sliderHovered = hovered;\n            this.stopSliderHeightAnimation();\n            this._sliderHeightAnimationAbort = animate({\n                from: this._sliderHeight,\n                to: hovered ? sliderInViewportSizeHovered : sliderInViewportSize,\n                durationMs: animationDurationMs / 2.0,\n            }, (value) => {\n                this._sliderHeight = value;\n                this.requestRender();\n            });\n            this.requestRender();\n        }\n    }\n    get sequenceHovered() {\n        return this._sequenceHovered && !this.pointerEventsDisabled;\n    }\n    set sequenceHovered(hovered) {\n        if (this._sequenceHovered !== hovered) {\n            this._sequenceHovered = hovered;\n            this.requestRender();\n        }\n    }\n    get sliderRatio() {\n        const { chain } = this;\n        if (!chain || chain.sequence.length === 0 || !this.sliderVisible) {\n            return 0;\n        }\n        return this._width / chain.sequence.length;\n    }\n    get sliderWidth() {\n        const { chain, sliderRatio, itemsCount, visibleItemsCount } = this;\n        if (!chain ||\n            sliderRatio === 0 ||\n            !this.sliderVisible ||\n            itemsCount === 0) {\n            return 0;\n        }\n        return Math.max(Math.min(itemsCount, visibleItemsCount) * sliderRatio, 2 * this.sliderHeight);\n    }\n    get sliderHeight() {\n        const { chain } = this;\n        if (!chain || chain.sequence.length === 0 || !this.sliderVisible) {\n            return 0;\n        }\n        return this._sliderHeight;\n    }\n    get sliderCenter() {\n        const { sliderVisible, sliderRatio } = this;\n        if (!sliderVisible || sliderRatio === 0) {\n            return 0;\n        }\n        return sliderRatio * this.center;\n    }\n    get sliderVerticalPosition() {\n        return Math.floor(margin +\n            this.itemSize.height +\n            sliderTopMargin +\n            sliderInViewportSizeHovered / 2.0);\n    }\n    get sliderRange() {\n        const { sliderWidth, sliderVisible, sliderCenter } = this;\n        if (!sliderVisible) {\n            return [0, 0];\n        }\n        return [sliderCenter - sliderWidth / 2.0, sliderCenter + sliderWidth / 2.0];\n    }\n    get sequenceBoundingBox() {\n        return {\n            top: this._bbox.top,\n            left: this._bbox.left,\n            width: this._bbox.width,\n            height: getUnDprValue(margin +\n                this.itemSize.height +\n                (this.sliderVisible ? sliderTopMargin : margin)),\n        };\n    }\n    get sliderOuterBoundingBox() {\n        return {\n            top: this._bbox.top +\n                getUnDprValue(this.sliderVerticalPosition - sliderInViewportSizeHovered / 2.0),\n            left: this._bbox.left,\n            width: this._bbox.width,\n            height: getUnDprValue(sliderZoneHeight),\n        };\n    }\n    get sliderInnerBoundingBox() {\n        const [x1, x2] = this.sliderRange;\n        const { top, height } = this.sliderOuterBoundingBox;\n        return {\n            top,\n            left: this._bbox.left + getUnDprValue(x1),\n            width: getUnDprValue(x2 - x1),\n            height,\n        };\n    }\n    setCanvases(canvas) {\n        if (this._canvas !== canvas) {\n            this.detachListeners();\n            this.stopAnimations();\n            this._canvas = canvas;\n            if (this._canvas) {\n                this._canvas.style.height = `${getDprValue(1)}px`;\n            }\n            this.attachListeners();\n            this.calculateTextSizes();\n            this.requestRender();\n        }\n    }\n    destroy() {\n        cancelAnimationFrame(this._renderRaf);\n        this.stopAnimations();\n        this.detachListeners();\n        this._canvas = undefined;\n    }\n    correctPosition(position) {\n        const { visibleItemsCount, itemsCount } = this;\n        if (visibleItemsCount >= itemsCount) {\n            switch (this.alignment) {\n                case ChainSequenceAlignment.center:\n                    return (itemsCount - visibleItemsCount) / 2.0;\n                case ChainSequenceAlignment.right:\n                    return itemsCount - visibleItemsCount;\n                case ChainSequenceAlignment.left:\n                default:\n                    return 0;\n            }\n        }\n        const max = itemsCount - visibleItemsCount;\n        const min = Math.max(0, (visibleItemsCount - itemsCount) / 2.0);\n        return Math.max(min, Math.min(max, position));\n    }\n    setPosition(position, animated) {\n        const newPosition = this.correctPosition(position);\n        if (animated) {\n            this.stopPositionAnimation();\n            this._positionAnimationAbort = animate({\n                from: this.position,\n                to: newPosition,\n                durationMs: animationDurationMs,\n            }, (value) => {\n                this._position = this.correctPosition(value);\n                this.requestRender();\n            });\n        }\n        else {\n            this.position = newPosition;\n        }\n    }\n    resetPosition(toStart = false) {\n        this.setPosition(toStart ? 0 : this.position, true);\n        this.requestRender();\n    }\n    initializeRenderLoop() {\n        let width;\n        let height;\n        const callback = () => {\n            const desiredHeight = Math.ceil(getUnDprValue(this.itemSize.height +\n                2.0 * margin +\n                (this.sliderVisible ? sliderZoneHeight + sliderTopMargin : 0)));\n            if (this._canvas && desiredHeight !== this._canvas.clientHeight) {\n                this._canvas.style.height = `${desiredHeight}px`;\n            }\n            if (this._canvas) {\n                this._bbox = this._canvas.getBoundingClientRect();\n            }\n            if (this._canvas &&\n                (width !== this._canvas.clientWidth ||\n                    height !== this._canvas.clientHeight)) {\n                width = this._canvas.clientWidth;\n                height = this._canvas.clientHeight;\n                this._width = Math.max(1, getDprValue(width));\n                this._height = Math.max(1, getDprValue(height));\n                this._canvas.width = this._width;\n                this._canvas.height = this._height;\n                this.resetPosition();\n                this.requestRender();\n            }\n            if (this._renderRequested) {\n                this._renderRequested = false;\n                this.render();\n            }\n            if (this._reportSelectionRequested) {\n                this.reportSelectionChanged(this._reportSelectionRequested);\n                this._reportSelectionRequested = undefined;\n            }\n            this._renderRaf = requestAnimationFrame(callback);\n        };\n        callback();\n    }\n    applyTheme(ctx) {\n        var _a;\n        const { fontFamily, fontSize } = (_a = this._theme) !== null && _a !== void 0 ? _a : {\n            background: 0x0,\n            foreground: 0xfafafa,\n            fontSize: 11,\n            fontFamily: 'verdana, sans-serif',\n        };\n        ctx.font = `${getDprValue(fontSize)}px ${fontFamily}`;\n    }\n    residueIsSelected(residue) {\n        return this._selectedResiduesIndices.has(residue._index);\n    }\n    getSequencePositionForMouseEvent(event) {\n        const { clientX } = event;\n        const { left } = this._bbox;\n        const x = getDprValue(clientX - left) - this.chainItemsStartPx;\n        if (this.itemSize.width === 0) {\n            return 0;\n        }\n        return this.position + x / this.itemSize.width;\n    }\n    getSliderPositionForMouseEvent(event) {\n        const { sliderRatio } = this;\n        if (sliderRatio === 0) {\n            return 0;\n        }\n        const { clientX } = event;\n        const { left } = this._bbox;\n        const x = getDprValue(clientX - left);\n        return x / sliderRatio;\n    }\n    attachListeners() {\n        this.detachListeners();\n        if (this._canvas) {\n            this._canvas.addEventListener('mousedown', this.mouseDown);\n            window.addEventListener('mouseup', this.mouseUp, { capture: true });\n            window.addEventListener('mousemove', this.mouseMove, { capture: true });\n        }\n    }\n    detachListeners() {\n        if (this._canvas) {\n            this._canvas.removeEventListener('mousedown', this.mouseDown);\n            window.removeEventListener('mouseup', this.mouseUp, { capture: true });\n            window.removeEventListener('mousemove', this.mouseMove, {\n                capture: true,\n            });\n        }\n    }\n    getItemsWithinRange(from, to) {\n        const { chain } = this;\n        if (chain) {\n            const correct = (position) => Math.max(0, Math.min(chain.sequence.length + 1, position));\n            const start = correct(Math.floor(Math.min(from, to)));\n            const end = correct(Math.ceil(Math.max(from, to)));\n            return chain.sequence\n                .slice(start, end + (start === end ? 1 : 0))\n                .map((item) => item.residue);\n        }\n        return [];\n    }\n    reportPointerEvent(event) {\n        const { chain } = this;\n        if (chain &&\n            !this.pointerEventsDisabled &&\n            typeof this._pointerEventCallback === 'function') {\n            this._pointerEventCallback(chain.chain, event);\n        }\n    }\n    reportSelectionChanged(newSelection) {\n        if (typeof this._selectionCallback === 'function') {\n            this._selectionCallback(newSelection);\n        }\n    }\n    stopAnimations() {\n        this.stopPositionAnimation();\n        this.stopSliderHeightAnimation();\n    }\n    stopPositionAnimation() {\n        stopAnimation(this._positionAnimationAbort);\n        this._positionAnimationAbort = undefined;\n    }\n    stopSliderHeightAnimation() {\n        stopAnimation(this._sliderHeightAnimationAbort);\n        this._sliderHeightAnimationAbort = undefined;\n    }\n    mouseEventUnderBoundingBox(event, bbox) {\n        const { clientX, clientY } = event;\n        return (bbox.left <= clientX &&\n            bbox.left + bbox.width >= clientX &&\n            bbox.top <= clientY &&\n            bbox.top + bbox.height > clientY);\n    }\n    handleSelectionEvent(event) {\n        const session = this._selectionSession;\n        if (session) {\n            const items = this.getItemsWithinRange(session.touchPosition, this.getSequencePositionForMouseEvent(event));\n            let selected = [...session.initialSelection];\n            if (!session.append && !session.exclude) {\n                selected = [];\n            }\n            items.forEach((item) => {\n                if (session.exclude && selected.find((o) => o._index === item._index)) {\n                    selected = selected.filter((o) => o._index !== item._index);\n                }\n                else {\n                    selected.push(item);\n                }\n            });\n            const hash = [\n                ...new Set(session.lastSelection.map((item) => item._index)),\n            ].sort((a, b) => a - b);\n            const newHash = [...new Set(selected.map((item) => item._index))].sort((a, b) => a - b);\n            if (!arraysEquals(hash, newHash)) {\n                this._reportSelectionRequested = selected;\n            }\n            session.lastSelection = items;\n        }\n    }\n    updateHoveredStatesForEvent(event) {\n        this.sliderHovered =\n            event.target === this._canvas &&\n                this.mouseEventUnderBoundingBox(event, this.sliderOuterBoundingBox);\n        this.sequenceHovered =\n            event.target === this._canvas &&\n                this.mouseEventUnderBoundingBox(event, this.sequenceBoundingBox);\n    }\n    calculateTextSizes() {\n        const { chain } = this;\n        if (this._canvas && chain) {\n            const ctx = this._canvas.getContext('2d');\n            if (ctx) {\n                ctx.save();\n                ctx.textBaseline = 'alphabetic';\n                this.applyTheme(ctx);\n                const measureText = (text) => {\n                    const { width, fontBoundingBoxAscent } = ctx.measureText(text);\n                    return {\n                        width: Math.ceil(width),\n                        height: fontBoundingBoxAscent,\n                    };\n                };\n                this._chainTitleSize = measureText(this.sequenceTitle);\n                this._itemMaxCodeSize = { width: 0, height: 0 };\n                this._itemMaxCodeLetterSize = { width: 0, height: 0 };\n                chain.sequence.forEach((item) => {\n                    const letterCodeSize = measureText(item.letterCode);\n                    const codeSize = measureText(item.code);\n                    this._itemMaxCodeSize.width = Math.max(this._itemMaxCodeSize.width, codeSize.width);\n                    this._itemMaxCodeSize.height = Math.max(this._itemMaxCodeSize.height, codeSize.height);\n                    this._itemMaxCodeLetterSize.width = Math.max(this._itemMaxCodeLetterSize.width, letterCodeSize.width);\n                    this._itemMaxCodeLetterSize.height = Math.max(this._itemMaxCodeLetterSize.height, letterCodeSize.height);\n                });\n                this._itemMaxCodeSize.width += sequenceItemHorizontalMargin;\n                this._itemMaxCodeLetterSize.width += sequenceItemHorizontalMargin;\n                ctx.restore();\n            }\n            this.resetPosition();\n            this.requestRender();\n        }\n    }\n    requestRender() {\n        this._renderRequested = true;\n    }\n    getItemText(item) {\n        switch (this.renderType) {\n            case ChainSequenceRenderType.letter:\n                return item.letterCode;\n            case ChainSequenceRenderType.name:\n            default:\n                return item.code;\n        }\n    }\n    getSequenceItemPositionByIndex(index) {\n        if (index >= 0) {\n            const { width = 0 } = this.itemSize;\n            return this.chainItemsStartPx + width * (index + 0.5 - this.position);\n        }\n        return this.chainItemsStartPx;\n    }\n    renderSlider(ctx) {\n        const { chain, sliderWidth, sliderHeight, sliderRange, sliderRatio, sliderVerticalPosition, theme, } = this;\n        const { foreground, foregroundFaded, selectionBackground } = theme !== null && theme !== void 0 ? theme : {\n            foreground: 0xfafafa,\n            foregroundFaded: 0x777777,\n            selectionBackground: 0xe78d04,\n        };\n        if (chain &&\n            chain.sequence.length > 0 &&\n            this.sliderVisible &&\n            sliderWidth > 0) {\n            const dx = sliderRatio;\n            const y = sliderVerticalPosition;\n            const selectionY = Math.ceil(y + sliderInViewportSizeHovered / 2.0 + sliderSelectionOffset);\n            let [sliderX1, sliderX2] = sliderRange;\n            sliderX1 += sliderHeight / 2.0;\n            sliderX2 -= sliderHeight / 2.0;\n            ctx.save();\n            ctx.beginPath();\n            ctx.moveTo(sliderX1, y);\n            ctx.arc(sliderX1, y, sliderHeight / 2.0, Math.PI / 2.0, -Math.PI / 2.0, false);\n            ctx.moveTo(sliderX2, y);\n            ctx.arc(sliderX2, y, sliderHeight / 2.0, -Math.PI / 2.0, Math.PI / 2.0, false);\n            ctx.moveTo(0, y);\n            ctx.rect(0, Math.floor(y - sliderOutOfViewportSize / 2.0), this._width, sliderOutOfViewportSize);\n            ctx.moveTo(sliderX1, y);\n            ctx.rect(sliderX1, Math.floor(y - sliderHeight / 2.0), sliderX2 - sliderX1, sliderHeight);\n            ctx.moveTo(0, y);\n            ctx.rect(0, selectionY - selectionLineWidth, this._width, selectionLineWidth * 2.0);\n            ctx.clip();\n            chain.sequence.forEach((item, index) => {\n                const color = !this.useColorer || !item.colorer\n                    ? colorValueToString(this.useColorer ? foregroundFaded : foreground)\n                    : colorValueToString(item.colorer.getResidueColor(item.residue, item.complex));\n                ctx.save();\n                ctx.fillStyle = color;\n                ctx.beginPath();\n                if (dx > bricksRenderModeThresholdPx) {\n                    // Blocks greater than `bricksRenderModeThresholdPx`\n                    // we should render as \"bricks\"\n                    ctx.rect(index * dx, Math.floor(y - sliderHeight / 2.0), dx - 2, sliderHeight);\n                }\n                else {\n                    ctx.rect(index * dx, Math.floor(y - sliderHeight / 2.0), dx, sliderHeight);\n                }\n                ctx.closePath();\n                ctx.fill();\n                ctx.restore();\n                if (this.residueIsSelected(item.residue)) {\n                    ctx.save();\n                    ctx.beginPath();\n                    ctx.lineWidth = selectionLineWidth;\n                    ctx.moveTo(index * dx, selectionY - selectionLineWidth / 2.0);\n                    ctx.lineTo((index + 1) * dx, selectionY - selectionLineWidth / 2.0);\n                    ctx.closePath();\n                    ctx.strokeStyle = colorValueToString(selectionBackground);\n                    ctx.stroke();\n                    ctx.restore();\n                }\n            });\n            ctx.restore();\n        }\n    }\n    render() {\n        const canvas = this._canvas;\n        if (!canvas) {\n            return;\n        }\n        const ctx = canvas.getContext('2d');\n        if (!ctx) {\n            return;\n        }\n        if ((this.sliderVisible && this.sliderHovered) || this.sequenceHovered) {\n            canvas.style.cursor = 'pointer';\n        }\n        else {\n            canvas.style.cursor = 'default';\n        }\n        ctx.clearRect(0, 0, this._width, this._height);\n        this.applyTheme(ctx);\n        const { chain, position, visibleItemsCount, itemSize, theme } = this;\n        const { foreground, foregroundFaded, selectionBackground } = theme !== null && theme !== void 0 ? theme : {\n            foreground: 0xfafafa,\n            foregroundFaded: 0x777777,\n            selectionBackground: 0xe78d04,\n        };\n        if (chain && chain.sequence.length > 0) {\n            ctx.textBaseline = 'alphabetic';\n            ctx.textAlign = 'center';\n            ctx.save();\n            const size = itemSize.width;\n            const textPosition = margin + itemSize.height - getDprValue(1);\n            const selectionOffset = Math.floor(Math.min(margin - getDprValue(1), sliderTopMargin - getDprValue(1), getDprValue(2)));\n            ctx.save();\n            ctx.textAlign = 'left';\n            ctx.fillStyle = colorValueToString(foreground);\n            ctx.fillText(this.sequenceTitle, 0, textPosition);\n            ctx.restore();\n            ctx.beginPath();\n            ctx.rect(this.chainItemsStartPx, 0, this._width - this.chainItemsStartPx, this._height);\n            ctx.clip();\n            chain.sequence.forEach((item, index) => {\n                const partiallyInViewport = index >= position - 1 && index <= position + visibleItemsCount;\n                const color = !this.useColorer || !item.colorer\n                    ? colorValueToString(this.useColorer ? foregroundFaded : foreground)\n                    : colorValueToString(item.colorer.getResidueColor(item.residue, item.complex));\n                if (partiallyInViewport) {\n                    const tx = this.getSequenceItemPositionByIndex(index);\n                    if (this._theme && this.residueIsSelected(item.residue)) {\n                        ctx.save();\n                        ctx.fillStyle = colorValueToString(selectionBackground, 0.25);\n                        ctx.beginPath();\n                        ctx.rect(tx - size / 2.0, margin - selectionOffset, size, itemSize.height + 2 * selectionOffset);\n                        ctx.closePath();\n                        ctx.fill();\n                        ctx.strokeStyle = colorValueToString(selectionBackground);\n                        ctx.beginPath();\n                        ctx.lineWidth = selectionLineWidth;\n                        ctx.moveTo(tx - size / 2.0, margin - selectionOffset + selectionLineWidth / 2.0);\n                        ctx.lineTo(tx + size / 2.0, margin - selectionOffset + selectionLineWidth / 2.0);\n                        ctx.moveTo(tx - size / 2.0, margin +\n                            itemSize.height +\n                            selectionOffset +\n                            selectionLineWidth / 2.0);\n                        ctx.lineTo(tx + size / 2.0, margin +\n                            itemSize.height +\n                            selectionOffset +\n                            selectionLineWidth / 2.0);\n                        ctx.closePath();\n                        ctx.stroke();\n                        ctx.restore();\n                    }\n                    ctx.fillStyle = color;\n                    ctx.fillText(this.getItemText(item), tx, textPosition);\n                }\n            });\n            ctx.restore();\n            this.renderSlider(ctx);\n        }\n    }\n}\nexport default ChainRenderer;\n","import { useEffect } from 'react';\nexport default function useRendererProp(renderer, property, value) {\n    useEffect(() => {\n        if (renderer) {\n            renderer[property] = value;\n        }\n    }, [renderer, property, value]);\n}\n","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { ChainSequenceAlignment, ChainSequenceRenderType, } from '../../@types/components/chain-sequences';\nimport classNames from 'classnames';\nimport useRenderer from './use-renderer';\nimport { useMoleculeStructureStore } from '../../stores/miew-molecule-structure-store';\nimport { useThemeConfig } from '../../stores/themes-store';\nimport useRendererProp from './renderer/use-renderer-prop';\nimport { useMiewSelectionStore } from '../../stores/miew-selection-store';\nfunction ChainSequenceCanvas(props) {\n    const { className, style, chain, type = ChainSequenceRenderType.letter, alignment = ChainSequenceAlignment.left, pointerEventsDisabled = false, onEvent, useColorer = true, } = props;\n    const [renderer, canvasRef] = useRenderer();\n    const chainSequence = useMoleculeStructureStore().getChain(chain);\n    const { selectedResidues, setSelectedResidues } = useMiewSelectionStore();\n    const theme = useThemeConfig();\n    useRendererProp(renderer, 'chain', chainSequence);\n    useRendererProp(renderer, 'theme', theme);\n    useRendererProp(renderer, 'renderType', type);\n    useRendererProp(renderer, 'useColorer', useColorer);\n    useRendererProp(renderer, 'alignment', alignment);\n    useRendererProp(renderer, 'selectedResidues', selectedResidues);\n    useRendererProp(renderer, 'selectionCallback', setSelectedResidues);\n    useRendererProp(renderer, 'pointerEventsDisabled', pointerEventsDisabled);\n    useRendererProp(renderer, 'pointerEventCallback', onEvent);\n    return (_jsx(\"canvas\", { ref: canvasRef, className: classNames(className, 'mw-chain-sequence-canvas'), style: style }));\n}\nexport default ChainSequenceCanvas;\n","/* eslint-disable @typescript-eslint/ban-types */\nimport ChainRenderer from './renderer';\nimport { useEffect, useLayoutEffect, useRef, useState } from 'react';\nimport { noop } from '../../helpers/rest';\nexport default function useRenderer() {\n    const [renderer, setRenderer] = useState(undefined);\n    useEffect(() => {\n        const newRenderer = new ChainRenderer();\n        setRenderer(newRenderer);\n        return () => {\n            newRenderer.destroy();\n        };\n    }, []);\n    const renderCanvasRef = useRef(null);\n    useLayoutEffect(() => {\n        const { current: canvas } = renderCanvasRef;\n        if (canvas && renderer) {\n            renderer.setCanvases(canvas);\n        }\n        return noop;\n    }, [renderer, renderCanvasRef, setRenderer]);\n    return [renderer, renderCanvasRef];\n}\n","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport classNames from 'classnames';\nimport { useMoleculeStructureStore } from '../../stores/miew-molecule-structure-store';\nimport ChainSequenceCanvas from './canvas';\nfunction ChainSequence(props) {\n    const { className, style } = props, rest = __rest(props, [\"className\", \"style\"]);\n    const { chain } = rest;\n    const chainSequence = useMoleculeStructureStore().getChain(chain);\n    if (chainSequence) {\n        return (_jsx(\"div\", { className: classNames('chain-sequence', className), style: style, children: _jsx(ChainSequenceCanvas, Object.assign({}, rest)) }));\n    }\n    return null;\n}\nexport default ChainSequence;\n","import { create } from 'zustand';\nimport { ChainSequenceRenderType } from '../@types/components/chain-sequences';\nimport { createLocalSettings } from '../helpers/rest';\nconst { read, save } = createLocalSettings('miewer-chain-sequences-config', {\n    renderType: ChainSequenceRenderType.letter,\n    useColorer: true,\n});\nconst config = read();\nexport const useChainSequencesConfig = create((set, get) => ({\n    renderType: config.renderType,\n    useColorer: config.useColorer,\n    setRenderType(renderType) {\n        get().setConfig({\n            renderType,\n        });\n    },\n    setUseColorer(useColorer) {\n        get().setConfig({\n            useColorer,\n        });\n    },\n    setConfig(config) {\n        set(() => config);\n        save(Object.assign({ renderType: get().renderType, useColorer: get().useColorer }, config));\n    },\n}));\n","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { useCallback, useState } from 'react';\nimport classNames from 'classnames';\nimport { useMoleculeStructureStore } from '../../stores/miew-molecule-structure-store';\nimport ChainSequence from '../chain-sequence';\nimport { ChainSequenceEvent } from '../../@types/components/chain-sequences';\nimport { useChainSequencesConfig } from '../../stores/chain-sequences-config-store';\nfunction ChainSequences(props) {\n    const { className, chainClassName, style, chainStyle } = props;\n    const { chainNames } = useMoleculeStructureStore();\n    const { renderType, useColorer } = useChainSequencesConfig();\n    const [activeEventsTarget, setActiveEventsTarget] = useState(undefined);\n    const onEvent = useCallback((chain, event) => {\n        switch (event) {\n            case ChainSequenceEvent.scrollFinish:\n            case ChainSequenceEvent.selectionFinish:\n                if (activeEventsTarget) {\n                    setActiveEventsTarget(undefined);\n                }\n                break;\n            default:\n                if (activeEventsTarget !== chain.getName()) {\n                    setActiveEventsTarget(chain.getName());\n                }\n                break;\n        }\n    }, [activeEventsTarget, setActiveEventsTarget]);\n    return (_jsx(\"div\", { className: classNames('chain-sequences', className), style: style, children: chainNames.map((chainName) => (_jsx(ChainSequence, { chain: chainName, className: classNames(chainClassName, 'mw-row', 'chain-sequence-block'), style: chainStyle, onEvent: onEvent, type: renderType, useColorer: useColorer, pointerEventsDisabled: activeEventsTarget !== undefined && activeEventsTarget !== chainName }, chainName))) }));\n}\nexport default ChainSequences;\n","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport ChainSequences from './index';\nimport { MiewerPanel } from '../layout';\nimport useChainSequencesActions from './use-chain-sequences-actions';\nimport { useMoleculeStructureStore } from '../../stores/miew-molecule-structure-store';\nexport function useShowChainSequences() {\n    return useMoleculeStructureStore().chainNames.length > 0;\n}\nfunction ChainSequencesPanel(props) {\n    const chainSequencesActions = useChainSequencesActions();\n    return (_jsx(MiewerPanel, Object.assign({}, props, { panel: \"sequences\", actions: chainSequencesActions, children: _jsx(ChainSequences, {}) })));\n}\nexport default ChainSequencesPanel;\n","import { useCallback, useMemo } from 'react';\nimport { AlignCenterOutlined, SettingOutlined } from '@ant-design/icons';\nimport { useMiewSelectionStore } from '../../stores/miew-selection-store';\nimport { useCreateMiewRepresentation } from '../../stores/miew-store';\nimport { DisplayColor, DisplayMode } from '../../@types/miew';\nimport { useChainSequencesConfig } from '../../stores/chain-sequences-config-store';\nimport { ChainSequenceRenderType } from '../../@types/components/chain-sequences';\nexport default function useChainSequencesActions() {\n    const { getSelector, getSelectedResidues, setSelectedResidues } = useMiewSelectionStore();\n    const hasSelection = getSelectedResidues().length > 0;\n    const { setUseColorer, setRenderType, renderType, useColorer } = useChainSequencesConfig();\n    const createRepresentation = useCreateMiewRepresentation();\n    const clearSelection = useCallback(() => {\n        setSelectedResidues([]);\n    }, [setSelectedResidues]);\n    const createLayerFromSelection = useCallback(() => {\n        const selector = getSelector();\n        if (selector) {\n            createRepresentation({\n                selector,\n                name: 'Layer from selection',\n                mode: DisplayMode.cartoon,\n                colorer: [\n                    DisplayColor.uniform,\n                    { color: 0xff0000 },\n                ],\n            });\n            clearSelection();\n        }\n    }, [getSelector, createRepresentation, clearSelection]);\n    return useMemo(() => {\n        const actions = [];\n        actions.push({\n            key: 'config',\n            title: 'Appearance',\n            icon: SettingOutlined,\n            actions: [\n                {\n                    key: 'display-type-letter',\n                    title: 'Residue letter code',\n                    checked: renderType === ChainSequenceRenderType.letter,\n                    onAction() {\n                        setRenderType(ChainSequenceRenderType.letter);\n                    },\n                },\n                {\n                    key: 'display-type-name',\n                    title: 'Residue code',\n                    checked: renderType === ChainSequenceRenderType.name,\n                    onAction() {\n                        setRenderType(ChainSequenceRenderType.name);\n                    },\n                },\n                {\n                    type: 'divider',\n                },\n                {\n                    key: 'use-colorer',\n                    title: 'Use layer color',\n                    checked: useColorer,\n                    onAction() {\n                        setUseColorer(!useColorer);\n                    },\n                },\n            ],\n        });\n        actions.push({\n            key: 'selection',\n            title: 'Selection',\n            icon: AlignCenterOutlined,\n            disabled: !hasSelection,\n            actions: [\n                {\n                    key: 'add-layer-from-selection',\n                    title: 'Add layer from selection',\n                    onAction: createLayerFromSelection,\n                    disabled: !hasSelection,\n                },\n                {\n                    type: 'divider',\n                },\n                {\n                    key: 'clear-selection',\n                    title: 'Clear',\n                    onAction: clearSelection,\n                    disabled: !hasSelection,\n                },\n            ],\n        });\n        return actions;\n    }, [\n        hasSelection,\n        createLayerFromSelection,\n        clearSelection,\n        useColorer,\n        renderType,\n        setRenderType,\n        setUseColorer,\n    ]);\n}\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useCallback, useMemo } from 'react';\nimport { Button, Divider, Dropdown, Select } from 'antd';\nimport { CheckOutlined } from '@ant-design/icons';\nimport { getPropertyValue, initializeMiewProperty, } from '../../helpers/miew/properties';\nconst configureKey = '__configure__';\nfunction isDivider(o) {\n    return 'type' in o && o.type === 'divider';\n}\nfunction MiewPropertySelector(props) {\n    const { className, style, disabled, value, titles, items, manifests, onChange, onConfigure, displayFullName, type = 'select', } = props;\n    const itemKey = useCallback((item) => getPropertyValue(item).toString(), []);\n    const onChangeCallback = useCallback((e) => {\n        if (e === configureKey) {\n            if (typeof onConfigure === 'function') {\n                onConfigure();\n            }\n            return;\n        }\n        const getItemByValue = (itemValue) => items.find((o) => itemKey(o) === itemValue);\n        const newValue = getItemByValue(e);\n        if (newValue) {\n            onChange(initializeMiewProperty(newValue, manifests));\n        }\n    }, [onChange, onConfigure, items, manifests, itemKey]);\n    const onClick = useCallback((e) => {\n        onChangeCallback(e.key);\n    }, [onChangeCallback]);\n    const options = useMemo(() => {\n        const result = items.map((item) => ({\n            key: itemKey(item),\n            value: item,\n            title: titles[item],\n            label: (_jsxs(\"span\", { className: \"mw-property-selector-item-text\", children: [titles[item], value && itemKey(item) === itemKey(value) && (_jsx(CheckOutlined, { style: { marginLeft: 5 } }))] })),\n        }));\n        if (typeof onConfigure === 'function') {\n            result.push({ type: 'divider' });\n            result.push({\n                key: configureKey,\n                title: 'Configure',\n                value: configureKey,\n                label: _jsx(\"span\", { children: \"Configure\" }),\n            });\n        }\n        return result;\n    }, [itemKey, items, value, onConfigure]);\n    const menu = useMemo(() => ({\n        items: options,\n        onClick,\n        selectedKeys: value ? [itemKey(value)] : [],\n    }), [onClick, itemKey, options, value]);\n    const itemValue = useMemo(() => (value ? getPropertyValue(value) : undefined), [value, getPropertyValue]);\n    const displayName = useMemo(() => {\n        var _a;\n        if (itemValue) {\n            return (_a = (displayFullName ? titles[itemValue] : undefined)) !== null && _a !== void 0 ? _a : itemValue;\n        }\n        return null;\n    }, [displayFullName, itemValue]);\n    if (type === 'button') {\n        return (_jsx(Dropdown, { disabled: disabled, menu: menu, trigger: ['click'], overlayClassName: \"mw-property-selector-container\", children: _jsx(Button, { className: className, style: style, type: \"text\", children: displayName }) }));\n    }\n    if (type === 'select') {\n        return (_jsx(Select, { className: className, style: style, disabled: disabled, onChange: onChangeCallback, value: itemValue, popupClassName: \"mw-property-selector-container\", popupMatchSelectWidth: false, children: options.map((option) => {\n                if (isDivider(option)) {\n                    return _jsx(Divider, {}, \"divider\");\n                }\n                return (_jsx(Select.Option, { title: option.title, value: option.value, children: option.title }, option.key));\n            }) }));\n    }\n    return null;\n}\nexport default MiewPropertySelector;\n","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { displayModeNames, displayModes, displayModesOptionsManifests, } from '../../@types/miew';\nimport MiewPropertySelector from './miew-property-selector';\nfunction ModeSelector(props) {\n    return (_jsx(MiewPropertySelector, Object.assign({}, props, { items: displayModes, titles: displayModeNames, manifests: displayModesOptionsManifests })));\n}\nexport default ModeSelector;\n","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { displayColors, displayColorNames, displayColorOptionsManifests, } from '../../@types/miew';\nimport MiewPropertySelector from './miew-property-selector';\nfunction ColorerSelector(props) {\n    return (_jsx(MiewPropertySelector, Object.assign({}, props, { items: displayColors, titles: displayColorNames, manifests: displayColorOptionsManifests })));\n}\nexport default ColorerSelector;\n","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { displayMaterials, displayMaterialNames, displayMaterialOptionsManifests, } from '../../@types/miew';\nimport MiewPropertySelector from './miew-property-selector';\nfunction MaterialSelector(props) {\n    return (_jsx(MiewPropertySelector, Object.assign({}, props, { items: displayMaterials, titles: displayMaterialNames, manifests: displayMaterialOptionsManifests })));\n}\nexport default MaterialSelector;\n","import { jsx as _jsx, Fragment as _Fragment, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useCallback, useMemo } from 'react';\nimport { Button, ColorPicker } from 'antd';\nimport { colorValueToString, extractAlphaChannelFromHexColor, stringToColorValue, } from '../../../helpers/colors';\nimport classNames from 'classnames';\nfunction MiewerColorPicker(props) {\n    const { className, style, disabled, color, onChange, visible = true, type = 'text', opened, onOpenedChanged, size = 20, showValue, } = props;\n    const colorIsUnset = !color || color < 0;\n    const pickerColor = useMemo(() => colorValueToString(color && color >= 0 ? color : 0x0), [color]);\n    const onChangeColor = useCallback((changed) => {\n        if (typeof onChange === 'function') {\n            const hex = changed.toHexString();\n            const parsed = stringToColorValue(hex);\n            if (extractAlphaChannelFromHexColor(hex) === 0) {\n                onChange(-1);\n            }\n            else {\n                onChange(parsed);\n            }\n        }\n    }, [onChange]);\n    const displayStyle = useMemo(() => ({\n        fill: colorIsUnset ? 'transparent' : pickerColor,\n        width: size,\n        height: size,\n    }), [colorIsUnset, pickerColor, size]);\n    if (visible) {\n        return (_jsxs(_Fragment, { children: [showValue && (_jsx(\"span\", { className: \"mw-color-picker-display-value\", children: color && color >= 0 ? colorValueToString(color) : 'not set' })), _jsx(ColorPicker, { disabled: disabled, value: pickerColor, onChangeComplete: onChangeColor, open: opened, disabledAlpha: true, onOpenChange: onOpenedChanged, children: _jsx(Button, { type: type, disabled: disabled, className: classNames(className, 'mw-color-picker'), style: style, children: _jsx(\"svg\", { viewBox: \"0 0 20 20\", style: displayStyle, children: _jsx(\"circle\", { cx: \"10\", cy: \"10\", r: \"8\", strokeWidth: \"1\" }) }) }) })] }));\n    }\n    return null;\n}\nexport default MiewerColorPicker;\n","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { useCallback, useMemo } from 'react';\nimport { getColorOptionsForProperty, getPropertyManifest, getPropertyOptionValue, setPropertyOptionValue, } from '../../helpers/miew/properties';\nimport MiewerColorPicker from '../shared/miewer-color-picker';\nfunction SingleColorOption(props) {\n    const { className, style, value, onChange, manifests, disabled } = props;\n    const propertyManifest = useMemo(() => (value ? getPropertyManifest(value, manifests) : undefined), [value, manifests]);\n    const propertyOptionsManifests = useMemo(() => (value ? getColorOptionsForProperty(value, manifests) : []), [value, manifests]);\n    const optionManifest = propertyOptionsManifests.find((o) => o.main);\n    const color = useMemo(() => {\n        var _a;\n        if (optionManifest && value) {\n            const colorValue = (_a = getPropertyOptionValue(value, optionManifest)) !== null && _a !== void 0 ? _a : optionManifest.default;\n            if (colorValue !== undefined && colorValue >= 0) {\n                return colorValue;\n            }\n        }\n        return undefined;\n    }, [optionManifest, value]);\n    const onChangeColor = useCallback((newColor) => {\n        if (value &&\n            optionManifest &&\n            propertyManifest &&\n            typeof onChange === 'function') {\n            onChange(setPropertyOptionValue(value, propertyManifest, optionManifest, newColor));\n        }\n    }, [onChange, value, optionManifest, propertyManifest]);\n    if (optionManifest) {\n        return (_jsx(MiewerColorPicker, { disabled: disabled, className: className, style: style, color: color, onChange: onChangeColor }));\n    }\n    return null;\n}\nexport default SingleColorOption;\n","import { useCallback, useMemo } from 'react';\nimport useChangeProperty from './use-change-property';\nexport default function useChangeRepresentation(representation, repIndex, onEdit) {\n    const onChangeProperty = useChangeProperty(representation, repIndex, onEdit);\n    const changeName = useCallback((name) => {\n        onChangeProperty({ name });\n    }, [onChangeProperty]);\n    const changeNameEvent = useCallback((event) => {\n        onChangeProperty({ name: event.target.value });\n    }, [onChangeProperty]);\n    const changeSelector = useCallback((selector) => {\n        onChangeProperty({ selector });\n    }, [onChangeProperty]);\n    const changeSelectorEvent = useCallback((event) => {\n        onChangeProperty({ selector: event.target.value });\n    }, [onChangeProperty]);\n    const changeMode = useCallback((mode) => {\n        onChangeProperty({ mode });\n    }, [onChangeProperty]);\n    const changeColorer = useCallback((colorer) => {\n        onChangeProperty({ colorer });\n    }, [onChangeProperty]);\n    const changeMaterial = useCallback((material) => {\n        onChangeProperty({ material });\n    }, [onChangeProperty]);\n    return useMemo(() => ({\n        changeName,\n        changeNameEvent,\n        changeSelector,\n        changeSelectorEvent,\n        changeMaterial,\n        changeMode,\n        changeColorer,\n    }), [\n        changeName,\n        changeNameEvent,\n        changeSelector,\n        changeSelectorEvent,\n        changeMaterial,\n        changeMode,\n        changeColorer,\n    ]);\n}\n","import { useCallback } from 'react';\nexport default function useChangeProperty(representation, repIndex, onEdit) {\n    return useCallback((property) => {\n        onEdit(repIndex, Object.assign(Object.assign({}, representation), property));\n    }, [onEdit, repIndex, representation]);\n}\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useCallback, useMemo } from 'react';\nimport classNames from 'classnames';\nimport { Checkbox } from 'antd';\nimport { MiewPropertyOptionKind } from '../../@types/miew';\nimport { getPropertyOptionValue, setPropertyOptionValue, } from '../../helpers/miew/properties';\nimport MiewerColorPicker from '../shared/miewer-color-picker';\nimport { Input, InputNumber } from '../shared/antd-overrides';\nfunction PropertyOption(props) {\n    const { className, style, option, property, propertyManifest, disabled: controlDisabled, onChange, } = props;\n    const disabled = controlDisabled !== null && controlDisabled !== void 0 ? controlDisabled : !onChange;\n    const value = useMemo(() => {\n        var _a;\n        if (property && option) {\n            return (_a = getPropertyOptionValue(property, option)) !== null && _a !== void 0 ? _a : option.default;\n        }\n        return undefined;\n    }, [property, option]);\n    const { kind } = option;\n    const onEditOption = useCallback((newValue) => {\n        if (property && onChange) {\n            onChange(setPropertyOptionValue(property, propertyManifest, option, newValue));\n        }\n    }, [option, property, propertyManifest, onChange]);\n    const onEditTextOption = useCallback((event) => {\n        onEditOption(event.target.value);\n    }, [onEditOption]);\n    const onEditNumberOption = useCallback((number) => {\n        if (!Number.isNaN(Number(number))) {\n            onEditOption(Number(number));\n        }\n    }, [onEditOption]);\n    const onEditBooleanOption = useCallback((event) => {\n        onEditOption(event.target.checked);\n    }, [onEditOption]);\n    const placeholder = useMemo(() => { var _a, _b; return (_b = (_a = option === null || option === void 0 ? void 0 : option.default) === null || _a === void 0 ? void 0 : _a.toString()) !== null && _b !== void 0 ? _b : undefined; }, [option]);\n    const title = useMemo(() => { var _a, _b; return ((_b = (_a = option === null || option === void 0 ? void 0 : option.title) !== null && _a !== void 0 ? _a : option === null || option === void 0 ? void 0 : option.name) !== null && _b !== void 0 ? _b : '').toString(); }, [option]);\n    return (_jsxs(\"div\", { className: classNames(className, 'mw-row', 'mw-property-option'), style: style, children: [_jsx(\"span\", { className: \"mw-property-option-name\", children: title }), kind === MiewPropertyOptionKind.color && (_jsx(MiewerColorPicker, { disabled: disabled, showValue: true, color: value, onChange: onEditOption })), kind === MiewPropertyOptionKind.string && (_jsx(Input, { disabled: disabled, className: \"mw-control\", value: value, onChange: onEditTextOption, placeholder: placeholder })), kind === MiewPropertyOptionKind.number && (_jsx(InputNumber, { disabled: disabled, className: \"mw-control\", value: value, onChange: onEditNumberOption, placeholder: placeholder })), kind === MiewPropertyOptionKind.boolean && (_jsx(Checkbox, { disabled: disabled, checked: value, onChange: onEditBooleanOption }))] }));\n}\nexport default PropertyOption;\n","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { useMemo } from 'react';\nimport classNames from 'classnames';\nimport { getOptionsForProperty, getPropertyManifest, } from '../../helpers/miew/properties';\nimport PropertyOption from '../property-option';\nfunction PropertyOptions(props) {\n    const { className, optionClassName, style, optionStyle, property, disabled, manifests, onChange, } = props;\n    const propertyManifest = useMemo(() => (property ? getPropertyManifest(property, manifests) : undefined), [property, manifests]);\n    const options = useMemo(() => (property ? getOptionsForProperty(property, manifests) : []), [property, manifests]);\n    if (options.length === 0 || !propertyManifest) {\n        return null;\n    }\n    return (_jsx(\"div\", { className: classNames(className, 'mw-property-options'), style: style, children: options.map((option) => (_jsx(PropertyOption, { className: optionClassName, style: optionStyle, option: option, propertyManifest: propertyManifest, property: property, disabled: disabled, onChange: onChange }, option.name.toString()))) }));\n}\nexport default PropertyOptions;\n","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { displayModesOptionsManifests } from '../../@types/miew';\nimport PropertyOptions from './property-options';\nfunction ModeOptions(props) {\n    return (_jsx(PropertyOptions, Object.assign({}, props, { manifests: displayModesOptionsManifests })));\n}\nexport default ModeOptions;\n","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { displayColorOptionsManifests } from '../../@types/miew';\nimport PropertyOptions from './property-options';\nfunction ColorerOptions(props) {\n    return (_jsx(PropertyOptions, Object.assign({}, props, { manifests: displayColorOptionsManifests })));\n}\nexport default ColorerOptions;\n","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { displayMaterialOptionsManifests } from '../../@types/miew';\nimport PropertyOptions from './property-options';\nfunction MaterialOptions(props) {\n    return (_jsx(PropertyOptions, Object.assign({}, props, { manifests: displayMaterialOptionsManifests })));\n}\nexport default MaterialOptions;\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useCallback } from 'react';\nimport classNames from 'classnames';\nimport { Input } from '../shared/antd-overrides';\nimport ModeSelector from '../property-selectors/mode-selector';\nimport useChangeRepresentation from './hooks/use-change-representation';\nimport ColorerSelector from '../property-selectors/colorer-selector';\nimport MaterialSelector from '../property-selectors/material-selector';\nimport ModeOptions from '../property-options/mode-options';\nimport ColorerOptions from '../property-options/colorer-options';\nimport MaterialOptions from '../property-options/material-options';\nimport { noop } from '../../helpers/rest';\nimport { Button } from 'antd';\nfunction RepresentationForm(props) {\n    const { className, style, disabled: formDisabled, representation, repIndex, onRemove, onEdit, } = props;\n    const rowClassName = classNames('mw-row', 'mw-representation-row');\n    const rowDetailsClassName = classNames('mw-representation-row', 'mw-representation-row-details');\n    const { colorer, material, mode, name, selector } = representation;\n    const disabled = formDisabled !== null && formDisabled !== void 0 ? formDisabled : !onEdit;\n    const { changeColorer, changeMaterial, changeMode, changeNameEvent, changeSelectorEvent, } = useChangeRepresentation(representation, repIndex, onEdit !== null && onEdit !== void 0 ? onEdit : noop);\n    const onRemoveCallback = useCallback(() => {\n        if (typeof onRemove === 'function') {\n            onRemove(repIndex);\n        }\n    }, [onRemove, repIndex]);\n    return (_jsxs(\"div\", { className: classNames(className, 'mw-representation-form'), style: style, children: [_jsxs(\"div\", { className: rowClassName, children: [_jsx(\"span\", { className: \"mw-representation-property\", children: \"Name:\" }), _jsx(Input, { disabled: disabled, className: \"mw-control\", value: name, onChange: changeNameEvent, placeholder: \"Representation alias\" })] }), _jsxs(\"div\", { className: rowClassName, children: [_jsx(\"span\", { className: \"mw-representation-property\", children: \"Selector:\" }), _jsx(Input, { disabled: disabled, className: \"mw-control\", value: selector, onChange: changeSelectorEvent, placeholder: \"Representation selector\" })] }), _jsxs(\"div\", { className: rowClassName, children: [_jsx(\"span\", { className: \"mw-representation-property\", children: \"Mode:\" }), _jsx(ModeSelector, { disabled: disabled, className: \"mw-control\", value: mode, onChange: changeMode, type: \"select\" })] }), _jsx(ModeOptions, { className: rowDetailsClassName, property: mode, onChange: changeMode }), _jsxs(\"div\", { className: rowClassName, children: [_jsx(\"span\", { className: \"mw-representation-property\", children: \"Colorer:\" }), _jsx(ColorerSelector, { disabled: disabled, className: \"mw-control\", value: colorer, onChange: changeColorer, type: \"select\" })] }), _jsx(ColorerOptions, { className: rowDetailsClassName, property: colorer, onChange: changeColorer }), _jsxs(\"div\", { className: rowClassName, children: [_jsx(\"span\", { className: \"mw-representation-property\", children: \"Material:\" }), _jsx(MaterialSelector, { disabled: disabled, className: \"mw-control\", value: material, onChange: changeMaterial, type: \"select\" })] }), _jsx(MaterialOptions, { className: rowDetailsClassName, property: material, onChange: changeMaterial }), onRemove && (_jsx(\"div\", { className: \"mw-row mw-end\", children: _jsx(Button, { type: \"primary\", danger: true, onClick: onRemoveCallback, children: \"Remove\" }) }))] }));\n}\nexport default RepresentationForm;\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useCallback, useEffect, useMemo, useState } from 'react';\nimport { Button, Modal } from 'antd';\nimport RepresentationForm from './representation-form';\nimport { representationsEqual } from '../../helpers/miew/representations';\nfunction RepresentationFormModal(props) {\n    const { className, style, disabled, representation, repIndex, onRemove, onEdit, visible, onClose, } = props;\n    const [draft, setDraft] = useState(representation);\n    useEffect(() => {\n        setDraft(representation);\n    }, [representation, setDraft, visible]);\n    const onEditDraft = useCallback((index, draftRep) => {\n        setDraft(draftRep);\n    }, [setDraft]);\n    const equals = useMemo(() => representationsEqual(draft, representation), [draft, representation, representationsEqual]);\n    const onSubmit = useCallback(() => {\n        if (typeof onEdit === 'function') {\n            onEdit(repIndex, draft);\n        }\n    }, [onEdit, repIndex, draft]);\n    const onRemoveClick = useCallback(() => {\n        if (typeof onRemove === 'function') {\n            onRemove(repIndex);\n        }\n    }, [onRemove, repIndex]);\n    return (_jsx(Modal, { className: className, style: style, open: visible, onCancel: onClose, closeIcon: false, footer: _jsxs(\"div\", { className: \"mw-row mw-space-between\", children: [_jsx(\"div\", { children: onRemove && (_jsx(Button, { disabled: disabled, danger: true, type: \"primary\", onClick: onRemoveClick, children: \"Remove\" })) }), _jsxs(\"div\", { children: [_jsx(Button, { onClick: onClose, children: \"Cancel\" }), _jsx(Button, { disabled: disabled !== null && disabled !== void 0 ? disabled : equals, type: \"primary\", onClick: onSubmit, children: \"Save\" })] })] }), title: false, children: _jsx(RepresentationForm, { repIndex: repIndex, representation: draft, onEdit: onEditDraft, disabled: disabled }) }));\n}\nexport default RepresentationFormModal;\n","import { jsx as _jsx, Fragment as _Fragment, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useCallback, useEffect, useState } from 'react';\nimport classNames from 'classnames';\nimport { Button } from 'antd';\nimport { DeleteOutlined, SettingOutlined } from '@ant-design/icons';\nimport ModeSelector from '../property-selectors/mode-selector';\nimport ColorerSelector from '../property-selectors/colorer-selector';\nimport MaterialSelector from '../property-selectors/material-selector';\nimport SingleColorOption from './single-color-option';\nimport { displayColorOptionsManifests } from '../../@types/miew';\nimport { RepresentationFormModal } from '../representation';\nimport useChangeRepresentation from '../representation/hooks/use-change-representation';\nimport { noop } from '../../helpers/rest';\nimport { Input } from '../shared/antd-overrides';\nfunction RepresentationItem(props) {\n    const { className, style, disabled: itemDisabled, repIndex, representation, onRemove, onEdit, displayColorer, displayMode, displayMaterial, } = props;\n    const disabled = itemDisabled !== null && itemDisabled !== void 0 ? itemDisabled : !onEdit;\n    const { changeColorer, changeMaterial, changeMode, changeNameEvent, changeSelector, } = useChangeRepresentation(representation, repIndex, onEdit !== null && onEdit !== void 0 ? onEdit : noop);\n    const { name, selector, colorer, mode, material } = representation;\n    const [selectorTemp, setSelectorTemp] = useState(selector);\n    useEffect(() => {\n        setSelectorTemp(selector);\n    }, [selector, setSelectorTemp]);\n    const onChangeSelectorTemp = useCallback((event) => {\n        setSelectorTemp(event.target.value);\n    }, [setSelectorTemp]);\n    const onApplySelector = useCallback(() => {\n        changeSelector(selectorTemp !== null && selectorTemp !== void 0 ? selectorTemp : '');\n    }, [changeSelector, selectorTemp]);\n    const onRemoveCallback = useCallback(() => {\n        if (typeof onRemove === 'function') {\n            onRemove(repIndex);\n        }\n    }, [repIndex, onRemove]);\n    const [formModalVisible, setFormModalVisible] = useState(false);\n    const openModal = useCallback(() => {\n        setFormModalVisible(true);\n    }, [setFormModalVisible]);\n    const closeModal = useCallback(() => {\n        setFormModalVisible(false);\n    }, [setFormModalVisible]);\n    const onModalEditCallback = useCallback((index, rep) => {\n        if (typeof onEdit === 'function') {\n            onEdit(index, rep);\n        }\n        closeModal();\n    }, [onEdit, closeModal]);\n    const placeholder = selector ? `Alias for \"${selector}\"` : 'Alias';\n    return (_jsxs(\"div\", { className: classNames(className, 'mw-representation-control'), style: style, children: [_jsxs(\"div\", { className: \"mw-row\", children: [_jsx(Input, { disabled: disabled, className: \"mw-control mw-input-as-text\", value: name, onChange: changeNameEvent, placeholder: placeholder }), _jsxs(\"div\", { className: \"mw-actions\", children: [displayColorer && (_jsx(SingleColorOption, { value: colorer, disabled: disabled, onChange: changeColorer, className: classNames('mw-representation-selector', 'mw-representation-action'), manifests: displayColorOptionsManifests })), displayMode && (_jsx(ModeSelector, { disabled: disabled, value: mode, onChange: changeMode, className: classNames('mw-representation-selector', 'mw-representation-action'), type: \"button\" })), displayColorer && (_jsx(ColorerSelector, { disabled: disabled, value: colorer, onChange: changeColorer, className: classNames('mw-representation-selector', 'mw-representation-action'), type: \"button\" })), displayMaterial && (_jsx(MaterialSelector, { disabled: disabled, value: material, onChange: changeMaterial, className: classNames('mw-representation-selector', 'mw-representation-action'), type: \"button\" })), !disabled && (_jsxs(_Fragment, { children: [_jsx(Button, { type: \"text\", className: \"mw-representation-action\", onClick: openModal, children: _jsx(SettingOutlined, {}) }), onRemove && (_jsx(Button, { danger: true, type: \"text\", className: \"mw-representation-action\", onClick: onRemoveCallback, children: _jsx(DeleteOutlined, {}) }))] }))] })] }), _jsxs(\"div\", { className: \"mw-row\", children: [_jsx(\"div\", { className: \"mw-with-input-padding\", children: \"Selector:\" }), _jsx(Input, { disabled: disabled, className: \"mw-control mw-input-as-text\", value: selectorTemp, onChange: onChangeSelectorTemp, onBlur: onApplySelector, onPressEnter: onApplySelector, placeholder: \"Selector\" })] }), _jsx(RepresentationFormModal, { repIndex: repIndex, representation: representation, onRemove: onRemove, onEdit: onEdit ? onModalEditCallback : undefined, visible: formModalVisible, onClose: closeModal })] }));\n}\nexport default RepresentationItem;\n","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport classNames from 'classnames';\nimport { useChangeMiewRepresentation, useMiewRepresentations, useRemoveMiewRepresentation, } from '../../stores/miew-store';\nimport RepresentationItem from './list-item';\nfunction RepresentationsList(props) {\n    const { className, style } = props;\n    const changeRep = useChangeMiewRepresentation();\n    const removeRep = useRemoveMiewRepresentation();\n    const reps = useMiewRepresentations();\n    return (_jsx(\"div\", { className: classNames(className, 'mw-representations', 'mw-list'), style: style, children: reps.map((representation, idx) => (_jsx(RepresentationItem, { className: \"mw-list-item\", repIndex: idx, representation: representation, onRemove: removeRep, onEdit: changeRep, displayColorer: true, displayMode: true }, `rep-${idx}`))) }));\n}\nexport default RepresentationsList;\n","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { MiewerPanel } from '../layout';\nimport RepresentationsList from './index';\nimport useRepresentationsActions from './use-representations-actions';\nfunction RepresentationsPanel(props) {\n    const representationsActions = useRepresentationsActions();\n    return (_jsx(MiewerPanel, Object.assign({}, props, { panel: \"representations\", actions: representationsActions, children: _jsx(RepresentationsList, { className: \"mw-full-size\" }) })));\n}\nexport default RepresentationsPanel;\n","import { useMemo } from 'react';\nimport { useCreateMiewRepresentation } from '../../stores/miew-store';\nexport default function useRepresentationsActions() {\n    const createRep = useCreateMiewRepresentation();\n    return useMemo(() => [\n        {\n            key: 'create-representation',\n            onAction: createRep,\n            title: 'Add layer',\n        },\n    ], [createRep]);\n}\n","const emptyOptions = {};\nfunction getElementOptions(options) {\n    const { tag = 'div', parent = document.body, classNames = [], } = options !== null && options !== void 0 ? options : emptyOptions;\n    return {\n        tag,\n        parent,\n        classNames,\n    };\n}\nexport function ensureElementById(id, options) {\n    const { tag, parent, classNames } = getElementOptions(options);\n    let element = document.getElementById(id);\n    if (!element) {\n        element = document.createElement(tag);\n        parent.appendChild(element);\n    }\n    for (const className of classNames) {\n        element.classList.add(className);\n    }\n    return element;\n}\n","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { createRoot } from 'react-dom/client';\nimport 'miew/dist/miew.min.css';\nimport './themes/index.scss';\nimport Miewer from './components/miewer';\nimport { ensureElementById } from './helpers/dom';\nconsole.log('[Miewer] version:', PACKAGE_VERSION);\nif (DEVELOPMENT) {\n    console.log('[Miewer] Mode: development');\n}\nif (TEST) {\n    console.log('[Miewer] mode: test');\n}\nconst miewerContainer = ensureElementById('miewer', {\n    classNames: ['miewer'],\n});\nconst root = createRoot(miewerContainer, {\n    identifierPrefix: 'miewer',\n});\nroot.render(_jsx(Miewer, {}));\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { ConfigProvider } from 'antd';\nimport MiewRenderer from '../miew';\nimport { useAntdThemes, useThemes } from '../../stores/themes-store';\nimport { MiewerPanel as MiewerPanelType } from '../../@types/components/panels';\nimport { Container, MiewerPanel, SpaceContainer, SplitContainer, } from '../layout';\nimport Terminal from '../terminal';\nimport { usePanelVisible } from '../../stores/miewer-panels-store';\nimport Header from './header';\nimport MiewSelectionInfo from '../miew-selection-info';\nimport ChainSequencesPanel, { useShowChainSequences, } from '../chain-sequences/panel';\nimport RepresentationsPanel from '../representations/panel';\nfunction Miewer() {\n    useThemes();\n    const showTerminal = usePanelVisible(MiewerPanelType.terminal);\n    const showRepresentations = usePanelVisible(MiewerPanelType.representations);\n    const showChainSequences = usePanelVisible(MiewerPanelType.sequences);\n    const hasChainSequences = useShowChainSequences();\n    const antdTheme = useAntdThemes();\n    return (_jsxs(ConfigProvider, { componentSize: \"small\", theme: antdTheme, children: [_jsx(MiewRenderer, { className: \"mw-miew\" }), _jsxs(Container, { className: \"mw-full-size overflow-hidden\", direction: \"vertical\", children: [_jsx(Header, {}, \"header\"), _jsxs(SplitContainer, { stretch: true, direction: \"horizontal\", children: [_jsxs(SplitContainer, { direction: \"vertical\", stretch: true, children: [showChainSequences && hasChainSequences && (_jsx(ChainSequencesPanel, { size: \"auto\" }, \"structure\")), _jsx(SpaceContainer, {}), _jsx(Container, { direction: \"horizontal\", size: \"auto\", flex: \"center\", children: _jsx(MiewSelectionInfo, {}) }, \"selection-info\"), showTerminal && (_jsx(MiewerPanel, { panel: \"terminal\", titleClassName: \"mw-terminal-title\", size: \"20%\", minSize: 150, noPadding: true, children: _jsx(Terminal, { className: \"mw-full-size\" }) }, \"terminal\"))] }, \"main\"), showRepresentations && (_jsx(SplitContainer, { direction: \"vertical\", size: 300, minSize: 300, children: _jsx(RepresentationsPanel, {}) }, \"right\"))] }, \"body\")] }, \"root\")] }));\n}\nexport default Miewer;\n"],"names":["mapFontSize","fs","_a","e","exec","Number","isSystemTheme","theme","system","getThemeConfig","window","matchMedia","matches","dark","light","hexString","hex","abs","Math","concat","toString","stringToHex","string","colorValueToString","color","alpha","positiveValue","r","g","b","undefined","floor","stringToColorValue","test","getChannel","index","rgb","min","isNaN","fontFamily","fontSize","darkBackgroundBase","darkBackground","darkForeground","darkForegroundFaded","darkError","darkSelectionBackground","darkSelectionForeground","lightBackgroundBase","lightBackground","lightForeground","lightForegroundFaded","lightError","lightSelectionBackground","lightSelectionForeground","darkTheme","id","title","baseBackground","background","foreground","foregroundFaded","selectionBackground","selectionForeground","error","lightTheme","systemTheme","noop","getGreatestCommonDivisor","number","length","a","rest","t1","t2","max","t","getGreatestCommonDivisorEuclideanAlgorithm","arraysEquals","original","comparing","i","objectsEquals","Array","isArray","keysA","Object","keys","keysB","key","getQueryStringEntries","search","locationSearch","document","location","queryString","startsWith","slice","split","map","entryString","value","decodeURIComponent","join","getQueryStringFromEntries","entries","encodeKeys","query","entry","encodeKey","encodeValue","encodeURIComponent","getQueryEntryString","some","entryMatchesEncodeKey","escapeRegExpCharacters","getCssNumberValueRegExp","unit","RegExp","u","characters","result","forEach","character","replace","escapeRegExp","isCssNumberValue","cssValue","parseCssNumberValue","regExp","valueString","createLocalSettings","settings","defaultValue","read","setting","localStorage","getItem","trim","JSON","parse","noopError","readSetting","save","setItem","stringify","saveSetting","defaultTheme","defaultLocalStorageThemeId","savedTheme","find","useThemesStore","set","themes","themeConfig","setTheme","state","aTheme","o","updateThemeConfig","useThemeConfig","store","customDarkAlgorithm","seedToken","mapToken","darkAlgorithm","colorPrimary","colorText","colorPrimaryBg","colorFillTertiary","colorPrimaryBgHover","colorFillSecondary","MiewPropertyOptionKind","DisplayColor","carbon","default","kind","uniform","required","main","conditional","subset","baseColor","displayColorNames","element","residueType","sequence","chain","secondaryStructure","conformation","temperature","occupancy","hydrophobicity","molecule","displayColors","values","DisplayMode","displayModeNames","lines","licorice","ballsAndSticks","vanDerWaals","solventAccessibleSurface","solventExcludedSurface","quickSurface","contactSurface","trace","tube","cartoon","text","volumeDensity","displayModes","DisplayMaterial","displayMaterialNames","diffuse","softPlastic","glossyPlastic","metal","transparent","glass","backdrop","toon","flat","displayMaterials","MiewShadowType","Palette","MiewEntityType","isPropertyConfig","property","getPropertyOptions","cloneProperty","config","assign","getPropertyValue","initializeMiewPropertyOptions","manifest","allowEmpty","options","option","optionManifest","initializeOptionIfRequired","filter","Boolean","reduce","opt","getPropertyManifest","manifests","getOptionsForProperty","name","m","getPropertyOptionValue","setPropertyOptionValue","propertyManifest","propertiesEqual","property1","property2","pOptions1","options2","options1","cloneRepresentation","representation","selector","mode","colorer","material","representationsEqual","rep1","rep2","name1","selector1","colorer1","material1","mode1","name2","selector2","colorer2","material2","mode2","__rest","s","p","prototype","hasOwnProperty","call","indexOf","getOwnPropertySymbols","propertyIsEnumerable","clonePropertyOptions","reps","removeRepresentationName","processRepresentations","representations","processOptions","source","searchRequest","MiewRequest","MiewSourceRequest","constructor","super","this","_source","perform","miew","callback","unload","load","then","catch","console","warn","message","MiewOptionsRequest","_options","merge","request","preset","setOptions","applyPreset","repsCount","repCount","rep","idx","repRemove","MiewRequestProcessor","_miew","_queue","busy","_requestInProgress","registerRequest","last","push","performNextRequest","dispose","pickRequest","shift","onRequestDone","bind","_processor","requestOptions","diff","originalReps","processedOriginal","_b","comparingReps","differences","getObjectsShallowDifferences","getOptionsDiffIgnoringRepresentationNames","representationNameQueryKeyRegExp","ignoredKeys","filterIgnoredKeys","getMiewOptionsFromUrl","fromUrl","names","filteredEntries","filteredAfterNames","repsNames","filtered","repNameEntry","getRepresentationNamesFromEntries","getSearchRequestFromEntries","appendRepresentationsNamesToUrl","url","representationsNames","urlObject","URL","appendRepresentationNamesToEntries","href","Error","getSelectedAtomsCount","count","_forEachComplexVisual","complexVisual","getSelectionCount","getResidueDescription","residue","type","getType","getSequence","iCode","getICode","getChain","_fullName","getName","getSelectedResidues","selection","forSelectedResidues","getSelectorFromSelectedResidues","residues","ranges","array","uniqueSorted","Set","sort","item","getRangesFromNumberArray","_index","start","end","useMoleculeStructureStore","get","loaded","chains","chainNames","setChains","aChain","useSearchStore","urlSearchRequest","setSearch","setUrlSearchRequest","useMiewSelectionStore","lastPick","selectedAtomsCount","selectedResidues","setLastPick","entity","setSelectedAtomsCount","setSelectedResidues","getSelector","setData","data","current","arraysShallowEquals","useSelectionByCodes","useCallback","codes","all","str","letterCode","searchResult","toUpperCase","getEntityFromPickEvent","event","_c","_d","obj","atom","getChainSequences","repGet","complex","getChainNames","chainObject","forEachResidue","Flags","WATER","flags","isWater","anyColorer","hits","forEachAtom","repIndex","includesAtom","add","getColorersForResidue","pop","code","getChainSequence","getChainSequencesFromComplex","getComplex","useMiewStore","miewProxy","optionsInitializer","setMiew","setMiewProxy","setError","setSource","currentSettings","bg","setBackground","addRepresentation","changeRepresentation","changeRepresentations","changed","c","removeRepresentation","splice","useMiew","useMiewOptions","useCreateMiewRepresentation","newRepresentation","useSynchronizedMiewOptions","useEffect","useSynchronizeMiewBackgroundWithTheme","fromURL","useSynchronizedUrlOptions","useUrlRequestedSearch","onMiewLoading","onMiewBuildingDone","getMiewRepresentations","onMiewPick","onMiewRepresentationsChanged","addEventListener","removeEventListener","useMiewEvents","proxy","setProxy","aProxy","useSynchronizedUserOptions","select","useSynchronizedSelection","MiewerPanel","props","className","style","ref","useRef","initializationOptions","container","setInitializationOptions","useState","axes","fps","useInitializationOptions","useLayoutEffect","thisArg","_arguments","generator","Miew","init","run","P","Promise","resolve","reject","fulfilled","step","next","rejected","done","apply","initializeMiew","reason","children","miewerPanelNames","terminal","sequences","miewerPanelShortNames","isFixedSize","size","isPercentSize","isFlexSize","isAutoSize","getSizeInfo","getSizeValuePart","fixed","percent","flex","auto","getFixedSize","totalSize","flexBase","getValue","units","fn","shallowCopySizes","sizes","minSize","SpaceContainer","extractChildSizeConfiguration","child","defaultSize","stretch","getChildrenSizes","Children","createChildSizeConfig","getSizeGridIndex","getGridStyle","direction","template","aSize","parseGridSize","gridTemplateRows","gridTemplateColumns","getGridTemplateProperty","getDirection","getContainerType","grid","mergeStyles","aStyle","useChildrenSize","setChildSizes","newSizes","synchronizedChildren","set1","set2","recovered","item1","item2","copy","previous","recoverSizesByKeys","childrenSizesSetsEqual","getContainerClassName","gridSizes","defaultChildSize","childrenSizes","useMemo","useContainerStyle","getChildSize","getChildSizeConfigByKey","getChildSizeConfigGenerator","modifiedStyle","childSize","width","minWidth","height","minHeight","getFlexStyle","mapContainerChild","isPanelActionDivider","action","isPanelActionContainer","actions","isPanelActionConfig","findActionByKey","reduceActionsTree","trees","items","extractActionsTree","icon","Icon","checked","disabled","label","marginRight","CheckOutlined","marginLeft","onAction","onClick","rootAction","execute","menu","trigger","overlayClassName","titleClassName","titleStyle","onClose","bordered","noPadding","closable","CloseOutlined","useMiewerPanelsStore","panels","setPanelVisible","panel","visible","togglePanel","has","usePanelVisible","closePanel","useClosePanel","panelTitle","resizerContext","createContext","setSizes","isIndex","findIndexOfElementToResize","session","from","checkSize","inc","sign","calculatedSizes","calculatedMinSizes","sizesInfo","dividers","getResizeSessionFinalSizes","getSize","initialSizes","total","normalized","flexes","flexTotal","normalizeSizes","flexSizes","gcd","info","useContext","offsetHeight","offsetWidth","getSizeGenerator","setGrid","setGridStyle","onDragStart","divider","parentElement","previousIdx","dataset","nextIdx","parentElementChildren","HTMLElement","previousId","nextId","getResizeSession","onDrag","delta","previousSize","nextSize","previousMinSize","nextMinSize","getResizeSessionSizesAfterDrag","onDragFinish","dividerDirection","callbacks","moving","onMouseDown","button","x","clientX","y","clientY","classList","onMouseMove","preventDefault","deltaPoint","onMouseUp","remove","capture","useSplitContainerDivider","horizontal","vertical","splitContainerDefaultChildSize","cloneChildElementWithoutProps","dividerSize","containerProps","splitContainerClassName","childrenWithDividers","mapped","previousInfo","previousResizableInfo","childIndex","getChildKey","childProps","getChildProps","resizable","context","Provider","setTerminal","loading","setLoading","terminalRef","terminalDiv","MiewerTerminal","initialize","aTerminal","attach","errors","miewerPanelIconsSets","CodeOutlined","iconOn","CodeFilled","iconOff","EditOutlined","EditFilled","FontColorsOutlined","displayName","toggle","useTogglePanel","IconChild","useGeneratedCodeModal","setVisible","onHide","onShow","setCode","onCancel","open","closeIcon","footer","TextArea","readOnly","rows","visiblePanels","urlGenerator","cached","useRepresentationNames","getURL","view","compact","useUrlGenerator","scriptGenerator","getScript","useScriptGenerator","urlVisible","urlShow","urlHide","scriptVisible","scriptShow","scriptHide","handleKey","panelKeyE","themeKeyE","AppstoreOutlined","LaptopOutlined","ExportOutlined","MenuOutlined","miewerInputHoc","WrappedComponent","onBlur","onFocus","enableMiewHotKeys","enableHotKeys","useEnableMiewHotKeys","disableMiewHotKeys","useDisableMiewHotKeys","onFocusHoc","onBlurHoc","Input","InputNumber","ChainSequenceRenderType","ChainSequenceEvent","ChainSequenceAlignment","selectionByCodes","onSearchChange","target","onPressEnter","allowClear","placeholder","onChange","panelTogglesDisplayName","lastPickDescription","base","String","fromCharCode","fullName","serial","getAtomDescription","position","toFixed","z","toLowerCase","isMiewChain","isMiewMolecule","getDprValue","devicePixelRatio","getUnDprValue","animate","to","durationMs","reportLastValueOnAborted","report","raf","tick","time","elapsed","requestAnimationFrame","cancelAnimationFrame","stopAnimation","animation","bricksRenderModeThresholdPx","sliderInViewportSizeHovered","sliderSelectionOffset","selectionLineWidth","sliderInViewportSize","sliderOutOfViewportSize","sliderTopMargin","margin","sequenceItemHorizontalMargin","sliderZoneHeight","mouseMove","pointerEventsDisabled","_scrollSession","stopPropagation","stopImmediatePropagation","sliderHovered","getSliderPositionForMouseEvent","touchPosition","sliderInitialPosition","reportPointerEvent","scroll","_selectionSession","sequenceHovered","handleSelectionEvent","updateHoveredStatesForEvent","mouseDown","sliderOuter","mouseEventUnderBoundingBox","sliderOuterBoundingBox","sliderInner","sliderInnerBoundingBox","sequenceBoundingBox","center","scrollStart","selectionStart","getSequencePositionForMouseEvent","append","shiftKey","altKey","exclude","initialSelection","lastSelection","mouseUp","scrollFinish","requestRender","selectionFinish","_theme","_width","_height","_bbox","top","left","_position","_sliderHeight","_renderType","letter","_useColorer","_alignment","_renderRaf","_renderRequested","_reportSelectionRequested","_chain","_sliderHovered","_sequenceHovered","_chainTitleSize","_itemMaxCodeSize","_itemMaxCodeLetterSize","_selectedResidues","_selectedResiduesIndices","_positionAnimationAbort","_sliderHeightAnimationAbort","_pointerEventsDisabled","_pointerEventCallback","initializeRenderLoop","resetPosition","calculateTextSizes","renderType","useColorer","alignment","selectionCallback","_selectionCallback","pointerEventCallback","sequenceTitle","chainItemsStartPx","itemSize","itemsCount","visibleItemsCount","corrected","correctPosition","stopPositionAnimation","setPosition","sliderVisible","hovered","stopSliderHeightAnimation","animationDurationMs","sliderRatio","sliderWidth","sliderHeight","sliderCenter","sliderVerticalPosition","sliderRange","x1","x2","setCanvases","canvas","_canvas","detachListeners","stopAnimations","attachListeners","destroy","right","animated","newPosition","toStart","desiredHeight","ceil","clientHeight","getBoundingClientRect","clientWidth","render","reportSelectionChanged","applyTheme","ctx","font","residueIsSelected","getItemsWithinRange","correct","newSelection","bbox","selected","getContext","textBaseline","measureText","fontBoundingBoxAscent","letterCodeSize","codeSize","restore","getItemText","getSequenceItemPositionByIndex","renderSlider","dx","selectionY","sliderX1","sliderX2","beginPath","moveTo","arc","PI","rect","clip","getResidueColor","fillStyle","closePath","fill","lineWidth","lineTo","strokeStyle","stroke","cursor","clearRect","textAlign","textPosition","selectionOffset","fillText","partiallyInViewport","tx","useRendererProp","renderer","onEvent","canvasRef","setRenderer","newRenderer","renderCanvasRef","useRenderer","chainSequence","useChainSequencesConfig","setRenderType","setConfig","setUseColorer","chainClassName","chainStyle","activeEventsTarget","setActiveEventsTarget","chainName","chainSequencesActions","hasSelection","createRepresentation","clearSelection","createLayerFromSelection","SettingOutlined","AlignCenterOutlined","useChainSequencesActions","configureKey","titles","onConfigure","displayFullName","itemKey","onChangeCallback","newValue","itemValue","getItemByValue","optionsManifests","initializeMiewProperty","selectedKeys","popupClassName","popupMatchSelectWidth","Option","opened","onOpenedChanged","showValue","colorIsUnset","pickerColor","onChangeColor","toHexString","parsed","extractAlphaChannelFromHexColor","displayStyle","onChangeComplete","disabledAlpha","onOpenChange","viewBox","cx","cy","strokeWidth","isColorOptionManifest","getColorOptionsForProperty","colorValue","newColor","useChangeRepresentation","onEdit","onChangeProperty","useChangeProperty","changeName","changeNameEvent","changeSelector","changeSelectorEvent","changeMode","changeColorer","changeMaterial","controlDisabled","onEditOption","onEditTextOption","onEditNumberOption","onEditBooleanOption","boolean","optionClassName","optionStyle","formDisabled","onRemove","rowClassName","rowDetailsClassName","onRemoveCallback","danger","draft","setDraft","onEditDraft","draftRep","equals","onSubmit","onRemoveClick","itemDisabled","displayColorer","displayMode","displayMaterial","selectorTemp","setSelectorTemp","onChangeSelectorTemp","onApplySelector","formModalVisible","setFormModalVisible","openModal","closeModal","onModalEditCallback","DeleteOutlined","changeRep","removeRep","useMiewRepresentations","representationsActions","createRep","useRepresentationsActions","emptyOptions","log","miewerContainer","tag","parent","classNames","body","getElementOptions","getElementById","createElement","appendChild","ensureElementById","identifierPrefix","themeId","addListener","removeListener","useThemes","showTerminal","showRepresentations","showChainSequences","hasChainSequences","antdTheme","algorithm","defaultAlgorithm","token","borderRadiusOuter","borderRadius","colorBgBase","colorTextBase","colorError","components","Dropdown","Select","useAntdThemes","componentSize"],"sourceRoot":""}